(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"A1R+":function(t,e,n){"use strict";t.exports=o,t.exports.default=o;var i=n("YcpW");function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function l(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,o){o||(o=g(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,l=e;l<n;l++)r=t.children[l],a(o,t.leaf?i(r):r);return o}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,e,n,o,r){for(var l,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=o||(l=e+Math.ceil((n-e)/o/2)*o,i(t,l,e,n,r),s.push(e,l,l,n))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!f(t,e))return n;for(var o,r,l,s,a=[];e;){for(o=0,r=e.children.length;o<r;o++)l=e.children[o],f(t,s=e.leaf?i(l):l)&&(e.leaf?n.push(l):d(t,s)?this._all(l,n):a.push(l));e=a.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!f(t,e))return!1;for(var i,o,r,l,s=[];e;){for(i=0,o=e.children.length;i<o;i++)if(r=e.children[i],f(t,l=e.leaf?n(r):r)){if(e.leaf||d(t,l))return!0;s.push(r)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var o=this.data;this.data=i,i=o}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,i,o,l,s=this.data,a=this.toBBox(t),u=[],h=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],n=h.pop(),l=!0),s.leaf&&-1!==(o=r(t,s.children,e)))return s.children.splice(o,1),u.push(s),this._condense(u),this;l||s.leaf||!d(s,a)?i?(n++,s=i.children[n],l=!1):s=null:(u.push(s),h.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var o,r=n-e+1,s=this._maxEntries;if(r<=s)return l(o=g(t.slice(e,n+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,i-1))),(o=g([])).leaf=!1,o.height=i;var a,u,h,c,p=Math.ceil(r/s),d=p*Math.ceil(Math.sqrt(s));for(_(t,e,n,d,this.compareMinX),a=e;a<=n;a+=d)for(_(t,a,h=Math.min(a+d-1,n),p,this.compareMinY),u=a;u<=h;u+=p)c=Math.min(u+p-1,h),o.children.push(this._build(t,u,c,i-1));return l(o,this.toBBox),o},_chooseSubtree:function(t,e,n,i){for(var o,r,l,s,a,u,h,p,d,f;i.push(e),!e.leaf&&i.length-1!==n;){for(h=p=1/0,o=0,r=e.children.length;o<r;o++)a=c(l=e.children[o]),d=t,f=l,(u=(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-a)<p?(p=u,h=a<h?a:h,s=l):u===p&&a<h&&(h=a,s=l);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),o=[],r=this._chooseSubtree(i,this.data,e,o);for(r.children.push(t),a(r,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);var r=this._chooseSplitIndex(n,o,i),s=g(n.children.splice(r,n.children.length-r));s.height=n.height,s.leaf=n.leaf,l(n,this.toBBox),l(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,o,r,l,a,u,h,p,d,f,g,_,m,v;for(u=h=1/0,i=e;i<=n-e;i++)d=o=s(t,0,i,this.toBBox),f=r=s(t,i,n,this.toBBox),g=Math.max(d.minX,f.minX),_=Math.max(d.minY,f.minY),m=Math.min(d.maxX,f.maxX),v=Math.min(d.maxY,f.maxY),l=Math.max(0,m-g)*Math.max(0,v-_),a=c(o)+c(r),l<u?(u=l,p=i,h=a<h?a:h):l===u&&a<h&&(h=a,p=i);return p},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:u,o=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,o)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var o,r,l=this.toBBox,u=s(t,0,e,l),h=s(t,n-e,n,l),c=p(u)+p(h);for(o=e;o<n-e;o++)r=t.children[o],a(u,t.leaf?l(r):r),c+=p(u);for(o=n-e-1;o>=e;o--)r=t.children[o],a(h,t.leaf?l(r):r),c+=p(h);return c},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)a(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():l(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},YcpW:function(t,e,n){t.exports=function(){"use strict";function t(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function e(t,e){return t<e?-1:t>e?1:0}return function(n,i,o,r,l){!function e(n,i,o,r,l){for(;r>o;){if(r-o>600){var s=r-o+1,a=i-o+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(a-s/2<0?-1:1);e(n,i,Math.max(o,Math.floor(i-a*h/s+c)),Math.min(r,Math.floor(i+(s-a)*h/s+c)),l)}var p=n[i],d=o,f=r;for(t(n,o,i),l(n[r],p)>0&&t(n,o,r);d<f;){for(t(n,d,f),d++,f--;l(n[d],p)<0;)d++;for(;l(n[f],p)>0;)f--}0===l(n[o],p)?t(n,o,f):t(n,++f,r),f<=i&&(o=f+1),i<=f&&(r=f-1)}}(n,i,o||0,r||n.length-1,l||e)}}()},bJpF:function(t,e,n){"use strict";n.r(e);var i=n("CcnG"),o=function(){return function(){}}(),r=n("t68o"),l=n("NcP4"),s=n("zbXB"),a=n("xYTU"),u=n("pMnS"),h=n("QUEE"),c=n("NvT6"),p=n("Blfk"),d=n("dWZg"),f=n("Ip0R"),g=n("wFw1"),_=n("Mr+X"),m=n("SMsm"),v=n("A7o+"),y=n("v9Dh"),b=n("eDkP"),x=n("qAlS"),C=n("lLAP"),S=n("Fzqc"),w=n("ZYjt"),T=n("bujt"),E=n("UodH"),I=n("MlvX"),R=n("Wf4p"),k=n("gIcY"),M=n("lzlj"),P=n("FVSy"),O=n("Azqq"),L=n("uGex"),F=n("seP3"),D=n("4epT"),A=n("M2Lx"),B=n("4c35"),z=n("dJrM"),N=i.pb({encapsulation:2,styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;min-height:56px;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}"],data:{}});function G(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(t,e,n){var o=!0;return"click"===e&&(o=!1!==i.Bb(t,1)._selectViaInteraction()&&o),"keydown"===e&&(o=!1!==i.Bb(t,1)._handleKeydown(n)&&o),o}),I.c,I.a)),i.qb(1,8568832,[[8,4]],0,R.r,[i.k,i.h,[2,R.l],[2,R.q]],{value:[0,"value"]},null),(t()(),i.Hb(2,0,["",""]))],(function(t,e){t(e,1,0,e.context.$implicit)}),(function(t,e){t(e,0,0,i.Bb(e,1)._getTabIndex(),i.Bb(e,1).selected,i.Bb(e,1).multiple,i.Bb(e,1).active,i.Bb(e,1).id,i.Bb(e,1)._getAriaSelected(),i.Bb(e,1).disabled.toString(),i.Bb(e,1).disabled),t(e,2,0,e.context.$implicit)}))}function j(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,17,"mat-form-field",[["class","mat-paginator-page-size-select mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,z.b,z.a)),i.qb(1,7520256,null,7,F.c,[i.k,i.h,[2,R.j],[2,S.c],[2,F.a],d.a,i.A,[2,g.a]],{color:[0,"color"]},null),i.Fb(335544320,1,{_control:0}),i.Fb(335544320,2,{_placeholderChild:0}),i.Fb(335544320,3,{_labelChild:0}),i.Fb(603979776,4,{_errorChildren:1}),i.Fb(603979776,5,{_hintChildren:1}),i.Fb(603979776,6,{_prefixChildren:1}),i.Fb(603979776,7,{_suffixChildren:1}),(t()(),i.rb(9,0,null,1,8,"mat-select",[["class","mat-select"],["role","listbox"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"selectionChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(t,e,n){var o=!0,r=t.component;return"keydown"===e&&(o=!1!==i.Bb(t,11)._handleKeydown(n)&&o),"focus"===e&&(o=!1!==i.Bb(t,11)._onFocus()&&o),"blur"===e&&(o=!1!==i.Bb(t,11)._onBlur()&&o),"selectionChange"===e&&(o=!1!==r._changePageSize(n.value)&&o),o}),O.b,O.a)),i.Eb(6144,null,R.l,null,[L.c]),i.qb(11,2080768,null,3,L.c,[x.e,i.h,i.A,R.d,i.k,[2,S.c],[2,k.p],[2,k.i],[2,F.c],[8,null],[8,null],L.a,C.l],{disabled:[0,"disabled"],value:[1,"value"],ariaLabel:[2,"ariaLabel"]},{selectionChange:"selectionChange"}),i.Fb(603979776,8,{options:1}),i.Fb(603979776,9,{optionGroups:1}),i.Fb(335544320,10,{customTrigger:0}),i.Eb(2048,[[1,4]],F.d,null,[L.c]),(t()(),i.ib(16777216,null,1,1,null,G)),i.qb(17,278528,null,0,f.k,[i.Q,i.N,i.t],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.color),t(e,11,0,n.disabled,n.pageSize,n._intl.itemsPerPageLabel),t(e,17,0,n._displayedPageSizeOptions)}),(function(t,e){t(e,0,1,["standard"==i.Bb(e,1).appearance,"fill"==i.Bb(e,1).appearance,"outline"==i.Bb(e,1).appearance,"legacy"==i.Bb(e,1).appearance,i.Bb(e,1)._control.errorState,i.Bb(e,1)._canLabelFloat,i.Bb(e,1)._shouldLabelFloat(),i.Bb(e,1)._hasFloatingLabel(),i.Bb(e,1)._hideControlPlaceholder(),i.Bb(e,1)._control.disabled,i.Bb(e,1)._control.autofilled,i.Bb(e,1)._control.focused,"accent"==i.Bb(e,1).color,"warn"==i.Bb(e,1).color,i.Bb(e,1)._shouldForward("untouched"),i.Bb(e,1)._shouldForward("touched"),i.Bb(e,1)._shouldForward("pristine"),i.Bb(e,1)._shouldForward("dirty"),i.Bb(e,1)._shouldForward("valid"),i.Bb(e,1)._shouldForward("invalid"),i.Bb(e,1)._shouldForward("pending"),!i.Bb(e,1)._animationsEnabled]),t(e,9,1,[i.Bb(e,11).id,i.Bb(e,11).tabIndex,i.Bb(e,11)._getAriaLabel(),i.Bb(e,11)._getAriaLabelledby(),i.Bb(e,11).required.toString(),i.Bb(e,11).disabled.toString(),i.Bb(e,11).errorState,i.Bb(e,11).panelOpen?i.Bb(e,11)._optionIds:null,i.Bb(e,11).multiple,i.Bb(e,11)._ariaDescribedby||null,i.Bb(e,11)._getAriaActiveDescendant(),i.Bb(e,11).disabled,i.Bb(e,11).errorState,i.Bb(e,11).required,i.Bb(e,11).empty])}))}function q(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Hb(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.pageSize)}))}function Y(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,6,"div",[["class","mat-paginator-page-size"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,1,"div",[["class","mat-paginator-page-size-label"]],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""])),(t()(),i.ib(16777216,null,null,1,null,j)),i.qb(4,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,q)),i.qb(6,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,4,0,n._displayedPageSizeOptions.length>1),t(e,6,0,n._displayedPageSizeOptions.length<=1)}),(function(t,e){t(e,2,0,e.component._intl.itemsPerPageLabel)}))}function X(t){return i.Jb(0,[(t()(),i.rb(0,16777216,null,null,4,"button",[["class","mat-paginator-navigation-first"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var o=!0,r=t.component;return"longpress"===e&&(o=!1!==i.Bb(t,2).show()&&o),"keydown"===e&&(o=!1!==i.Bb(t,2)._handleKeydown(n)&&o),"touchend"===e&&(o=!1!==i.Bb(t,2)._handleTouchend()&&o),"click"===e&&(o=!1!==r.firstPage()&&o),o}),T.b,T.a)),i.qb(1,180224,null,0,E.b,[i.k,d.a,C.h,[2,g.a]],{disabled:[0,"disabled"]},null),i.qb(2,147456,null,0,y.d,[b.c,i.k,x.b,i.Q,i.A,d.a,C.c,C.h,y.b,[2,S.c],[2,y.a],[2,w.g]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"]},null),(t()(),i.rb(3,0,null,0,1,":svg:svg",[["class","mat-paginator-icon"],["focusable","false"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(t()(),i.rb(4,0,null,null,0,":svg:path",[["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"]],null,null,null,null,null)),(t()(),i.ib(0,null,null,0))],(function(t,e){var n=e.component;t(e,1,0,n._previousButtonsDisabled()),t(e,2,0,"above",n._previousButtonsDisabled(),n._intl.firstPageLabel)}),(function(t,e){t(e,0,0,e.component._intl.firstPageLabel,i.Bb(e,1).disabled||null,"NoopAnimations"===i.Bb(e,1)._animationMode)}))}function K(t){return i.Jb(0,[(t()(),i.rb(0,16777216,null,null,4,"button",[["class","mat-paginator-navigation-last"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var o=!0,r=t.component;return"longpress"===e&&(o=!1!==i.Bb(t,2).show()&&o),"keydown"===e&&(o=!1!==i.Bb(t,2)._handleKeydown(n)&&o),"touchend"===e&&(o=!1!==i.Bb(t,2)._handleTouchend()&&o),"click"===e&&(o=!1!==r.lastPage()&&o),o}),T.b,T.a)),i.qb(1,180224,null,0,E.b,[i.k,d.a,C.h,[2,g.a]],{disabled:[0,"disabled"]},null),i.qb(2,147456,null,0,y.d,[b.c,i.k,x.b,i.Q,i.A,d.a,C.c,C.h,y.b,[2,S.c],[2,y.a],[2,w.g]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"]},null),(t()(),i.rb(3,0,null,0,1,":svg:svg",[["class","mat-paginator-icon"],["focusable","false"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(t()(),i.rb(4,0,null,null,0,":svg:path",[["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],null,null,null,null,null)),(t()(),i.ib(0,null,null,0))],(function(t,e){var n=e.component;t(e,1,0,n._nextButtonsDisabled()),t(e,2,0,"above",n._nextButtonsDisabled(),n._intl.lastPageLabel)}),(function(t,e){t(e,0,0,e.component._intl.lastPageLabel,i.Bb(e,1).disabled||null,"NoopAnimations"===i.Bb(e,1)._animationMode)}))}function W(t){return i.Jb(2,[(t()(),i.rb(0,0,null,null,20,"div",[["class","mat-paginator-outer-container"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,19,"div",[["class","mat-paginator-container"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,Y)),i.qb(3,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(4,0,null,null,16,"div",[["class","mat-paginator-range-actions"]],null,null,null,null,null)),(t()(),i.rb(5,0,null,null,1,"div",[["class","mat-paginator-range-label"]],null,null,null,null,null)),(t()(),i.Hb(6,null,["",""])),(t()(),i.ib(16777216,null,null,1,null,X)),i.qb(8,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(9,16777216,null,null,4,"button",[["class","mat-paginator-navigation-previous"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var o=!0,r=t.component;return"longpress"===e&&(o=!1!==i.Bb(t,11).show()&&o),"keydown"===e&&(o=!1!==i.Bb(t,11)._handleKeydown(n)&&o),"touchend"===e&&(o=!1!==i.Bb(t,11)._handleTouchend()&&o),"click"===e&&(o=!1!==r.previousPage()&&o),o}),T.b,T.a)),i.qb(10,180224,null,0,E.b,[i.k,d.a,C.h,[2,g.a]],{disabled:[0,"disabled"]},null),i.qb(11,147456,null,0,y.d,[b.c,i.k,x.b,i.Q,i.A,d.a,C.c,C.h,y.b,[2,S.c],[2,y.a],[2,w.g]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"]},null),(t()(),i.rb(12,0,null,0,1,":svg:svg",[["class","mat-paginator-icon"],["focusable","false"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(t()(),i.rb(13,0,null,null,0,":svg:path",[["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"]],null,null,null,null,null)),(t()(),i.rb(14,16777216,null,null,4,"button",[["class","mat-paginator-navigation-next"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var o=!0,r=t.component;return"longpress"===e&&(o=!1!==i.Bb(t,16).show()&&o),"keydown"===e&&(o=!1!==i.Bb(t,16)._handleKeydown(n)&&o),"touchend"===e&&(o=!1!==i.Bb(t,16)._handleTouchend()&&o),"click"===e&&(o=!1!==r.nextPage()&&o),o}),T.b,T.a)),i.qb(15,180224,null,0,E.b,[i.k,d.a,C.h,[2,g.a]],{disabled:[0,"disabled"]},null),i.qb(16,147456,null,0,y.d,[b.c,i.k,x.b,i.Q,i.A,d.a,C.c,C.h,y.b,[2,S.c],[2,y.a],[2,w.g]],{position:[0,"position"],disabled:[1,"disabled"],message:[2,"message"]},null),(t()(),i.rb(17,0,null,0,1,":svg:svg",[["class","mat-paginator-icon"],["focusable","false"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(t()(),i.rb(18,0,null,null,0,":svg:path",[["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,K)),i.qb(20,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,3,0,!n.hidePageSize),t(e,8,0,n.showFirstLastButtons),t(e,10,0,n._previousButtonsDisabled()),t(e,11,0,"above",n._previousButtonsDisabled(),n._intl.previousPageLabel),t(e,15,0,n._nextButtonsDisabled()),t(e,16,0,"above",n._nextButtonsDisabled(),n._intl.nextPageLabel),t(e,20,0,n.showFirstLastButtons)}),(function(t,e){var n=e.component;t(e,6,0,n._intl.getRangeLabel(n.pageIndex,n.pageSize,n.length)),t(e,9,0,n._intl.previousPageLabel,i.Bb(e,10).disabled||null,"NoopAnimations"===i.Bb(e,10)._animationMode),t(e,14,0,n._intl.nextPageLabel,i.Bb(e,15).disabled||null,"NoopAnimations"===i.Bb(e,15)._animationMode)}))}function H(){return function(){throw new Error("Unimplemented abstract method.")}()}var U=0;function Z(t){return t.ol_uid||(t.ol_uid=String(++U))}var V=function(t){function e(e){var n="Assertion failed. See https://openlayers.org/en/v"+"5.3.3".split("-")[0]+"/doc/errors/#"+e+" for details.";t.call(this,n),this.code=e,this.name="AssertionError",this.message=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),J="function"==typeof Object.assign?Object.assign:function(t,e){var n=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),o=1,r=arguments.length;o<r;++o){var l=n[o];if(null!=l)for(var s in l)l.hasOwnProperty(s)&&(i[s]=l[s])}return i};function Q(t){for(var e in t)delete t[e]}function $(t){var e=[];for(var n in t)e.push(t[n]);return e}function tt(t){var e;for(e in t)return!1;return!e}function et(t,e,n,i){for(var o,r=0,l=t.length;r<l;++r)if((o=t[r]).listener===e&&o.bindTo===n)return i&&(o.deleteIndex=r),o}function nt(t,e){var n=it(t);return n?n[e]:void 0}function it(t,e){var n=t.ol_lm;return!n&&e&&(n=t.ol_lm={}),n}function ot(t,e){var n=nt(t,e);if(n){for(var i=0,o=n.length;i<o;++i)t.removeEventListener(e,n[i].boundListener),Q(n[i]);n.length=0;var r=it(t);r&&(delete r[e],0===Object.keys(r).length&&function(t){delete t.ol_lm}(t))}}function rt(t,e,n,i,o){var r=it(t,!0),l=r[e];l||(l=r[e]=[]);var s=et(l,n,i,!1);return s?o||(s.callOnce=!1):(t.addEventListener(e,function(t){var e=function(e){var n=t.listener,i=t.bindTo||t.target;return t.callOnce&&at(t),n.call(i,e)};return t.boundListener=e,e}(s={bindTo:i,callOnce:!!o,listener:n,target:t,type:e})),l.push(s)),s}function lt(t,e,n,i){return rt(t,e,n,i,!0)}function st(t,e,n,i){var o=nt(t,e);if(o){var r=et(o,n,i,!0);r&&at(r)}}function at(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=nt(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&ot(t.target,t.type)}Q(t)}}var ut=function(){this.disposed_=!1};ut.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},ut.prototype.disposeInternal=function(){};var ht=ut;function ct(){return!0}function pt(){return!1}function dt(){}var ft=function(t){this.type=t,this.target=null};function gt(t){t.stopPropagation()}ft.prototype.preventDefault=function(){this.propagationStopped=!0},ft.prototype.stopPropagation=function(){this.propagationStopped=!0};var _t=ft,mt=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addEventListener=function(t,e){var n=this.listeners_[t];n||(n=this.listeners_[t]=[]),-1===n.indexOf(e)&&n.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new _t(t):t,n=e.type;e.target=this;var i,o=this.listeners_[n];if(o){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var r=0,l=o.length;r<l;++r)if(!1===o[r].call(this,e)||e.propagationStopped){i=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var s=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];s--;)this.removeEventListener(n,dt);delete this.dispatching_[n]}return i}},e.prototype.disposeInternal=function(){!function(t){var e=it(t);if(e)for(var n in e)ot(t,n)}(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var i=n.indexOf(e);t in this.pendingRemovals_?(n[i]=dt,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t])}},e}(ht),vt=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=rt(this,t[o],e);return i}return rt(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=lt(this,t[o],e);return i}return lt(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)st(this,t[n],e);else st(this,t,e)},e}(mt),yt=function(t){function e(e,n,i){t.call(this,e),this.key=n,this.oldValue=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_t),bt={};function xt(t){return bt.hasOwnProperty(t)?bt[t]:bt[t]="change:"+t}var Ct=function(t){function e(e){t.call(this),Z(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return J({},this.values_)},e.prototype.notify=function(t,e){var n;n=xt(t),this.dispatchEvent(new yt(n,t,e)),this.dispatchEvent(new yt(n="propertychange",t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var i=this.values_[t];this.values_[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(vt),St=function(t){function e(e,n){t.call(this,e),this.element=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_t),wt=function(t){function e(e,n){if(t.call(this),this.unique_=!!(n||{}).unique,this.array_=e||[],this.unique_)for(var i=0,o=this.array_.length;i<o;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get("length")},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new St("add",e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new St("remove",e)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new St("remove",i)),this.dispatchEvent(new St("add",e))}else{for(var o=n;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set("length",this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new V(58)},e}(Ct),Tt=function(t){function e(e,n,i){t.call(this,e),this.map=n,this.frameState=void 0!==i?i:null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_t),Et=function(t){function e(e,n,i,o,r){t.call(this,e,n,r),this.originalEvent=i,this.pixel=n.getEventPixel(i),this.coordinate=n.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==o&&o}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Tt),It="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",Rt=-1!==It.indexOf("firefox"),kt=-1!==It.indexOf("safari")&&-1==It.indexOf("chrom"),Mt=-1!==It.indexOf("webkit")&&-1==It.indexOf("edge"),Pt=-1!==It.indexOf("macintosh"),Ot=window.devicePixelRatio||1,Lt=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(e){}return t}(),Ft=(navigator,"ontouchstart"in window),Dt="PointerEvent"in window,At=!!navigator.msPointerEnabled,Bt={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},zt=function(t){function e(e,n,i,o,r){t.call(this,e,n,i.originalEvent,o,r),this.pointerEvent=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Et),Nt=function(t,e){this.dispatcher=t,this.mapping_=e};Nt.prototype.getEvents=function(){return Object.keys(this.mapping_)},Nt.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var Gt=Nt;function jt(t){if(!this.isEventSimulatedFromTouch_(t)){1..toString()in this.pointerMap&&this.cancel(t);var e=Wt(t,this.dispatcher);this.pointerMap[1..toString()]=t,this.dispatcher.down(e,t)}}function qt(t){if(!this.isEventSimulatedFromTouch_(t)){var e=Wt(t,this.dispatcher);this.dispatcher.move(e,t)}}function Yt(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[1..toString()];if(e&&e.button===t.button){var n=Wt(t,this.dispatcher);this.dispatcher.up(n,t),this.cleanupMouse()}}}function Xt(t){if(!this.isEventSimulatedFromTouch_(t)){var e=Wt(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function Kt(t){if(!this.isEventSimulatedFromTouch_(t)){var e=Wt(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function Wt(t,e){var n=e.cloneEvent(t,t),i=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),i()},n.pointerId=1,n.isPrimary=!0,n.pointerType="mouse",n}var Ht=function(t){function e(e){t.call(this,e,{mousedown:jt,mousemove:qt,mouseup:Yt,mouseover:Xt,mouseout:Kt}),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,n=t.clientX,i=t.clientY,o=0,r=e.length,l=void 0;o<r&&(l=e[o]);o++){var s=Math.abs(n-l[0]),a=Math.abs(i-l[1]);if(s<=25&&a<=25)return!0}return!1},e.prototype.cancel=function(t){var e=Wt(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[1..toString()]},e}(Gt),Ut=["","unavailable","touch","pen","mouse"];function Zt(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function Vt(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function Jt(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function Qt(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function $t(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function te(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function ee(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function ne(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var ie=function(t){function e(e){t.call(this,e,{MSPointerDown:Zt,MSPointerMove:Vt,MSPointerUp:Jt,MSPointerOut:Qt,MSPointerOver:$t,MSPointerCancel:te,MSGotPointerCapture:ne,MSLostPointerCapture:ee}),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=Ut[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(Gt);function oe(t){this.dispatcher.fireNativeEvent(t)}function re(t){this.dispatcher.fireNativeEvent(t)}function le(t){this.dispatcher.fireNativeEvent(t)}function se(t){this.dispatcher.fireNativeEvent(t)}function ae(t){this.dispatcher.fireNativeEvent(t)}function ue(t){this.dispatcher.fireNativeEvent(t)}function he(t){this.dispatcher.fireNativeEvent(t)}function ce(t){this.dispatcher.fireNativeEvent(t)}var pe=function(t){function e(e){t.call(this,e,{pointerdown:oe,pointermove:re,pointerup:le,pointerout:se,pointerover:ae,pointercancel:ue,gotpointercapture:ce,lostpointercapture:he})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Gt),de=function(t){function e(e,n,i){t.call(this,e),this.originalEvent=n;var o=i||{};this.buttons=function(t){var e;if(t.buttons)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(o),this.pressure=function(t,e){return t.pressure?t.pressure:e?.5:0}(o,this.buttons),this.bubbles="bubbles"in o&&o.bubbles,this.cancelable="cancelable"in o&&o.cancelable,this.view="view"in o?o.view:null,this.detail="detail"in o?o.detail:null,this.screenX="screenX"in o?o.screenX:0,this.screenY="screenY"in o?o.screenY:0,this.clientX="clientX"in o?o.clientX:0,this.clientY="clientY"in o?o.clientY:0,this.ctrlKey="ctrlKey"in o&&o.ctrlKey,this.altKey="altKey"in o&&o.altKey,this.shiftKey="shiftKey"in o&&o.shiftKey,this.metaKey="metaKey"in o&&o.metaKey,this.button="button"in o?o.button:0,this.relatedTarget="relatedTarget"in o?o.relatedTarget:null,this.pointerId="pointerId"in o?o.pointerId:0,this.width="width"in o?o.width:0,this.height="height"in o?o.height:0,this.tiltX="tiltX"in o?o.tiltX:0,this.tiltY="tiltY"in o?o.tiltY:0,this.pointerType="pointerType"in o?o.pointerType:"",this.hwTimestamp="hwTimestamp"in o?o.hwTimestamp:0,this.isPrimary="isPrimary"in o&&o.isPrimary,n.preventDefault&&(this.preventDefault=function(){n.preventDefault()})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_t);function fe(t,e){return t>e?1:t<e?-1:0}function ge(t,e,n){var i,o=t.length;if(t[0]<=e)return 0;if(e<=t[o-1])return o-1;if(n>0){for(i=1;i<o;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<o;++i)if(t[i]<=e)return i}else for(i=1;i<o;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return o-1}function _e(t,e,n){for(;e<n;){var i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function me(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,o=0;o<i;o++)t[t.length]=n[o]}function ve(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function ye(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function be(t){this.processTouches_(t,this.moveOverOut_)}function xe(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function Ce(t){this.processTouches_(t,this.cancelOut_)}var Se=function(t){function e(e,n){t.call(this,e,{touchstart:ye,touchmove:be,touchend:xe,touchcancel:Ce}),this.pointerMap=e.pointerMap,this.mouseSource=n,this.firstTouchId_=void 0,this.clickCount_=0,this.dedupTimeout_=2500}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&1..toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var n=this.dispatcher.cloneEvent(t,e);return n.pointerId=e.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=e.radiusX||0,n.height=e.radiusY||0,n.pressure=e.force||.5,n.isPrimary=this.isPrimaryTouch_(e),n.pointerType="touch",n.clientX=e.clientX,n.clientY=e.clientY,n.screenX=e.screenX,n.screenY=e.screenY,n},e.prototype.processTouches_=function(t,e){var n=Array.prototype.slice.call(t.changedTouches),i=n.length;function o(){t.preventDefault()}for(var r=0;r<i;++r){var l=this.touchToPointer_(t,n[r]);l.preventDefault=o,e.call(this,t,l)}},e.prototype.findTouch_=function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].identifier===e)return!0;return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,n=Object.keys(this.pointerMap),i=n.length;if(i>=e.length){for(var o=[],r=0;r<i;++r){var l=Number(n[r]),s=this.pointerMap[l];1==l||this.findTouch_(e,l-2)||o.push(s.out)}for(var a=0;a<o.length;++a)this.cancelOut_(t,o[a])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var n=e,i=this.pointerMap[n.pointerId];if(i){var o=i.out,r=i.outTarget;this.dispatcher.move(n,t),o&&r!==n.target&&(o.relatedTarget=n.target,n.relatedTarget=r,o.target=r,n.target?(this.dispatcher.leaveOut(o,t),this.dispatcher.enterOver(n,t)):(n.target=r,n.relatedTarget=null,this.cancelOut_(t,n))),i.out=n,i.outTarget=n.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){var i=[n.clientX,n.clientY];e.push(i),setTimeout((function(){var t,n;(n=(t=e).indexOf(i))>-1&&t.splice(n,1)}),this.dedupTimeout_)}},e}(Gt),we=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],Te=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.registerSources=function(){if(Dt)this.registerSource("native",new pe(this));else if(At)this.registerSource("ms",new ie(this));else{var t=new Ht(this);this.registerSource("mouse",t),Ft&&this.registerSource("touch",new Se(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var n=e,i=n.getEvents();i&&(i.forEach((function(t){var e=n.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(n))}).bind(this)),this.eventSourceList_.push(n))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++)this.addEvents_(this.eventSourceList_[e].getEvents())},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++)this.removeEvents_(this.eventSourceList_[e].getEvents())},e.prototype.eventHandler_=function(t){var e=this.eventMap_[t.type];e&&e(t)},e.prototype.addEvents_=function(t){t.forEach((function(t){rt(this.element_,t,this.eventHandler_,this)}).bind(this))},e.prototype.removeEvents_=function(t){t.forEach((function(t){st(this.element_,t,this.eventHandler_,this)}).bind(this))},e.prototype.cloneEvent=function(t,e){for(var n={},i=0,o=we.length;i<o;i++){var r=we[i][0];n[r]=t[r]||e[r]||we[i][1]}return n},e.prototype.down=function(t,e){this.fireEvent("pointerdown",t,e)},e.prototype.move=function(t,e){this.fireEvent("pointermove",t,e)},e.prototype.up=function(t,e){this.fireEvent("pointerup",t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent("pointerenter",t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent("pointerleave",t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent("pointerover",t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent("pointerout",t,e)},e.prototype.cancel=function(t,e){this.fireEvent("pointercancel",t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,n){return new de(t,n,e)},e.prototype.fireEvent=function(t,e,n){var i=this.makeEvent(t,e,n);this.dispatchEvent(i)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,Wt(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(mt),Ee=function(t){function e(e,n){t.call(this),this.map_=e,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n?n*Ot:Ot,this.down_=null;var i=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new Te(i),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=rt(this.pointerEventHandler_,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=rt(this.pointerEventHandler_,"pointermove",this.relayEvent_,this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.emulateClick_=function(t){var e=new zt(Bt.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new zt(Bt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=void 0;var e=new zt(Bt.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}).bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Bt.POINTERUP||e.type==Bt.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Bt.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new zt(Bt.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(at),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new zt(Bt.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new Te(document),this.dragListenerKeys_.push(rt(this.documentPointerEventHandler_,Bt.POINTERMOVE,this.handlePointerMove_,this),rt(this.documentPointerEventHandler_,Bt.POINTERUP,this.handlePointerUp_,this),rt(this.pointerEventHandler_,Bt.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new zt(Bt.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new zt(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(at(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(at(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(at),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(mt);function Ie(t,e){if(!t)throw new V(e)}var Re=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};Re.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Q(this.queuedElements_)},Re.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},Re.prototype.enqueue=function(t){Ie(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},Re.prototype.getCount=function(){return this.elements_.length},Re.prototype.getLeftChildIndex_=function(t){return 2*t+1},Re.prototype.getRightChildIndex_=function(t){return 2*t+2},Re.prototype.getParentIndex_=function(t){return t-1>>1},Re.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},Re.prototype.isEmpty=function(){return 0===this.elements_.length},Re.prototype.isKeyQueued=function(t){return t in this.queuedElements_},Re.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},Re.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,i=e.length,o=e[t],r=n[t],l=t;t<i>>1;){var s=this.getLeftChildIndex_(t),a=this.getRightChildIndex_(t),u=a<i&&n[a]<n[s]?a:s;e[t]=e[u],n[t]=n[u],t=u}e[t]=o,n[t]=r,this.siftDown_(l,t)},Re.prototype.siftDown_=function(t,e){for(var n=this.elements_,i=this.priorities_,o=n[e],r=i[e];e>t;){var l=this.getParentIndex_(e);if(!(i[l]>r))break;n[e]=n[l],i[e]=i[l],e=l}n[e]=o,i[e]=r},Re.prototype.reprioritize=function(){var t,e,n,i=this.priorityFunction_,o=this.elements_,r=this.priorities_,l=0,s=o.length;for(e=0;e<s;++e)(n=i(t=o[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(r[l]=n,o[l++]=t);o.length=l,r.length=l,this.heapify_()};var ke=function(t){function e(e,n){t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()})),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&rt(e[0],"change",this.handleTileChange,this),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n||5===n){st(e,"change",this.handleTileChange,this);var i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,i,o,r=0,l=!1;this.tilesLoading_<t&&r<e&&this.getCount()>0;)o=(i=this.dequeue()[0]).getKey(),5===(n=i.getState())?l=!0:0!==n||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,i.load());0===r&&l&&this.tileChangeCallback_()},e}(Re);function Me(t,e,n){return Math.min(Math.max(t,e),n)}var Pe=function(){return"cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2}}();function Oe(t,e,n,i,o,r){var l=o-n,s=r-i;if(0!==l||0!==s){var a=((t-n)*l+(e-i)*s)/(l*l+s*s);a>1?(n=o,i=r):a>0&&(n+=l*a,i+=s*a)}return Le(t,e,n,i)}function Le(t,e,n,i){var o=n-t,r=i-e;return o*o+r*r}function Fe(t){return t*Math.PI/180}function De(t,e){var n=t%e;return n*e<0?n+e:n}function Ae(t,e,n){return t+n*(e-t)}function Be(t){return t}function ze(t,e){return void 0!==t?0:void 0}function Ne(t,e){return void 0!==t?t+e:void 0}function Ge(t,e){return t[0]+=e[0],t[1]+=e[1],t}function je(t,e){var n=Math.cos(e),i=Math.sin(e),o=t[1]*n+t[0]*i;return t[0]=t[0]*n-t[1]*i,t[1]=o,t}function qe(t,e){return t[0]*=e,t[1]*=e,t}function Ye(t){return Math.pow(t,3)}function Xe(t){return 1-Ye(1-t)}function Ke(t){return 3*t*t-2*t*t*t}function We(t){return t}function He(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,i=t.length;n<i;++n)sn(e,t[n]);return e}function Ue(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Ze(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Ve(t,e,n){var i,o;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(o=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*o}function Je(t,e){return $e(t,e[0],e[1])}function Qe(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function $e(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function tn(t,e){var n=e[0],i=e[1],o=0;return n<t[0]?o|=16:n>t[2]&&(o|=4),i<t[1]?o|=8:i>t[3]&&(o|=2),0===o&&(o=1),o}function en(){return[1/0,1/0,-1/0,-1/0]}function nn(t,e,n,i,o){return o?(o[0]=t,o[1]=e,o[2]=n,o[3]=i,o):[t,e,n,i]}function on(t){return nn(1/0,1/0,-1/0,-1/0,t)}function rn(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function ln(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function sn(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function an(t,e,n,i,o){for(;n<i;n+=o)un(t,e[n],e[n+1]);return t}function un(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function hn(t){var e=0;return Cn(t)||(e=bn(t)*_n(t)),e}function cn(t){return[t[0],t[1]]}function pn(t){return[t[2],t[1]]}function dn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function fn(t,e){var n;return"bottom-left"===e?n=cn(t):"bottom-right"===e?n=pn(t):"top-left"===e?n=vn(t):"top-right"===e?n=yn(t):Ie(!1,13),n}function gn(t,e,n,i,o){var r=e*i[0]/2,l=e*i[1]/2,s=Math.cos(n),a=Math.sin(n),u=r*s,h=r*a,c=l*s,p=l*a,d=t[0],f=t[1],g=d-u+p,_=d-u-p,m=d+u-p,v=d+u+p,y=f-h-c,b=f-h+c,x=f+h+c,C=f+h-c;return nn(Math.min(g,_,m,v),Math.min(y,b,x,C),Math.max(g,_,m,v),Math.max(y,b,x,C),o)}function _n(t){return t[3]-t[1]}function mn(t,e,n){var i=n||[1/0,1/0,-1/0,-1/0];return xn(t,e)?(i[0]=t[0]>e[0]?t[0]:e[0],i[1]=t[1]>e[1]?t[1]:e[1],i[2]=t[2]<e[2]?t[2]:e[2],i[3]=t[3]<e[3]?t[3]:e[3]):on(i),i}function vn(t){return[t[0],t[3]]}function yn(t){return[t[2],t[3]]}function bn(t){return t[2]-t[0]}function xn(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Cn(t){return t[2]<t[0]||t[3]<t[1]}function Sn(t,e,n,i,o,r){for(var l=r||[],s=0,a=e;a<n;a+=i){var u=t[a],h=t[a+1];l[s++]=o[0]*u+o[2]*h+o[4],l[s++]=o[1]*u+o[3]*h+o[5]}return r&&l.length!=s&&(l.length=s),l}function wn(t,e,n){var i=n||6371008.8,o=Fe(t[1]),r=Fe(e[1]),l=(r-o)/2,s=Fe(e[0]-t[0])/2,a=Math.sin(l)*Math.sin(l)+Math.sin(s)*Math.sin(s)*Math.cos(o)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var Tn={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},En={};En[Tn.DEGREES]=2*Math.PI*6370997/360,En[Tn.FEET]=.3048,En[Tn.METERS]=1,En[Tn.USFEET]=1200/3937;var In=Tn,Rn=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};Rn.prototype.canWrapX=function(){return this.canWrapX_},Rn.prototype.getCode=function(){return this.code_},Rn.prototype.getExtent=function(){return this.extent_},Rn.prototype.getUnits=function(){return this.units_},Rn.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||En[this.units_]},Rn.prototype.getWorldExtent=function(){return this.worldExtent_},Rn.prototype.getAxisOrientation=function(){return this.axisOrientation_},Rn.prototype.isGlobal=function(){return this.global_},Rn.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},Rn.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},Rn.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},Rn.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},Rn.prototype.setWorldExtent=function(t){this.worldExtent_=t},Rn.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},Rn.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var kn=Rn,Mn=6378137*Math.PI,Pn=[-Mn,-Mn,Mn,Mn],On=[-180,-85,180,85],Ln=function(t){function e(e){t.call(this,{code:e,units:In.METERS,extent:Pn,global:!0,worldExtent:On,getPointResolution:function(t,e){return t/Pe(e[1]/6378137)}})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(kn),Fn=[new Ln("EPSG:3857"),new Ln("EPSG:102100"),new Ln("EPSG:102113"),new Ln("EPSG:900913"),new Ln("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Ln("urn:ogc:def:crs:EPSG::3857"),new Ln("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Dn(t,e,n){var i=t.length,o=n>1?n:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(i));for(var l=Mn,s=0;s<i;s+=o){r[s]=l*t[s]/180;var a=6378137*Math.log(Math.tan(Math.PI*(t[s+1]+90)/360));a>l?a=l:a<-l&&(a=-l),r[s+1]=a}return r}function An(t,e,n){var i=t.length,o=n>1?n:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(i));for(var l=0;l<i;l+=o)r[l]=180*t[l]/Mn,r[l+1]=360*Math.atan(Math.exp(t[l+1]/6378137))/Math.PI-90;return r}var Bn=[-180,-90,180,90],zn=6378137*Math.PI/180,Nn=function(t){function e(e,n){t.call(this,{code:e,units:In.DEGREES,extent:Bn,axisOrientation:n,global:!0,metersPerUnit:zn,worldExtent:Bn})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(kn),Gn=[new Nn("CRS:84"),new Nn("EPSG:4326","neu"),new Nn("urn:ogc:def:crs:EPSG::4326","neu"),new Nn("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Nn("urn:ogc:def:crs:OGC:1.3:CRS84"),new Nn("urn:ogc:def:crs:OGC:2:84"),new Nn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Nn("urn:x-ogc:def:crs:EPSG:4326","neu")],jn={},qn={};function Yn(t,e,n){var i=t.getCode(),o=e.getCode();i in qn||(qn[i]={}),qn[i][o]=n}function Xn(t,e,n){var i;if(void 0!==e){for(var o=0,r=t.length;o<r;++o)e[o]=t[o];i=e}else i=t.slice();return i}function Kn(t,e,n){if(void 0!==e&&t!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];t=e}return t}function Wn(t){!function(t,e){jn[t]=e}(t.getCode(),t),Yn(t,t,Xn)}function Hn(t){return"string"==typeof t?jn[t]||null:t||null}function Un(t,e,n,i){var o,r=(t=Hn(t)).getPointResolutionFunc();if(r)o=r(e,n);else if(t.getUnits()==In.DEGREES&&!i||i==In.DEGREES)o=e;else{var l=$n(t,Hn("EPSG:4326")),s=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];o=(wn((s=l(s,s,2)).slice(0,2),s.slice(2,4))+wn(s.slice(4,6),s.slice(6,8)))/2;var a=i?En[i]:t.getMetersPerUnit();void 0!==a&&(o/=a)}return o}function Zn(t){!function(t){t.forEach(Wn)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Yn(e,t,Xn)}))}))}function Vn(t,e){return t?"string"==typeof t?Hn(t):t:Hn(e)}function Jn(t,e){return ei(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function Qn(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||$n(t,e)===Xn)&&n}function $n(t,e){var n,i,o,r=(n=t.getCode(),i=e.getCode(),n in qn&&i in qn[n]&&(o=qn[n][i]),o);return r||(r=Kn),r}function ti(t,e){return $n(Hn(t),Hn(e))}function ei(t,e,n){return ti(e,n)(t,void 0,t.length)}function ni(){var t,e,n;Zn(Fn),Zn(Gn),t=Fn,e=Dn,n=An,Gn.forEach((function(i){t.forEach((function(t){Yn(i,t,e),Yn(t,i,n)}))}))}ni();var ii=new Array(6);function oi(){return[1,0,0,1,0,0]}function ri(t){return si(t,1,0,0,1,0,0)}function li(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],l=t[4],s=t[5],a=e[0],u=e[1],h=e[2],c=e[3],p=e[4],d=e[5];return t[0]=n*a+o*u,t[1]=i*a+r*u,t[2]=n*h+o*c,t[3]=i*h+r*c,t[4]=n*p+o*d+l,t[5]=i*p+r*d+s,t}function si(t,e,n,i,o,r,l){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=l,t}function ai(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ui(t,e){var n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function hi(t,e,n){return li(t,si(ii,e,0,0,n,0,0))}function ci(t,e,n){return li(t,si(ii,1,0,0,1,e,n))}function pi(t,e,n,i,o,r,l,s){var a=Math.sin(r),u=Math.cos(r);return t[0]=i*u,t[1]=o*a,t[2]=-i*a,t[3]=o*u,t[4]=l*i*u-s*i*a+e,t[5]=l*o*a+s*o*u+n,t}var di=oi();function fi(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}var gi=function(t){function e(){t.call(this),this.layout="XY",this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=this.flatCoordinates.length,i=this.stride,an(on(t),e,0,n,i);var e,n,i},e.prototype.getCoordinates=function(){return H()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Q(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=n,n):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=fi(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){H()},e.prototype.setLayout=function(t,e,n){var i;if(t)i=fi(t);else{for(var o=0;o<n;++o){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(i=e.length)}this.layout=t,this.stride=i},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,o,r,l){for(var s=l||[],a=Math.cos(o),u=Math.sin(o),h=r[0],c=r[1],p=0,d=0;d<n;d+=i){var f=t[d]-h,g=t[d+1]-c;s[p++]=h+f*a-g*u,s[p++]=c+f*u+g*a;for(var _=d+2;_<d+i;++_)s[p++]=t[_]}l&&s.length!=p&&(s.length=p)}(n,0,n.length,i,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var i=e;void 0===i&&(i=t);var o=n;o||(o=dn(this.getExtent()));var r=this.getFlatCoordinates();if(r){var l=this.getStride();!function(t,e,n,i,o,r,l,s){for(var a=s||[],u=l[0],h=l[1],c=0,p=0;p<n;p+=i){var d=t[p+1]-h;a[c++]=u+o*(t[p]-u),a[c++]=h+r*d;for(var f=p+2;f<p+i;++f)a[c++]=t[f]}s&&a.length!=c&&(a.length=c)}(r,0,r.length,l,t,i,o,r),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,o,r,l){for(var s=l||[],a=0,u=0;u<n;u+=i){s[a++]=t[u]+o,s[a++]=t[u+1]+r;for(var h=u+2;h<u+i;++h)s[a++]=t[h]}l&&s.length!=a&&(s.length=a)}(n,0,n.length,i,t,e,n),this.changed()}},e}(function(t){function e(){t.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return H()},e.prototype.closestPointXY=function(t,e,n,i){return H()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return H()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){H()},e.prototype.scale=function(t,e,n){H()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return H()},e.prototype.getType=function(){return H()},e.prototype.applyTransform=function(t){H()},e.prototype.intersectsExtent=function(t){return H()},e.prototype.translate=function(t,e){H()},e.prototype.transform=function(t,e){var n=Hn(t),i=n.getUnits()==In.TILE_PIXELS?function(t,i,o){var r=n.getExtent(),l=n.getWorldExtent(),s=_n(l)/_n(r);return pi(di,l[0],l[3],s,-s,0,0,0),Sn(t,0,t.length,o,di,i),ti(n,e)(t,i,o)}:ti(n,e);return this.applyTransform(i),this},e}(Ct));function _i(t,e,n,i){for(var o=0,r=t[n-i],l=t[n-i+1];e<n;e+=i){var s=t[e],a=t[e+1];o+=l*s-r*a,r=s,l=a}return o/2}function mi(t,e,n,i,o,r,l){var s,a=t[e],u=t[e+1],h=t[n]-a,c=t[n+1]-u;if(0===h&&0===c)s=e;else{var p=((o-a)*h+(r-u)*c)/(h*h+c*c);if(p>1)s=n;else{if(p>0){for(var d=0;d<i;++d)l[d]=Ae(t[e+d],t[n+d],p);return void(l.length=i)}s=e}}for(var f=0;f<i;++f)l[f]=t[s+f];l.length=i}function vi(t,e,n,i,o){var r=t[e],l=t[e+1];for(e+=i;e<n;e+=i){var s=t[e],a=t[e+1],u=Le(r,l,s,a);u>o&&(o=u),r=s,l=a}return o}function yi(t,e,n,i,o,r,l,s,a,u,h){if(e==n)return u;var c,p;if(0===o){if((p=Le(l,s,t[e],t[e+1]))<u){for(c=0;c<i;++c)a[c]=t[e+c];return a.length=i,p}return u}for(var d=h||[NaN,NaN],f=e+i;f<n;)if(mi(t,f-i,f,i,l,s,d),(p=Le(l,s,d[0],d[1]))<u){for(u=p,c=0;c<i;++c)a[c]=d[c];a.length=i,f+=i}else f+=i*Math.max((Math.sqrt(p)-Math.sqrt(u))/o|0,1);if(r&&(mi(t,n-i,e,i,l,s,d),(p=Le(l,s,d[0],d[1]))<u)){for(u=p,c=0;c<i;++c)a[c]=d[c];a.length=i}return u}function bi(t,e,n,i){for(var o=0,r=n.length;o<r;++o)for(var l=n[o],s=0;s<i;++s)t[e++]=l[s];return e}function xi(t,e,n,i,o){for(var r=void 0!==o?o:[],l=0,s=e;s<n;s+=i)r[l++]=t.slice(s,s+i);return r.length=l,r}function Ci(t,e,n,i,o){for(var r=void 0!==o?o:[],l=0,s=0,a=n.length;s<a;++s){var u=n[s];r[l++]=xi(t,e,u,i,r[l]),e=u}return r.length=l,r}function Si(t,e,n,i,o){for(var r=void 0!==o?o:[],l=0,s=0,a=n.length;s<a;++s){var u=n[s];r[l++]=Ci(t,e,u,i,r[l]),e=u[u.length-1]}return r.length=l,r}function wi(t,e){return e*Math.round(t/e)}function Ti(t,e,n,i,o,r,l){if(e==n)return l;var s,a,u=wi(t[e],o),h=wi(t[e+1],o);e+=i,r[l++]=u,r[l++]=h;do{if(s=wi(t[e],o),a=wi(t[e+1],o),(e+=i)==n)return r[l++]=s,r[l++]=a,l}while(s==u&&a==h);for(;e<n;){var c=wi(t[e],o),p=wi(t[e+1],o);if(e+=i,c!=s||p!=a){var d=s-u,f=a-h,g=c-u,_=p-h;d*_==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&_<f||f==_||f>0&&_>f)?(s=c,a=p):(r[l++]=s,r[l++]=a,u=s,h=a,s=c,a=p)}}return r[l++]=s,r[l++]=a,l}var Ei=function(t){function e(e,n){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?this.setCoordinates(e,n):this.setFlatCoordinates(n,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){return i<Ve(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.getArea=function(){return _i(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return xi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=function(t,e,n,i,o,r,l){var s=(n-e)/i;if(s<3){for(;e<n;e+=i)r[l++]=t[e],r[l++]=t[e+1];return l}var a=new Array(s);a[0]=1,a[s-1]=1;for(var u=[e,n-i],h=0;u.length>0;){for(var c=u.pop(),p=u.pop(),d=0,f=t[p],g=t[p+1],_=t[c],m=t[c+1],v=p+i;v<c;v+=i){var y=Oe(t[v],t[v+1],f,g,_,m);y>d&&(h=v,d=y)}d>o&&(a[(h-e)/i]=1,p+i<h&&u.push(p,h),h+i<c&&u.push(h,c))}for(var b=0;b<s;++b)a[b]&&(r[l++]=t[e+b*i],r[l++]=t[e+b*i+1]);return l}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,"XY")},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bi(this.flatCoordinates,0,t,this.stride),this.changed()},e}(gi),Ii=function(t){function e(e,n){t.call(this),this.setCoordinates(e,n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){var o=this.flatCoordinates,r=Le(t,e,o[0],o[1]);if(r<i){for(var l=this.stride,s=0;s<l;++s)n[s]=o[s];return n.length=l,r}return i},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return nn(n=(e=this.flatCoordinates)[0],i=e[1],n,i,t);var e,n,i},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return $e(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,i){for(var o=0,r=n.length;o<r;++o)t[e++]=n[o];return e}(this.flatCoordinates,0,t),this.changed()},e}(gi);function Ri(t,e,n,i,o){return!function(t,e,n){var i;return(i=e.call(void 0,cn(t)))||(i=e.call(void 0,pn(t)))||(i=e.call(void 0,yn(t)))?i:(i=e.call(void 0,vn(t)))||!1}(o,(function(o){return!ki(t,e,n,i,o[0],o[1])}))}function ki(t,e,n,i,o,r){for(var l=0,s=t[n-i],a=t[n-i+1];e<n;e+=i){var u=t[e],h=t[e+1];a<=r?h>r&&(u-s)*(r-a)-(o-s)*(h-a)>0&&l++:h<=r&&(u-s)*(r-a)-(o-s)*(h-a)<0&&l--,s=u,a=h}return 0!==l}function Mi(t,e,n,i,o,r){if(0===n.length)return!1;if(!ki(t,e,n[0],i,o,r))return!1;for(var l=1,s=n.length;l<s;++l)if(ki(t,n[l-1],n[l],i,o,r))return!1;return!0}function Pi(t,e,n,i,o){var r=an([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!xn(o,r)&&(!!Qe(o,r)||r[0]>=o[0]&&r[2]<=o[2]||r[1]>=o[1]&&r[3]<=o[3]||function(t,e,n,i,o,r){for(var l,s=[t[e],t[e+1]],a=[];e+i<n;e+=i){if(a[0]=t[e+i],a[1]=t[e+i+1],l=o.call(void 0,s,a))return l;s[0]=a[0],s[1]=a[1]}return!1}(t,e,n,i,(function(t,e){return function(t,e,n){var i=!1,o=tn(t,e),r=tn(t,n);if(1===o||1===r)i=!0;else{var l,s,a=t[0],u=t[1],h=t[2],c=t[3],p=n[0],d=n[1],f=(d-e[1])/(p-e[0]);2&r&&!(2&o)&&(i=(l=p-(d-c)/f)>=a&&l<=h),i||!(4&r)||4&o||(i=(s=d-(p-h)*f)>=u&&s<=c),i||!(8&r)||8&o||(i=(l=p-(d-u)/f)>=a&&l<=h),i||!(16&r)||16&o||(i=(s=d-(p-a)*f)>=u&&s<=c)}return i}(o,t,e)})))}function Oi(t,e,n,i){for(;e<n-i;){for(var o=0;o<i;++o){var r=t[e+o];t[e+o]=t[n-i+o],t[n-i+o]=r}e+=i,n-=i}}function Li(t,e,n,i){for(var o=0,r=t[n-i],l=t[n-i+1];e<n;e+=i){var s=t[e],a=t[e+1];o+=(s-r)*(a+l),r=s,l=a}return o>0}function Fi(t,e,n,i,o){for(var r=void 0!==o&&o,l=0,s=n.length;l<s;++l){var a=n[l],u=Li(t,e,a,i);(0===l?r&&u||!r&&!u:r&&!u||!r&&u)&&Oi(t,e,a,i),e=a}return e}var Di=function(t){function e(e,n,i){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==n&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?me(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,n,i){return i<Ve(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,o){for(var r=0,l=n.length;r<l;++r){var s=n[r];o=vi(t,e,s,i,o),e=s}return o}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,o,r,l,s,a,u,h){for(var c=[NaN,NaN],p=0,d=n.length;p<d;++p){var f=n[p];u=yi(t,e,f,i,o,!0,l,s,a,u,c),e=f}return u}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,0,t,e,n,i))},e.prototype.containsXY=function(t,e){return Mi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,i){for(var o=0,r=0,l=n.length;r<l;++r){var s=n[r];o+=_i(t,e,s,i),e=s}return o}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Fi(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Ci(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=dn(this.getExtent());this.flatInteriorPoint_=function(t,e,n,i,o,r,l){for(var s,a,u,h,c,p,d,f=o[1],g=[],_=0,m=n.length;_<m;++_){var v=n[_];for(h=t[v-i],p=t[v-i+1],s=0;s<v;s+=i)c=t[s],d=t[s+1],(f<=p&&d<=f||p<=f&&f<=d)&&g.push(u=(f-p)/(d-p)*(c-h)+h),h=c,p=d}var y=NaN,b=-1/0;for(g.sort(fe),h=g[0],s=1,a=g.length;s<a;++s){c=g[s];var x=Math.abs(c-h);x>b&&Mi(t,0,n,i,u=(h+c)/2,f)&&(y=u,b=x),h=c}return isNaN(y)&&(y=o[0]),[y,f,b]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Ii(this.getFlatInteriorPoint(),"XYM")},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Ei(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[],o=0,r=0,l=n.length;r<l;++r){var s=n[r],a=new Ei(e.slice(o,s),t);i.push(a),o=s}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,i,o){for(var r=0,l=n.length;r<l;++r){var s=n[r],a=Li(t,e,s,i);if(0===r){if(!a)return!1}else if(a)return!1;e=s}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Fi(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=function(t,e,n,i,o,r,l,s){for(var a=0,u=n.length;a<u;++a){var h=n[a];l=Ti(t,e,h,i,o,r,l),s.push(l),e=h}return l}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,"XY",i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return function(t,e,n,i,o){if(!function(t,e,n,i,o){return!!(Pi(t,0,n,i,o)||ki(t,0,n,i,o[0],o[1])||ki(t,0,n,i,o[0],o[3])||ki(t,0,n,i,o[2],o[1])||ki(t,0,n,i,o[2],o[3]))}(t,0,n[0],i,o))return!1;if(1===n.length)return!0;for(var r=1,l=n.length;r<l;++r)if(Ri(t,n[r-1],n[r],i,o)&&!Pi(t,n[r-1],n[r],i,o))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,i,o){for(var r=o||[],l=0,s=0,a=n.length;s<a;++s){var u=bi(t,e,n[s],i);r[l++]=u,e=u}return r.length=l,r}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(gi),Ai=Di;function Bi(t){var e=t[0],n=t[1],i=t[2],o=t[3],r=[e,n,e,o,i,o,i,n,e,n];return new Di(r,"XY",[r.length])}function zi(t,e){setTimeout((function(){t(e)}),0)}function Ni(t){return!(t.sourceCenter&&t.targetCenter&&!function(t,e){for(var n=!0,i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}var Gi=function(t){function e(e){t.call(this);var n=J({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Vn(n.projection,"EPSG:3857"),this.applyOptions_(n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.applyOptions_=function(t){var e={};e.center=void 0!==t.center?t.center:null;var n=function(t){var e,n,i,o=void 0!==t.minZoom?t.minZoom:0,r=void 0!==t.maxZoom?t.maxZoom:28,l=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var s=t.resolutions;n=s[o],i=void 0!==s[r]?s[r]:s[s.length-1],e=function(t){return function(e,n,i){if(void 0!==e){var o=ge(t,e,i);o=Me(o+n,0,t.length-1);var r=Math.floor(o);return o!=r&&r<t.length-1?t[r]/Math.pow(t[r]/t[r+1],o-r):t[r]}}}(s)}else{var a=Vn(t.projection,"EPSG:3857"),u=a.getExtent(),h=(u?Math.max(bn(u),_n(u)):360*En[In.DEGREES]/a.getMetersPerUnit())/256/Math.pow(2,0),c=h/Math.pow(2,28);void 0!==(n=t.maxResolution)?o=0:n=h/Math.pow(l,o),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(l,r):h/Math.pow(l,r):c),r=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,r-o),e=function(t,e,n){return function(i,o,r){if(void 0!==i){var l=-r/2+.5,s=Math.floor(Math.log(e/i)/Math.log(t)+l),a=Math.max(s+o,0);return void 0!==n&&(a=Math.min(a,n)),e/Math.pow(t,a)}}}(l,n,r-o)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=n.minZoom;var i=function(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[Me(t[0],e[0],e[2]),Me(t[1],e[1],e[3])]:void 0}):Be;var e}(t),o=n.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(i=Fe(5),function(t,e){return void 0!==t?Math.abs(t+e)<=i?0:t+e:void 0}):!1===e?Ne:"number"==typeof e?(n=2*Math.PI/e,function(t,e){return void 0!==t?t=Math.floor((t+e)/n+.5)*n:void 0}):Ne}return ze;var n,i}(t);this.constraints_={center:i,resolution:o,rotation:r},void 0!==t.resolution?e.resolution=t.resolution:void 0!==t.zoom&&(e.resolution=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e.resolution=Me(Number(this.getResolution()||e.resolution),this.minResolution_,this.maxResolution_))),e.rotation=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=J({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),J({},e,t)},e.prototype.animate=function(t){var e,n=arguments,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var o=arguments[i-1];return o.center&&this.setCenter(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(e&&zi(e,!0))}for(var r=Date.now(),l=this.getCenter().slice(),s=this.getResolution(),a=this.getRotation(),u=[],h=0;h<i;++h){var c=n[h],p={start:r,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||Ke};if(c.center&&(p.sourceCenter=l,p.targetCenter=c.center,l=p.targetCenter),void 0!==c.zoom?(p.sourceResolution=s,p.targetResolution=this.constrainResolution(this.maxResolution_,c.zoom-this.minZoom_,0),s=p.targetResolution):c.resolution&&(p.sourceResolution=s,p.targetResolution=c.resolution,s=p.targetResolution),void 0!==c.rotation){p.sourceRotation=a;var d=De(c.rotation-a+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=a+d,a=p.targetRotation}p.callback=e,Ni(p)?p.complete=!0:r+=p.duration,u.push(p)}this.animations_.push(u),this.setHint(0,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){this.setHint(0,-this.hints_[0]);for(var t=0,e=this.animations_.length;t<e;++t){var n=this.animations_[t];n[0].callback&&zi(n[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var i=this.animations_[n],o=!0,r=0,l=i.length;r<l;++r){var s=i[r];if(!s.complete){var a=s.duration>0?(t-s.start)/s.duration:1;a>=1?(s.complete=!0,a=1):o=!1;var u=s.easing(a);if(s.sourceCenter){var h=s.sourceCenter[0],c=s.sourceCenter[1];this.set("center",[h+u*(s.targetCenter[0]-h),c+u*(s.targetCenter[1]-c)])}if(s.sourceResolution&&s.targetResolution){var p=1===u?s.targetResolution:s.sourceResolution+u*(s.targetResolution-s.sourceResolution);s.anchor&&this.set("center",this.calculateCenterZoom(p,s.anchor)),this.set("resolution",p)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var d=1===u?De(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+u*(s.targetRotation-s.sourceRotation);s.anchor&&this.set("center",this.calculateCenterRotate(d,s.anchor)),this.set("rotation",d)}if(e=!0,!s.complete)break}}if(o){this.animations_[n]=null,this.setHint(0,-1);var f=i[0].callback;f&&zi(f,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var n,i=this.getCenter();return void 0!==i&&(je(n=[i[0]-e[0],i[1]-e[1]],t-this.getRotation()),Ge(n,e)),n},e.prototype.calculateCenterZoom=function(t,e){var n,i=this.getCenter(),o=this.getResolution();return void 0!==i&&void 0!==o&&(n=[e[0]-t*(e[0]-i[0])/o,e[1]-t*(e[1]-i[1])/o]),n},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+Z(this)+'"]',n=document.querySelector(e);if(n){var i=getComputedStyle(n);t[0]=parseInt(i.width,10),t[1]=parseInt(i.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,n){return this.constraints_.resolution(t,e||0,n||0)},e.prototype.constrainRotation=function(t,e){return this.constraints_.rotation(t,e||0)},e.prototype.getCenter=function(){return this.get("center")},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),n=this.getCenter();Ie(n,1);var i=this.getResolution();Ie(void 0!==i,2);var o=this.getRotation();return Ie(void 0!==o,3),gn(n,i,o,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get("resolution")},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var n=e||this.getSizeFromViewport_(),i=bn(t)/n[0],o=_n(t)/n[1];return Math.max(i,o)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.maxResolution_,i=Math.log(n/this.minResolution_)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get("rotation")},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,n=this.maxResolution_,i=Math.log(n/this.minResolution_)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/i}},e.prototype.getState=function(t){var e=this.getCenter(),n=this.getProjection(),i=this.getResolution(),o=i/t,r=this.getRotation();return{center:[Math.round(e[0]/o)*o,Math.round(e[1]/o)*o],projection:void 0!==n?n:null,resolution:i,rotation:r,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,i=this.minZoom_||0;if(this.resolutions_){var o=ge(this.resolutions_,t,1);i=o,e=this.resolutions_[o],n=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var n,i=e||{},o=i.size;o||(o=this.getSizeFromViewport_()),Ie(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(Ie(!Cn(t),25),n=Bi(t)):"Circle"===t.getType()?(n=Bi(t=t.getExtent())).rotate(this.getRotation(),dn(t)):n=t;var r,l=void 0!==i.padding?i.padding:[0,0,0,0],s=void 0===i.constrainResolution||i.constrainResolution,a=void 0!==i.nearest&&i.nearest;r=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.constrainResolution(this.maxResolution_,i.maxZoom-this.minZoom_,0):0;for(var u=n.getFlatCoordinates(),h=this.getRotation(),c=Math.cos(-h),p=Math.sin(-h),d=1/0,f=1/0,g=-1/0,_=-1/0,m=n.getStride(),v=0,y=u.length;v<y;v+=m){var b=u[v]*c-u[v+1]*p,x=u[v]*p+u[v+1]*c;d=Math.min(d,b),f=Math.min(f,x),g=Math.max(g,b),_=Math.max(_,x)}var C=this.getResolutionForExtent([d,f,g,_],[o[0]-l[1]-l[3],o[1]-l[0]-l[2]]);if(C=isNaN(C)?r:Math.max(C,r),s){var S=this.constrainResolution(C,0,0);!a&&S<C&&(S=this.constrainResolution(S,-1,0)),C=S}var w=(d+g)/2,T=(f+_)/2,E=[(w+=(l[1]-l[3])/2*C)*c-(T+=(l[0]-l[2])/2*C)*(p=-p),T*c+w*p],I=i.callback?i.callback:dt;void 0!==i.duration?this.animate({resolution:C,center:E,duration:i.duration,easing:i.easing},I):(this.setResolution(C),this.setCenter(E),zi(I,!0))},e.prototype.centerOn=function(t,e,n){var i=this.getRotation(),o=Math.cos(-i),r=Math.sin(-i),l=t[0]*o-t[1]*r,s=t[1]*o+t[0]*r,a=this.getResolution();this.setCenter([(l+=(e[0]/2-n[0])*a)*o-(s+=(n[1]-e[1]/2)*a)*(r=-r),s*o+l*r])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var n=this.calculateCenterRotate(t,e);this.setCenter(n)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set("center",t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set("resolution",t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set("rotation",t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(Ct);function ji(t,e){var n=document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function qi(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function Yi(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var Xi=function(t){function e(e){t.call(this);var n=J({},e);n.opacity=void 0!==e.opacity?e.opacity:1,n.visible=void 0===e.visible||e.visible,n.zIndex=e.zIndex,n.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,n.minResolution=void 0!==e.minResolution?e.minResolution:0,this.setProperties(n),this.state_=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=Me(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return H()},e.prototype.getLayerStatesArray=function(t){return H()},e.prototype.getExtent=function(){return this.get("extent")},e.prototype.getMaxResolution=function(){return this.get("maxResolution")},e.prototype.getMinResolution=function(){return this.get("minResolution")},e.prototype.getOpacity=function(){return this.get("opacity")},e.prototype.getSourceState=function(){return H()},e.prototype.getVisible=function(){return this.get("visible")},e.prototype.getZIndex=function(){return this.get("zIndex")},e.prototype.setExtent=function(t){this.set("extent",t)},e.prototype.setMaxResolution=function(t){this.set("maxResolution",t)},e.prototype.setMinResolution=function(t){this.set("minResolution",t)},e.prototype.setOpacity=function(t){this.set("opacity",t)},e.prototype.setVisible=function(t){this.set("visible",t)},e.prototype.setZIndex=function(t){this.set("zIndex",t)},e}(Ct),Ki=function(t){function e(e){var n=e||{},i=J({},n);delete i.layers;var o=n.layers;t.call(this,i),this.layersListenerKeys_=[],this.listenerKeys_={},rt(this,xt("layers"),this.handleLayersChanged_,this),o?Array.isArray(o)?o=new wt(o.slice(),{unique:!0}):Ie("function"==typeof o.getArray,43):o=new wt(void 0,{unique:!0}),this.setLayers(o)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(at),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(rt(t,"add",this.handleLayersAdd_,this),rt(t,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(at);Q(this.listenerKeys_);for(var n=t.getArray(),i=0,o=n.length;i<o;i++){var r=n[i];this.listenerKeys_[Z(r)]=[rt(r,"propertychange",this.handleLayerChange_,this),rt(r,"change",this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Z(e)]=[rt(e,"propertychange",this.handleLayerChange_,this),rt(e,"change",this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=Z(t.element);this.listenerKeys_[e].forEach(at),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get("layers")},e.prototype.setLayers=function(t){this.set("layers",t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var i=this.getLayerState(),o=n,r=e.length;o<r;o++){var l=e[o];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),void 0!==i.extent&&(l.extent=void 0!==l.extent?mn(l.extent,i.extent):i.extent)}return e},e.prototype.getSourceState=function(){return"ready"},e}(Xi);function Wi(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}var Hi=function(t){function e(e){t.call(this);var n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i,o,r={},l=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Ki({layers:t.layers});return r.layergroup=l,r.target=t.target,r.view=void 0!==t.view?t.view:new Gi,void 0!==t.controls&&(Array.isArray(t.controls)?n=new wt(t.controls.slice()):(Ie("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new wt(t.interactions.slice()):(Ie("function"==typeof t.interactions.getArray,48),i=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new wt(t.overlays.slice()):(Ie("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new wt,{controls:n,interactions:i,keyboardEventTarget:e,overlays:o,values:r}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Ot,this.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}).bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(Ft?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var i=["click","dblclick","mousedown","touchstart","MSPointerDown",Bt.POINTERDOWN,"mousewheel","wheel"],o=0,r=i.length;o<r;++o)rt(this.overlayContainerStopEvent_,i[o],gt);for(var l in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Ee(this,e.moveTolerance),Bt)rt(this.mapBrowserEventHandler_,Bt[l],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=n.keyboardEventTarget,this.keyHandlerKeys_=null,rt(this.viewport_,"contextmenu",this.handleBrowserEvent,this),rt(this.viewport_,"wheel",this.handleBrowserEvent,this),rt(this.viewport_,"mousewheel",this.handleBrowserEvent,this),this.controls=n.controls||new wt,this.interactions=n.interactions||new wt,this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new ke(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},rt(this,xt("layergroup"),this.handleLayerGroupChanged_,this),rt(this,xt("view"),this.handleViewChanged_,this),rt(this,xt("size"),this.handleSizeChanged_,this),rt(this,xt("target"),this.handleTargetChanged_,this),this.setProperties(n.values),this.controls.forEach((function(t){t.setMap(this)}).bind(this)),rt(this.controls,"add",(function(t){t.element.setMap(this)}),this),rt(this.controls,"remove",(function(t){t.element.setMap(null)}),this),this.interactions.forEach((function(t){t.setMap(this)}).bind(this)),rt(this.interactions,"add",(function(t){t.element.setMap(this)}),this),rt(this.interactions,"remove",(function(t){t.element.setMap(null)}),this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),rt(this.overlays_,"add",(function(t){this.addOverlayInternal_(t.element)}),this),rt(this.overlays_,"remove",(function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}),this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),st(this.viewport_,"contextmenu",this.handleBrowserEvent,this),st(this.viewport_,"wheel",this.handleBrowserEvent,this),st(this.viewport_,"mousewheel",this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var i=this.getCoordinateFromPixel(t);return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,e,null,void 0!==n.layerFilter?n.layerFilter:ct,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=null;return this.forEachFeatureAtPixel(t,(function(t){n||(n=[]),n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var i=n||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==i.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,e,null,i.layerFilter||ct,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixel(t);return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,void 0!==e.layerFilter?e.layerFilter:ct,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get("target")},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?ui(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get("layergroup")},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?ui(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get("size")},e.prototype.getView=function(){return this.get("view")},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,n,i){var o=this.frameState_;if(!o||!(e in o.wantedTiles))return 1/0;if(!o.wantedTiles[e][t.getKey()])return 1/0;var r=n[0]-o.focus[0],l=n[1]-o.focus[1];return 65536*Math.log(i)+Math.sqrt(r*r+l*l)/i},e.prototype.handleBrowserEvent=function(t,e){var n=new Et(e||t.type,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.getActive()&&!i.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,i=n;if(t){var o=t.viewHints;o[0]&&(n=this.loadTilesWhileAnimating_?8:0,i=2),o[1]&&(n=this.loadTilesWhileInteracting_?8:0,i=2)}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}!t||!this.hasListener("rendercomplete")||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var n=0,i=e.length;n<i;++n){var o=e[n];if("function"==typeof o.getLayers)return t(o.getLayers().getArray());var r=o.getSource();if(r&&r.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent("rendercomplete",t);for(var r=this.postRenderFunctions_,l=0,s=r.length;l<s;++l)r[l](this,t);r.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)at(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[rt(i,"keydown",this.handleBrowserEvent,this),rt(i,"keypress",this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener("resize",this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Yi(this.viewport_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(at(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(at(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",Z(t)),this.viewPropertyListenerKey_=rt(t,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=rt(t,"change",this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(at),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[rt(t,"propertychange",this.render,this),rt(t,"change",this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n=this.getSize(),i=this.getView(),o=[1/0,1/0,-1/0,-1/0],r=this.frameState_,l=null;if(void 0!==n&&function(t){return t[0]>0&&t[1]>0}(n)&&i&&i.isDef()){for(var s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=this.getLayerGroup().getLayerStatesArray(),u={},h=0,c=a.length;h<c;++h)u[Z(a[h].layer)]=a[h];e=i.getState(this.pixelRatio_),l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:u,layerStatesArray:a,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:s,wantedTiles:{}}}l&&(l.extent=gn(e.center,e.resolution,e.rotation,l.size,o)),this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),r&&(!this.previousExtent_||!Cn(this.previousExtent_)&&!rn(l.extent,this.previousExtent_))&&(this.dispatchEvent(new Tt("movestart",this,r)),this.previousExtent_=on(this.previousExtent_)),this.previousExtent_&&!l.viewHints[0]&&!l.viewHints[1]&&!rn(l.extent,this.previousExtent_)&&(this.dispatchEvent(new Tt("moveend",this,l)),Ze(l.extent,this.previousExtent_))),this.dispatchEvent(new Tt("postrender",this,l)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set("layergroup",t)},e.prototype.setSize=function(t){this.set("size",t)},e.prototype.setTarget=function(t){this.set("target",t)},e.prototype.setView=function(t){this.set("view",t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[Z(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[Z(t)],this.render()},e}(Ct),Ui=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:dt,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.disposeInternal=function(){Yi(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Yi(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)at(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==dt&&this.listenerKeys.push(rt(t,"postrender",this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(Ct),Zi=function(){var t,e={};return function(n){if(t||(t=document.createElement("div").style),!(n in e)){t.font=n;var i=t.fontFamily;if(t.font="",!i)return null;e[n]=i.split(/,\s?/)}return e[n]}}();function Vi(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}var Ji=function(t){function e(e){var n=J({},e);delete n.source,t.call(this,n),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),rt(this,xt("source"),this.handleSourcePropertyChange_,this),this.setSource(e.source?e.source:null)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get("source")||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(at(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=rt(t,"change",this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(at(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(at(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=rt(t,"precompose",(function(t){var e=t,n=this.getLayerState();n.managed=!1,void 0===this.getZIndex()&&(n.zIndex=1/0),e.frameState.layerStatesArray.push(n),e.frameState.layerStates[Z(this)]=n}),this),this.mapRenderKey_=rt(this,"change",t.render,t),this.changed())},e.prototype.setSource=function(t){this.set("source",t)},e}(Xi);function Qi(t){this.updateElement_(t.frameState)}var $i=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||Qi,target:n.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===n.collapsed||n.collapsed,this.overrideCollapsible_=void 0!==n.collapsible,this.collapsible_=void 0===n.collapsible||n.collapsible,this.collapsible_||(this.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-attribution",o=void 0!==n.tipLabel?n.tipLabel:"Attributions",r=void 0!==n.collapseLabel?n.collapseLabel:"\xbb";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;var l=void 0!==n.label?n.label:"i";"string"==typeof l?(this.label_=document.createElement("span"),this.label_.textContent=l):this.label_=l;var s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=o,a.appendChild(s),rt(a,"click",this.handleClick_,this);var u=this.element;u.className=i+" ol-unselectable ol-control"+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),u.appendChild(this.ulElement_),u.appendChild(a),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],i=t.layerStatesArray,o=t.viewState.resolution,r=0,l=i.length;r<l;++r){var s=i[r];if(Vi(s,o)){var a=s.layer.getSource();if(a){var u=a.getAttributions();if(u){var h=u(t);if(h)if(this.overrideCollapsible_||!1!==a.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(h))for(var c=0,p=h.length;c<p;++c)h[c]in e||(n.push(h[c]),e[h[c]]=!0);else h in e||(n.push(h),e[h]=!0)}}}}return n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!ve(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var i=0,o=e.length;i<o;++i){var r=document.createElement("li");r.innerHTML=e[i],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?qi(this.collapseLabel_,this.label_):qi(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(Ui);function to(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var i="rotate("+n+"rad)";if(this.autoHide_){var o=this.element.classList.contains("ol-hidden");o||0!==n?o&&0!==n&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.label_.style.msTransform=i,this.label_.style.webkitTransform=i,this.label_.style.transform=i}this.rotation_=n}}var eo=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||to,target:n.target});var i=void 0!==n.className?n.className:"ol-rotate",o=void 0!==n.label?n.label:"\u21e7";this.label_=null,"string"==typeof o?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=o):(this.label_=o,this.label_.classList.add("ol-compass"));var r=n.tipLabel?n.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=r,l.appendChild(this.label_),rt(l,"click",this.handleClick_,this);var s=this.element;s.className=i+" ol-unselectable ol-control",s.appendChild(l),this.callResetNorth_=n.resetNorth?n.resetNorth:void 0,this.duration_=void 0!==n.duration?n.duration:250,this.autoHide_=void 0===n.autoHide||n.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add("ol-hidden")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:Xe}):t.setRotation(0))},e}(Ui),no=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),target:n.target});var i=void 0!==n.className?n.className:"ol-zoom",o=void 0!==n.delta?n.delta:1,r=void 0!==n.zoomInLabel?n.zoomInLabel:"+",l=void 0!==n.zoomOutLabel?n.zoomOutLabel:"\u2212",s=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",a=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=i+"-in",u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof r?document.createTextNode(r):r),rt(u,"click",this.handleClick_.bind(this,o));var h=document.createElement("button");h.className=i+"-out",h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof l?document.createTextNode(l):l),rt(h,"click",this.handleClick_.bind(this,-o));var c=this.element;c.className=i+" ol-unselectable ol-control",c.appendChild(u),c.appendChild(h),this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getResolution();if(n){var i=e.constrainResolution(n,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:i,duration:this.duration_,easing:Xe})):e.setResolution(i)}}},e}(Ui),io=function(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0};io.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},io.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},io.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;var o=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/i,this.initialVelocity_>this.minVelocity_},io.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},io.prototype.getAngle=function(){return this.angle_};var oo=io;function ro(t,e,n,i){e=t.constrainRotation(e,0),lo(t,e,n,i)}function lo(t,e,n,i){if(void 0!==e){var o=t.getRotation(),r=t.getCenter();void 0!==o&&r&&i>0?t.animate({rotation:e,anchor:n,duration:i,easing:Xe}):t.rotate(e,n)}}function so(t,e,n,i){var o=t.getResolution(),r=t.constrainResolution(o,e,0);if(void 0!==r){var l=t.getResolutions();r=Me(r,t.getMinResolution()||l[l.length-1],t.getMaxResolution()||l[0])}if(n&&void 0!==r&&r!==o){var s=t.getCenter(),a=t.calculateCenterZoom(r,n);a=t.constrainCenter(a),n=[(r*s[0]-o*a[0])/(r-o),(r*s[1]-o*a[1])/(r-o)]}ao(t,r,n,i)}function ao(t,e,n,i){if(e){var o=t.getResolution(),r=t.getCenter();if(void 0!==o&&r&&e!==o&&i)t.animate({resolution:e,anchor:n,duration:i,easing:Xe});else{if(n){var l=t.calculateCenterZoom(e,n);t.setCenter(l)}t.setResolution(e)}}}var uo=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getActive=function(){return this.get("active")},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set("active",t)},e.prototype.setMap=function(t){this.map_=t},e}(Ct);function ho(t){var e=!1;if(t.type==Bt.DBLCLICK){var n=t.coordinate,i=t.originalEvent.shiftKey?-this.delta_:this.delta_;so(t.map.getView(),i,n,this.duration_),t.preventDefault(),e=!0}return!e}var co=function(t){function e(e){t.call(this,{handleEvent:ho});var n=e||{};this.delta_=n.delta?n.delta:1,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(uo),po=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},fo=function(t){return t.target.getTargetElement()===document.activeElement},go=ct,_o=function(t){var e=t.originalEvent;return 0==e.button&&!(Mt&&Pt&&e.ctrlKey)},mo=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},vo=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},yo=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},bo=function(t){var e=t.pointerEvent;return Ie(void 0!==e,56),"mouse"==e.pointerType};function xo(t){for(var e=t.length,n=0,i=0,o=0;o<e;o++)n+=t[o].clientX,i+=t[o].clientY;return[n/e,i/e]}var Co=function(t){function e(e){var n=e||{};t.call(this,n),n.handleDownEvent&&(this.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(this.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(this.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(this.handleUpEvent=n.handleUpEvent),n.stopDown&&(this.stopDown=n.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Bt.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Bt.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Bt.POINTERDOWN){var i=this.handleDownEvent(t);i&&t.preventDefault(),this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Bt.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Bt.POINTERDOWN||e===Bt.POINTERDRAG||e===Bt.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==Bt.POINTERUP?delete this.trackedPointers_[n]:(t.type==Bt.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=$(this.trackedPointers_)}},e}(uo),So=function(t){function e(e){t.call(this,{stopDown:pt});var n=e||{};this.kinetic_=n.kinetic,this.lastCentroid=null,this.panning_=!1,this.condition_=n.condition?n.condition:mo,this.noKinetic_=!1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(1,1));var e=this.targetPointers,n=xo(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var i=this.lastCentroid[0]-n[0],o=n[1]-this.lastCentroid[1],r=t.map.getView(),l=[i,o];qe(l,r.getResolution()),je(l,r.getRotation()),Ge(l,r.getCenter()),l=r.constrainCenter(l),r.setCenter(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),r=n.getCenter(),l=e.getPixelFromCoordinate(r),s=e.getCoordinateFromPixel([l[0]-i*Math.cos(o),l[1]-i*Math.sin(o)]);n.animate({center:n.constrainCenter(s),duration:500,easing:Xe})}return this.panning_&&(this.panning_=!1,n.setHint(1,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Co),wo=function(t){function e(e){var n=e||{};t.call(this,{stopDown:pt}),this.condition_=n.condition?n.condition:po,this.lastAngle_=void 0,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.handleDragEvent=function(t){if(bo(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==ze){var i=e.getSize(),o=t.pixel,r=Math.atan2(i[1]/2-o[1],o[0]-i[0]/2);if(void 0!==this.lastAngle_){var l=r-this.lastAngle_,s=n.getRotation();lo(n,s-l)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){if(!bo(t))return!0;var e=t.map.getView();e.setHint(1,-1);var n=e.getRotation();return ro(e,n,void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!(!bo(t)||!_o(t)||!this.condition_(t)||(t.map.getView().setHint(1,1),this.lastAngle_=void 0,0))},e}(Co),To=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Ai([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(ht),Eo=function(t){function e(e,n,i){t.call(this,e),this.coordinate=n,this.mapBrowserEvent=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_t);function Io(){var t,e=this.getMap(),n=e.getView(),i=e.getSize(),o=this.getGeometry().getExtent();if(this.out_){var r=n.calculateExtent(i),l=(t=[e.getPixelFromCoordinate(cn(o)),e.getPixelFromCoordinate(yn(o))],function(t,e){for(var n=0,i=e.length;n<i;++n)sn(t,e[n]);return t}(on(void 0),t));!function(t,e){var n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}(r,1/n.getResolutionForExtent(l,i)),o=r}var s=n.constrainResolution(n.getResolutionForExtent(o,i)),a=dn(o);a=n.constrainCenter(a),n.animate({resolution:s,center:a,duration:this.duration_,easing:Xe})}var Ro=function(t){function e(e){var n=e||{};t.call(this,{condition:n.condition?n.condition:vo,className:n.className||"ol-dragzoom",onBoxEnd:Io}),this.duration_=void 0!==n.duration?n.duration:200,this.out_=void 0!==n.out&&n.out}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(function(t){function e(e){t.call(this);var n=e||{};this.box_=new To(n.className||"ol-dragbox"),this.minArea_=void 0!==n.minArea?n.minArea:64,this.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:dt,this.startPixel_=null,this.condition_=n.condition?n.condition:go,this.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,n){var i=n[0]-e[0],o=n[1]-e[1];return i*i+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){bo(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Eo("boxdrag",t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!bo(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Eo("boxend",t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!(!bo(t)||!_o(t)||!this.condition_(t)||(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Eo("boxstart",t.coordinate,t)),0))},e}(Co));function ko(t){var e=!1;if("keydown"==t.type){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(40==n||37==n||39==n||38==n)){var i=t.map.getView(),o=i.getResolution()*this.pixelDelta_,r=0,l=0;40==n?l=-o:37==n?r=-o:39==n?r=o:l=o;var s=[r,l];je(s,i.getRotation()),function(t,e,n){var i=t.getCenter();if(i){var o=t.constrainCenter([i[0]+e[0],i[1]+e[1]]);n?t.animate({duration:n,easing:We,center:o}):t.setCenter(o)}}(i,s,this.duration_),t.preventDefault(),e=!0}}return!e}var Mo=function(t){function e(e){t.call(this,{handleEvent:ko});var n=e||{};this.defaultCondition_=function(t){return mo(t)&&yo(t)},this.condition_=void 0!==n.condition?n.condition:this.defaultCondition_,this.duration_=void 0!==n.duration?n.duration:100,this.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(uo);function Po(t){var e=!1;if("keydown"==t.type||"keypress"==t.type){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var i=t.map,o=n=="+".charCodeAt(0)?this.delta_:-this.delta_;so(i.getView(),o,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var Oo=function(t){function e(e){t.call(this,{handleEvent:Po});var n=e||{};this.condition_=n.condition?n.condition:yo,this.delta_=n.delta?n.delta:1,this.duration_=void 0!==n.duration?n.duration:100}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(uo),Lo=function(t){function e(e){var n=e||{};t.call(this,n),this.delta_=0,this.duration_=void 0!==n.duration?n.duration:250,this.timeout_=void 0!==n.timeout?n.timeout:80,this.useAnchor_=void 0===n.useAnchor||n.useAnchor,this.constrainResolution_=n.constrainResolution||!1,this.condition_=n.condition?n.condition:go,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(1,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if("wheel"!==e&&"mousewheel"!==e)return!0;t.preventDefault();var n,i=t.map,o=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),"wheel"==t.type?(n=o.deltaY,Rt&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Ot),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)):"mousewheel"==t.type&&(n=-o.wheelDeltaY,kt&&(n/=3)),0===n)return!1;var r=Date.now();if(void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel"),"trackpad"===this.mode_){var l=i.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):l.setHint(1,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var s=l.getResolution()*Math.pow(2,n/this.trackpadDeltaPerZoom_),a=l.getMinResolution(),u=l.getMaxResolution(),h=0;if(s<a?(s=Math.max(s,a/this.trackpadZoomBuffer_),h=1):s>u&&(s=Math.min(s,u*this.trackpadZoomBuffer_),h=-1),this.lastAnchor_){var c=l.calculateCenterZoom(s,this.lastAnchor_);l.setCenter(l.constrainCenter(c))}return l.setResolution(s),0===h&&this.constrainResolution_&&l.animate({resolution:l.constrainResolution(s,n>0?-1:1),easing:Xe,anchor:this.lastAnchor_,duration:this.duration_}),h>0?l.animate({resolution:a,easing:Xe,anchor:this.lastAnchor_,duration:500}):h<0&&l.animate({resolution:u,easing:Xe,anchor:this.lastAnchor_,duration:500}),this.startTime_=r,!1}this.delta_+=n;var p=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),p),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations(),so(e,-Me(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(uo),Fo=function(t){function e(e){var n=e||{},i=n;i.stopDown||(i.stopDown=pt),t.call(this,i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==n.threshold?n.threshold:.3,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],i=this.targetPointers[1],o=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){var r=o-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=o;var l=t.map,s=l.getView();if(s.getConstraints().rotation!==ze){var a=l.getViewport().getBoundingClientRect(),u=xo(this.targetPointers);if(u[0]-=a.left,u[1]-=a.top,this.anchor_=l.getCoordinateFromPixel(u),this.rotating_){var h=s.getRotation();l.render(),lo(s,h+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(1,-1),this.rotating_){var n=e.getRotation();ro(e,n,this.anchor_,this.duration_)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(1,1),!0}return!1},e}(Co),Do=function(t){function e(e){var n=e||{},i=n;i.stopDown||(i.stopDown=pt),t.call(this,i),this.constrainResolution_=n.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==n.duration?n.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],i=this.targetPointers[1],o=n.clientX-i.clientX,r=n.clientY-i.clientY,l=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/l),this.lastDistance_=l;var s=t.map,a=s.getView(),u=a.getResolution(),h=a.getMaxResolution(),c=a.getMinResolution(),p=u*e;p>h?(e=h/u,p=h):p<c&&(e=c/u,p=c),1!=e&&(this.lastScaleDelta_=e);var d=s.getViewport().getBoundingClientRect(),f=xo(this.targetPointers);f[0]-=d.left,f[1]-=d.top,this.anchor_=s.getCoordinateFromPixel(f),s.render(),ao(a,p,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(1,-1);var n=e.getResolution();return(this.constrainResolution_||n<e.getMinResolution()||n>e.getMaxResolution())&&function(t,e,n,i,o){e=t.constrainResolution(e,0,o),ao(t,e,n,i)}(e,n,this.anchor_,this.duration_,this.lastScaleDelta_-1),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(1,1),!0}return!1},e}(Co),Ao=function(t){function e(e,n,i,o,r){t.call(this,e,n,i,void 0!==r?0:2),this.loader_=void 0!==r?r:null,this.canvas_=o,this.error_=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=3):this.state=2,this.changed()},e.prototype.load=function(){0==this.state&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(function(t){function e(e,n,i,o){t.call(this),this.extent=e,this.pixelRatio_=i,this.resolution=n,this.state=o}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.changed=function(){this.dispatchEvent("change")},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return H()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){H()},e}(mt)),Bo=function(t){function e(e,n,i,o,r){t.call(this,e),this.vectorContext=n,this.frameState=i,this.context=o,this.glContext=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_t),zo=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent("clear")},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var n=this.oldest_;n;)t.call(e,n.value_,n.key_,this),n=n.newer},e.prototype.get=function(t){var e=this.entries_[t];return Ie(void 0!==e,15),e===this.newest_||(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e),e.value_},e.prototype.remove=function(t){var e=this.entries_[t];return Ie(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){Ie(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(mt),No=[0,0,0,1],Go=[],jo=[0,0,0,1],qo=[0,0,0,0],Yo=new zo,Xo={},Ko=null,Wo={},Ho=function(){var t,e,n=Xo,i=["monospace","serif"],o=i.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";function l(t){for(var n=Uo(),l=100;l<=700;l+=300){for(var s=l+" ",a=!0,u=0;u<o;++u){var h=i[u];if(n.font=s+"32px "+h,e=n.measureText(r).width,t!=h){n.font=s+"32px "+t+","+h;var c=n.measureText(r).width;a=a&&c!=e}}if(a)return!0}return!1}function s(){var e=!0;for(var i in n)n[i]<60&&(l(i)?(n[i]=60,Q(Wo),Ko=null,Yo.clear()):(++n[i],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var i=Zi(e);if(i)for(var o=0,r=i.length;o<r;++o){var a=i[o];a in n||(n[a]=60,l(a)||(n[a]=0,void 0===t&&(t=setInterval(s,32))))}}}();function Uo(){return Ko||(Ko=ji(1,1)),Ko}var Zo=function(){var t,e=Wo;return function(n){var i=e[n];return null==i&&(t||((t=document.createElement("span")).textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=n,document.body.appendChild(t),i=e[n]=t.offsetHeight,document.body.removeChild(t)),i}}();function Vo(t,e){var n=Uo();return t!=n.font&&(n.font=t),n.measureText(e).width}function Jo(t,e,n,i){0!==e&&(t.translate(n,i),t.rotate(e),t.translate(-n,-i))}var Qo=oi();function $o(t,e,n,i,o,r,l,s,a,u,h){var c;1!=n&&(t.globalAlpha=(c=t.globalAlpha)*n),e&&t.setTransform.apply(t,e),t.drawImage(i,o,r,l,s,a,u,l*h,s*h),c&&(t.globalAlpha=c),e&&t.setTransform.apply(t,Qo)}var tr=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,er=/^([a-z]*)$/i;function nr(t){return"string"==typeof t?t:rr(t)}var ir=function(){var t={},e=0;return function(n){var i;if(t.hasOwnProperty(n))i=t[n];else{if(e>=1024){var o=0;for(var r in t)0==(3&o++)&&(delete t[r],--e)}i=function(t){var e,n,i,o,r;if(er.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}(t)),tr.exec(t)){var l,s=t.length-1;l=s<=4?1:2;var a=4===s||8===s;e=parseInt(t.substr(1+0*l,l),16),n=parseInt(t.substr(1+1*l,l),16),i=parseInt(t.substr(1+2*l,l),16),o=a?parseInt(t.substr(1+3*l,l),16):255,1==l&&(e=(e<<4)+e,n=(n<<4)+n,i=(i<<4)+i,a&&(o=(o<<4)+o)),r=[e,n,i,o/255]}else 0==t.indexOf("rgba(")?or(r=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((r=t.slice(4,-1).split(",").map(Number)).push(1),or(r)):Ie(!1,14);return r}(n),t[n]=i,++e}return i}}();function or(t){return t[0]=Me(t[0]+.5|0,0,255),t[1]=Me(t[1]+.5|0,0,255),t[2]=Me(t[2]+.5|0,0,255),t[3]=Me(t[3],0,1),t}function rr(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:t[3])+")"}function lr(t){return Array.isArray(t)?rr(t):t}var sr=function(){};sr.prototype.drawCustom=function(t,e,n){},sr.prototype.drawGeometry=function(t){},sr.prototype.setStyle=function(t){},sr.prototype.drawCircle=function(t,e){},sr.prototype.drawFeature=function(t,e){},sr.prototype.drawGeometryCollection=function(t,e){},sr.prototype.drawLineString=function(t,e){},sr.prototype.drawMultiLineString=function(t,e){},sr.prototype.drawMultiPoint=function(t,e){},sr.prototype.drawMultiPolygon=function(t,e){},sr.prototype.drawPoint=function(t,e){},sr.prototype.drawPolygon=function(t,e){},sr.prototype.drawText=function(t,e){},sr.prototype.setFillStrokeStyle=function(t,e){},sr.prototype.setImageStyle=function(t,e){},sr.prototype.setTextStyle=function(t,e){};var ar=sr,ur=function(t){function e(e,n,i,o,r){t.call(this),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=o,this.viewRotation_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.drawImages_=function(t,e,n,i){if(this.image_){var o=Sn(t,e,n,2,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,s=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=s*this.imageOpacity_);var a=this.imageRotation_;this.imageRotateWithView_&&(a+=this.viewRotation_);for(var u=0,h=o.length;u<h;u+=2){var c=o[u]-this.imageAnchorX_,p=o[u+1]-this.imageAnchorY_;if(0!==a||1!=this.imageScale_){var d=c+this.imageAnchorX_,f=p+this.imageAnchorY_;pi(l,d,f,this.imageScale_,this.imageScale_,a,-d,-f),r.setTransform.apply(r,l)}r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,p,this.imageWidth_,this.imageHeight_)}0===a&&1==this.imageScale_||r.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(r.globalAlpha=s)}},e.prototype.drawText_=function(t,e,n,i){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=Sn(t,e,n,i,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);e<n;e+=i){var s=o[e]+this.textOffsetX_,a=o[e+1]+this.textOffsetY_;if(0!==l||1!=this.textScale_){var u=pi(this.tmpLocalTransform_,s,a,this.textScale_,this.textScale_,l,-s,-a);r.setTransform.apply(r,u)}this.textStrokeState_&&r.strokeText(this.text_,s,a),this.textFillState_&&r.fillText(this.text_,s,a)}0===l&&1==this.textScale_||r.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,n,i,o){var r=this.context_,l=Sn(t,e,n,i,this.transform_,this.pixelCoordinates_);r.moveTo(l[0],l[1]);var s=l.length;o&&(s-=2);for(var a=2;a<s;a+=2)r.lineTo(l[a],l[a+1]);return o&&r.closePath(),n},e.prototype.drawRings_=function(t,e,n,i){for(var o=0,r=n.length;o<r;++o)e=this.moveToLineTo_(t,e,n[o],i,!0);return e},e.prototype.drawCircle=function(t){if(xn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,n){var i=t.getFlatCoordinates();if(i){var o=t.getStride();return Sn(i,0,i.length,o,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],o=Math.sqrt(n*n+i*i),r=this.context_;r.beginPath(),r.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&xn(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(xn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(xn(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates(),o=0,r=t.getEnds(),l=t.getStride();n.beginPath();for(var s=0,a=r.length;s<a;++s)o=this.moveToLineTo_(i,o,r[s],l,!1);n.stroke()}if(""!==this.text_){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}}},e.prototype.drawPolygon=function(t){if(xn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(xn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),i=0,o=t.getEndss(),r=t.getStride();e.beginPath();for(var l=0,s=o.length;l<s;++l)i=this.drawRings_(n,i,o[l],r);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var a=t.getFlatInteriorPoints();this.drawText_(a,0,a.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=e.lineCap=t.lineCap),Lt&&(ve(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,Lt&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:"center";n?(n.font!=t.font&&(n.font=e.font=t.font),n.textAlign!=i&&(n.textAlign=e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var n=t.getColor();this.fillState_={fillStyle:lr(n||No)}}else this.fillState_=null;if(e){var i=e.getColor(),o=e.getLineCap(),r=e.getLineDash(),l=e.getLineDashOffset(),s=e.getLineJoin(),a=e.getWidth(),u=e.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:"round",lineDash:r||Go,lineDashOffset:l||0,lineJoin:void 0!==s?s:"round",lineWidth:this.pixelRatio_*(void 0!==a?a:1),miterLimit:void 0!==u?u:10,strokeStyle:lr(i||jo)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),n=t.getImage(1),i=t.getOrigin(),o=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=o[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=o[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:lr(n||No)}}else this.textFillState_=null;var i=t.getStroke();if(i){var o=i.getColor(),r=i.getLineCap(),l=i.getLineDash(),s=i.getLineDashOffset(),a=i.getLineJoin(),u=i.getWidth(),h=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==r?r:"round",lineDash:l||Go,lineDashOffset:s||0,lineJoin:void 0!==a?a:"round",lineWidth:void 0!==u?u:1,miterLimit:void 0!==h?h:10,strokeStyle:lr(o||jo)}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),g=t.getRotation(),_=t.getScale(),m=t.getText(),v=t.getTextAlign(),y=t.getTextBaseline();this.textState_={font:void 0!==c?c:"10px sans-serif",textAlign:void 0!==v?v:"center",textBaseline:void 0!==y?y:"middle"},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==_?_:1)}else this.text_=""},e}(ar),hr=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function cr(t,e,n){return e+":"+t+":"+(n?nr(n):"null")}hr.prototype.clear=function(){this.cache_={},this.cacheSize_=0},hr.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_)0!=(3&t++)||this.cache_[e].hasListener()||(delete this.cache_[e],--this.cacheSize_)}},hr.prototype.get=function(t,e,n){var i=cr(t,e,n);return i in this.cache_?this.cache_[i]:null},hr.prototype.set=function(t,e,n,i){var o=cr(t,e,n);this.cache_[o]=i,++this.cacheSize_},hr.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var pr=new hr;function dr(t,e){pr.expire()}function fr(t,e){return t.zIndex-e.zIndex}var gr=[],_r=function(t){function e(e){t.call(this,e);var n=e.getViewport();this.context_=ji(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className="ol-unselectable",n.insertBefore(this.canvas_,n.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap(),i=this.context_;if(n.hasListener(t)){var o=e.extent,r=e.pixelRatio,l=e.viewState.rotation,s=this.getTransform(e),a=new ur(i,r,o,s,l),u=new Bo(t,a,e,i,null);n.dispatchEvent(u)}},e.prototype.getTransform=function(t){var e=t.viewState,n=t.pixelRatio/e.resolution;return pi(this.transform_,this.canvas_.width/2,this.canvas_.height/2,n,-n,-e.rotation,-e.center[0],-e.center[1])},e.prototype.renderFrame=function(t){if(t){var e=this.context_,n=t.pixelRatio,i=Math.round(t.size[0]*n),o=Math.round(t.size[1]*n);this.canvas_.width!=i||this.canvas_.height!=o?(this.canvas_.width=i,this.canvas_.height=o):e.clearRect(0,0,i,o);var r=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent("precompose",t);var l=t.layerStatesArray;!function(t,e){var n,i=t.length,o=Array(t.length);for(n=0;n<i;n++)o[n]={index:n,value:t[n]};for(o.sort((function(t,n){return e(t.value,n.value)||t.index-n.index})),n=0;n<t.length;n++)t[n]=o[n].value}(l,fr),r&&(e.save(),Jo(e,r,i/2,o/2));var s,a,u=t.viewState.resolution;for(s=0,a=l.length;s<a;++s){var h=l[s],c=this.getLayerRenderer(h.layer);Vi(h,u)&&"ready"==h.sourceState&&c.prepareFrame(t,h)&&c.composeFrame(t,h,e)}r&&e.restore(),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,i,o,r,l){var s,a,u=e.viewState.resolution,h=e.layerStatesArray,c=h.length,p=ui(e.pixelToCoordinateTransform,t.slice());for(a=c-1;a>=0;--a){var d=h[a],f=d.layer;if(Vi(d,u)&&r.call(l,f)&&(s=this.getLayerRenderer(f).forEachLayerAtCoordinate(p,e,n,i,o)))return s}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var n=0,i=e.length;n<i;++n){var o=e[n];gr.indexOf(o)>=0||gr.push(o)}},e}(function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.dispatchRenderEvent=function(t,e){H()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;pi(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),function(t){var e,n=(e=t)[0]*e[3]-e[1]*e[2];Ie(0!==n,32);var i=t[0],o=t[1],r=t[2],l=t[3],s=t[4],a=t[5];t[0]=l/n,t[1]=-o/n,t[2]=-r/n,t[3]=i/n,t[4]=(r*a-l*s)/n,t[5]=-(i*a-o*s)/n}(ai(i,n))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,l){var s,a=e.viewState,u=a.resolution;function h(t,n){var r=e.layerStates[Z(n)].managed;if(!(Z(t)in e.skippedFeatureUids)||r)return i.call(o,t,r?n:null)}var c=a.projection,p=t;if(c.canWrapX()){var d=c.getExtent(),f=bn(d),g=t[0];(g<d[0]||g>d[2])&&(p=[g+f*Math.ceil((d[0]-g)/f),t[1]])}var _,m=e.layerStatesArray;for(_=m.length-1;_>=0;--_){var v=m[_],y=v.layer;if(Vi(v,u)&&r.call(l,y)){var b=this.getLayerRenderer(y),x=y.getSource();if(x&&(s=b.forEachFeatureAtCoordinate(x.getWrapX()?p:t,e,n,h)),s)return s}}},e.prototype.forEachLayerAtPixel=function(t,e,n,i,o,r,l){return H()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,ct,this,i,o)},e.prototype.getLayerRenderer=function(t){var e=Z(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var n,i=0,o=this.layerRendererConstructors_.length;i<o;++i){var r=this.layerRendererConstructors_[i];if(r.handles(t)){n=r.create(this,t);break}}if(!n)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=n,this.layerRendererListeners_[e]=rt(n,"change",this.handleLayerRendererChange_,this),n},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],at(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var n in this.layerRenderers_)e&&n in e.layerStates||this.removeLayerRendererByKey_(n).dispose()},e.prototype.renderFrame=function(t){H()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(dr)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(ht)),mr=function(t){function e(e){t.call(this,e),this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clip=function(t,e,n){var i=e.pixelRatio,o=e.size[0]*i,r=e.size[1]*i,l=e.viewState.rotation,s=vn(n),a=yn(n),u=pn(n),h=cn(n);ui(e.coordinateToPixelTransform,s),ui(e.coordinateToPixelTransform,a),ui(e.coordinateToPixelTransform,u),ui(e.coordinateToPixelTransform,h),t.save(),Jo(t,-l,o/2,r/2),t.beginPath(),t.moveTo(s[0]*i,s[1]*i),t.lineTo(a[0]*i,a[1]*i),t.lineTo(u[0]*i,u[1]*i),t.lineTo(h[0]*i,h[1]*i),t.clip(),Jo(t,l,o/2,r/2)},e.prototype.dispatchComposeEvent_=function(t,e,n,i){var o=this.getLayer();if(o.hasListener(t)){var r=n.size[0]*n.pixelRatio,l=n.size[1]*n.pixelRatio,s=n.viewState.rotation;Jo(e,-s,r/2,l/2);var a=void 0!==i?i:this.getTransform(n,0),u=new ur(e,n.pixelRatio,n.extent,a,n.viewState.rotation),h=new Bo(t,u,n,e,null);o.dispatchEvent(h),Jo(e,s,r/2,l/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,n,i,o){return this.forEachFeatureAtCoordinate(t,e,n,ct)?i.call(o,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,n,i){this.dispatchComposeEvent_("postcompose",t,e,i)},e.prototype.preCompose=function(t,e,n){this.dispatchComposeEvent_("precompose",t,e,n)},e.prototype.dispatchRenderEvent=function(t,e,n){this.dispatchComposeEvent_("render",t,e,n)},e.prototype.getTransform=function(t,e){var n=t.viewState,i=t.pixelRatio,o=i/n.resolution;return pi(this.transform_,i*t.size[0]/2,i*t.size[1]/2,o,-o,-n.rotation,-n.center[0]+e,-n.center[1])},e.prototype.composeFrame=function(t,e,n){H()},e.prototype.prepareFrame=function(t,e){return H()},e}(function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createLoadedTileFinder=function(t,e,n){return function(i,o){return t.forEachLoadedTile(e,i,o,(function(t){n[i]||(n[i]={}),n[i][t.tileCoord.toString()]=t}))}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&rt(t,"change",this.handleImageChange_,this),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&"ready"==t.getSourceState()&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=(function(t,e,n){var i=Z(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}).bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n,i){var o=Z(e),r=n.toString();o in t?r in t[o]?t[o][r].extend(i):t[o][r]=i:(t[o]={},t[o][r]=i)},e.prototype.manageTilePyramid=function(t,e,n,i,o,r,l,s,a,u){var h=Z(e);h in t.wantedTiles||(t.wantedTiles[h]={});var c,p,d,f,g,_,m=t.wantedTiles[h],v=t.tileQueue;for(_=n.getMinZoom();_<=l;++_)for(p=n.getTileRangeForExtentAndZ(r,_,p),d=n.getResolution(_),f=p.minX;f<=p.maxX;++f)for(g=p.minY;g<=p.maxY;++g)l-_<=s?(0==(c=e.getTile(_,f,g,i,o)).getState()&&(m[c.getKey()]=!0,v.isKeyQueued(c.getKey())||v.enqueue([c,h,n.getTileCoordCenter(c.tileCoord),d])),void 0!==a&&a.call(u,c)):e.useTile(_,f,g,o)},e}(vt)),vr=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.composeFrame=function(t,e,n){this.preCompose(n,t);var i=this.getImage();if(i){var o=e.extent,r=void 0!==o&&!Qe(o,t.extent)&&xn(o,t.extent);r&&this.clip(n,t,o);var l=this.getImageTransform(),s=n.globalAlpha;n.globalAlpha=e.opacity;var a=l[5],u=i.width*l[0],h=i.height*l[3];u>=.5&&h>=.5&&n.drawImage(i,0,0,+i.width,+i.height,Math.round(l[4]),Math.round(a),Math.round(u),Math.round(h)),n.globalAlpha=s,r&&n.restore()}this.postCompose(n,t,e)},e.prototype.getImage=function(){return H()},e.prototype.getImageTransform=function(){return H()},e.prototype.forEachLayerAtCoordinate=function(t,e,n,i,o){if(this.getImage()){var r=ui(this.coordinateToCanvasPixelTransform,t.slice());qe(r,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=ji(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),r[0],r[1],1,1,0,0,1,1);var l=this.hitCanvasContext_.getImageData(0,0,1,1).data;return l[3]>0?i.call(o,this.getLayer(),l):void 0}},e}(mr),yr=function(t){function e(n){if(t.call(this,n),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,"VECTOR"===n.getType())for(var i=0,o=gr.length;i<o;++i){var r=gr[i];if(r!==e&&r.handles(n)){this.vectorRenderer_=new r(n);break}}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var n,i=t.pixelRatio,o=t.size,r=t.viewState,l=r.center,s=r.resolution,a=this.getLayer().getSource(),u=t.viewHints,h=this.vectorRenderer_,c=t.extent;if(h||void 0===e.extent||(c=mn(c,e.extent)),!u[0]&&!u[1]&&!Cn(c)){var p=r.projection,d=this.skippedFeatures_;if(h){var f=h.context,g=J({},t,{size:[bn(c)/s,_n(c)/s],viewState:J({},t.viewState,{rotation:0})}),_=Object.keys(g.skippedFeatureUids).sort();n=new Ao(c,s,i,f.canvas,(function(t){!h.prepareFrame(g,e)||!h.replayGroupChanged&&ve(d,_)||(f.canvas.width=g.size[0]*i,f.canvas.height=g.size[1]*i,h.compose(f,g,e),d=_,t())}))}else n=a.getImage(c,s,i,p);n&&this.loadImage(n)&&(this.image_=n,this.skippedFeatures_=d)}if(this.image_){var m=(n=this.image_).getExtent(),v=n.getResolution(),y=n.getPixelRatio(),b=i*v/(s*y),x=pi(this.imageTransform_,i*o[0]/2,i*o[1]/2,b,b,0,y*(m[0]-l[0])/v,y*(l[1]-m[3])/v);pi(this.coordinateToCanvasPixelTransform,i*o[0]/2-x[4],i*o[1]/2-x[5],i/s,-i/s,0,-l[0],-l[1]),this.renderedResolution=v*i/y}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,n,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,n,i,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,n,i,o)},e}(vr);yr.handles=function(t){return"IMAGE"===t.getType()||"VECTOR"===t.getType()&&"image"===t.getRenderMode()},yr.create=function(t,e){return new yr(e)};var br=yr,xr=function(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i};function Cr(t,e,n,i,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=i,o):new xr(t,e,n,i)}xr.prototype.contains=function(t){return this.containsXY(t[1],t[2])},xr.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},xr.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},xr.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},xr.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},xr.prototype.getHeight=function(){return this.maxY-this.minY+1},xr.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},xr.prototype.getWidth=function(){return this.maxX-this.minX+1},xr.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var Sr=xr,wr=function(t){function e(e,n){t.call(this,e),this.context=n?null:ji(),this.renderedExtent_=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Sr(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!i},e.prototype.getTile=function(t,e,n,i,o){var r=this.getLayer(),l=r.getSource().getTile(t,e,n,i,o);return 3==l.getState()&&(r.getUseInterimTilesOnError()?r.getPreload()>0&&(this.newTiles_=!0):l.setState(2)),this.isDrawableTile_(l)||(l=l.getInterimTile()),l},e.prototype.prepareFrame=function(t,e){var n=t.pixelRatio,i=t.size,o=t.viewState,r=o.projection,l=o.resolution,s=o.center,a=this.getLayer(),u=a.getSource(),h=u.getRevision(),c=u.getTileGridForProjection(r),p=c.getZForResolution(l,this.zDirection),d=c.getResolution(p),f=Math.round(l/d)||1,g=t.extent;if(void 0!==e.extent&&(g=mn(g,e.extent)),Cn(g))return!1;var _=c.getTileRangeForExtentAndZ(g,p),m=c.getTileRangeExtent(p,_),v=u.getTilePixelRatio(n),y={};y[p]={};var b,x,C,S=this.createLoadedTileFinder(u,r,y),w=t.viewHints,T=w[0]||w[1],E=this.tmpExtent,I=this.tmpTileRange_;for(this.newTiles_=!1,x=_.minX;x<=_.maxX;++x)for(C=_.minY;C<=_.maxY;++C)if(!(Date.now()-t.time>16&&T)){if(b=this.getTile(p,x,C,n,r),this.isDrawableTile_(b)){var R=Z(this);if(2==b.getState()){y[p][b.tileCoord.toString()]=b;var k=b.inTransition(R);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(b)||(this.newTiles_=!0)}if(1===b.getAlpha(R,t.time))continue}var M=c.getTileCoordChildTileRange(b.tileCoord,I,E),P=!1;M&&(P=S(p+1,M)),P||c.forEachTileCoordParentTileRange(b.tileCoord,S,null,I,E)}var O=d*n/v*f;if(!(this.renderedResolution&&Date.now()-t.time>16&&T)&&(this.newTiles_||!this.renderedExtent_||!Qe(this.renderedExtent_,g)||this.renderedRevision!=h||f!=this.oversampling_||!T&&O!=this.renderedResolution)){var L=this.context;if(L){var F=u.getTilePixelSize(p,n,r),D=Math.round(_.getWidth()*F[0]/f),A=Math.round(_.getHeight()*F[1]/f),B=L.canvas;B.width!=D||B.height!=A?(this.oversampling_=f,B.width=D,B.height=A):((this.renderedExtent_&&!rn(m,this.renderedExtent_)||this.renderedRevision!=h)&&L.clearRect(0,0,D,A),f=this.oversampling_)}this.renderedTiles.length=0;var z,N,G,j,q,Y,X,K,W=Object.keys(y).map(Number);for(W.sort((function(t,e){return t===p?1:e===p?-1:t>e?1:t<e?-1:0})),j=0,q=W.length;j<q;++j)for(var H in N=u.getTilePixelSize(G=W[j],n,r),z=c.getResolution(G)/d,X=v*u.getGutterForProjection(r),K=y[G])Y=c.getTileCoordExtent((b=K[H]).getTileCoord(),E),this.drawTileImage(b,t,e,x=(Y[0]-m[0])/d*v/f,C=(m[3]-Y[3])/d*v/f,N[0]*z/f,N[1]*z/f,X,p===G),this.renderedTiles.push(b);this.renderedRevision=h,this.renderedResolution=d*n/v*f,this.renderedExtent_=m}var U=this.renderedResolution/l,V=pi(this.imageTransform_,n*i[0]/2,n*i[1]/2,U,U,0,(this.renderedExtent_[0]-s[0])/this.renderedResolution*n,(s[1]-this.renderedExtent_[3])/this.renderedResolution*n);return pi(this.coordinateToCanvasPixelTransform,n*i[0]/2-V[4],n*i[1]/2-V[5],n/l,-n/l,0,-s[0],-s[1]),this.updateUsedTiles(t.usedTiles,u,p,_),this.manageTilePyramid(t,u,c,n,r,g,p,a.getPreload()),this.scheduleExpireCache(t,u),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,n,i,o,r,l,s,a){var u=this.getTileImage(t);if(u){var h=Z(this),c=a?t.getAlpha(h,e.time):1,p=this.getLayer().getSource();1!==c||p.getOpaque(e.viewState.projection)||this.context.clearRect(i,o,r,l);var d=c!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(u,s,s,u.width-2*s,u.height-2*s,i,o,r,l),d&&this.context.restore(),1!==c?e.animate=!0:a&&t.endTransition(h)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(vr);wr.handles=function(t){return"TILE"===t.getType()},wr.create=function(t,e){return new wr(e)};var Tr=wr,Er=n("A1R+"),Ir=n.n(Er),Rr=function(){};Rr.prototype.getReplay=function(t,e){return H()},Rr.prototype.isEmpty=function(){return H()},Rr.prototype.addDeclutter=function(t){return H()};var kr=Rr;function Mr(t,e,n,i){for(var o=t[e],r=t[e+1],l=0,s=e+i;s<n;s+=i){var a=t[s],u=t[s+1];l+=Math.sqrt((a-o)*(a-o)+(u-r)*(u-r)),o=a,r=u}return l}function Pr(t,e,n,i,o,r,l,s){for(var a,u,h=[],c=t[e]>t[n-i],p=o.length,d=t[e],f=t[e+1],g=t[e+=i],_=t[e+1],m=0,v=Math.sqrt(Math.pow(g-d,2)+Math.pow(_-f,2)),y="",b=0,x=0;x<p;++x){var C=o.charAt(c?p-x-1:x),S=r(y=c?C+y:y+C)-b;b+=S;for(var w=l+S/2;e<n-i&&m+v<w;)d=g,f=_,g=t[e+=i],_=t[e+1],m+=v,v=Math.sqrt(Math.pow(g-d,2)+Math.pow(_-f,2));var T=w-m,E=Math.atan2(_-f,g-d);if(c&&(E+=E>0?-Math.PI:Math.PI),void 0!==u){var I=E-u;if(I+=I>Math.PI?-2*Math.PI:I<-Math.PI?2*Math.PI:0,Math.abs(I)>s)return null}var R=T/v,k=Ae(d,g,R),M=Ae(f,_,R);u==E?(c&&(a[0]=k,a[1]=M,a[2]=S/2),a[4]=y):(b=S,a=[k,M,S/2,E,y=C],c?h.unshift(a):h.push(a),u=E),l+=S}return h}var Or={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Lr=[Or.FILL],Fr=[Or.STROKE],Dr=[Or.BEGIN_PATH],Ar=[Or.CLOSE_PATH],Br=Or,zr=["Polygon","Circle","LineString","Image","Text","Default"],Nr={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Gr=en(),jr=oi(),qr=function(t){function e(e,n,i,o,r,l){t.call(this),this.declutterTree=l,this.tolerance=e,this.maxExtent=n,this.overlaps=r,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.replayTextBackground_=function(t,e,n,i,o,r,l){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())},e.prototype.replayImage_=function(t,e,n,i,o,r,l,s,a,u,h,c,p,d,f,g,_,m){var v,y,b,x,C=_||m,S=f+u>i.width?i.width-u:f,w=s+h>i.height?i.height-h:s,T=g[3]+S*p+g[1],E=g[0]+w*p+g[2],I=(e-=o*=p)-g[3],R=(n-=r*=p)-g[0];(C||0!==c)&&(v=[I,R],y=[I+T,R],b=[I+T,R+E],x=[I,R+E]);var k=null;if(0!==c){var M=e+o,P=n+r;k=pi(jr,M,P,1,1,c,-M,-P),on(Gr),sn(Gr,ui(jr,v)),sn(Gr,ui(jr,y)),sn(Gr,ui(jr,b)),sn(Gr,ui(jr,x))}else nn(I,R,I+T,R+E,Gr);var O=t.canvas,L=m?m[2]*p/2:0,F=Gr[0]-L<=O.width&&Gr[2]+L>=0&&Gr[1]-L<=O.height&&Gr[3]+L>=0;if(d&&(e=Math.round(e),n=Math.round(n)),l){if(!F&&1==l[4])return;ln(l,Gr);var D=F?[t,k?k.slice(0):null,a,i,u,h,S,w,e,n,p]:null;D&&C&&D.push(_,m,v,y,b,x),l.push(D)}else F&&(C&&this.replayTextBackground_(t,v,y,b,x,_,m),$o(t,k,a,i,u,h,S,w,e,n,p))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,n,i,o,r){var l=this.coordinates.length,s=this.getBufferedMaxExtent();r&&(e+=i);var a,u,h,c=[t[e],t[e+1]],p=[NaN,NaN],d=!0;for(a=e+i;a<n;a+=i)p[0]=t[a],p[1]=t[a+1],(h=tn(s,p))!==u?(d&&(this.coordinates[l++]=c[0],this.coordinates[l++]=c[1]),this.coordinates[l++]=p[0],this.coordinates[l++]=p[1],d=!1):1===h?(this.coordinates[l++]=p[0],this.coordinates[l++]=p[1],d=!1):d=!0,c[0]=p[0],c[1]=p[1],u=h;return(o&&d||a===e+i)&&(this.coordinates[l++]=c[0],this.coordinates[l++]=c[1]),l},e.prototype.drawCustomCoordinates_=function(t,e,n,i,o){for(var r=0,l=n.length;r<l;++r){var s=n[r],a=this.appendFlatCoordinates(t,e,s,i,!1,!1);o.push(a),e=s}return e},e.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);var i,o,r,l,s,a=t.getType(),u=t.getStride(),h=this.coordinates.length;if("MultiPolygon"==a){i=(t=t).getOrientedFlatCoordinates(),l=[];var c=t.getEndss();s=0;for(var p=0,d=c.length;p<d;++p){var f=[];s=this.drawCustomCoordinates_(i,s,c[p],u,f),l.push(f)}this.instructions.push([Br.CUSTOM,h,l,t,n,Si])}else"Polygon"==a||"MultiLineString"==a?(r=[],i="Polygon"==a?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(i,0,t.getEnds(),u,r),this.instructions.push([Br.CUSTOM,h,r,t,n,Ci])):"LineString"==a||"MultiPoint"==a?(i=t.getFlatCoordinates(),o=this.appendFlatCoordinates(i,0,i.length,u,!1,!1),this.instructions.push([Br.CUSTOM,h,o,t,n,xi])):"Point"==a&&(i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),this.instructions.push([Br.CUSTOM,h,o=this.coordinates.length,t,n]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[Br.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Br.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=ui(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Qo)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],Lt&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var n=t[4];if(1==n||n==t.length-5){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(i)){this.declutterTree.insert(i);for(var o=5,r=t.length;o<r;++o){var l=t[o];l&&(l.length>11&&this.replayTextBackground_(l[0],l[13],l[14],l[15],l[16],l[11],l[12]),$o.apply(void 0,l))}}t.length=5,on(t)}}},e.prototype.replay_=function(t,e,n,i,o,r,l){var s;this.pixelCoordinates_&&ve(e,this.renderedTransform_)?s=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),s=Sn(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),ai(this.renderedTransform_,e));for(var a,u,h,c,p,d,f,g,_,m,v,y,b=!tt(n),x=0,C=i.length,S=0,w=0,T=0,E=null,I=null,R=this.coordinateCache_,k=this.viewRotation_,M={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},P=this.instructions!=i||this.overlaps?0:200;x<C;){var O=i[x];switch(O[0]){case Br.BEGIN_GEOMETRY:m=O[1],b&&n[Z(m)]||!m.getGeometry()?x=O[2]:void 0===l||xn(l,m.getGeometry().getExtent())?++x:x=O[2]+1;break;case Br.BEGIN_PATH:w>P&&(this.fill_(t),w=0),T>P&&(t.stroke(),T=0),w||T||(t.beginPath(),c=p=NaN),++x;break;case Br.CIRCLE:var L=s[S=O[1]],F=s[S+1],D=s[S+2]-L,A=s[S+3]-F,B=Math.sqrt(D*D+A*A);t.moveTo(L+B,F),t.arc(L,F,B,0,2*Math.PI,!0),++x;break;case Br.CLOSE_PATH:t.closePath(),++x;break;case Br.CUSTOM:S=O[1],a=O[2];var z=O[4],N=6==O.length?O[5]:void 0;M.geometry=O[3],M.feature=m,x in R||(R[x]=[]);var G=R[x];N?N(s,S,a,2,G):(G[0]=s[S],G[1]=s[S+1],G.length=2),z(G,M),++x;break;case Br.DRAW_IMAGE:S=O[1],a=O[2],_=O[3],u=O[4],h=O[5],g=r?null:O[6];var j=O[7],q=O[8],Y=O[9],X=O[10],K=O[12],W=O[13],H=O[14],U=void 0,V=void 0,J=void 0;for(O.length>16?(U=O[15],V=O[16],J=O[17]):(U=qo,V=J=!1),O[11]&&(K+=k);S<a;S+=2)this.replayImage_(t,s[S],s[S+1],_,u,h,g,j,q,Y,X,K,W,o,H,U,V?E:null,J?I:null);this.renderDeclutter_(g,m),++x;break;case Br.DRAW_CHARS:var Q=O[1],$=O[2],et=O[3];g=r?null:O[4];var nt=O[5],it=O[6],ot=O[7],rt=O[8],lt=O[9],st=O[10],at=O[11],ut=O[12],ht=O[13],ct=O[14],pt=Mr(s,Q,$,2),dt=rt(ut);if(nt||dt<=pt){var ft=Pr(s,Q,$,2,ut,rt,(pt-dt)*Nr[this.textStates[ht].textAlign],ot);if(ft){var gt=void 0,_t=void 0,mt=void 0,vt=void 0;if(st)for(gt=0,_t=ft.length;gt<_t;++gt)mt=this.getImage((vt=ft[gt])[4],ht,"",st),this.replayImage_(t,vt[0],vt[1],mt,u=vt[2]+at,h=et*mt.height+2*(.5-et)*at-lt,g,mt.height,1,0,0,vt[3],ct,!1,mt.width,qo,null,null);if(it)for(gt=0,_t=ft.length;gt<_t;++gt)mt=this.getImage((vt=ft[gt])[4],ht,it,""),this.replayImage_(t,vt[0],vt[1],mt,u=vt[2],h=et*mt.height-lt,g,mt.height,1,0,0,vt[3],ct,!1,mt.width,qo,null,null)}}this.renderDeclutter_(g,m),++x;break;case Br.END_GEOMETRY:if(void 0!==r){var yt=r(m=O[1]);if(yt)return yt}++x;break;case Br.FILL:P?w++:this.fill_(t),++x;break;case Br.MOVE_TO_LINE_TO:for(a=O[2],f=(y=s[(S=O[1])+1])+.5|0,(d=(v=s[S])+.5|0)===c&&f===p||(t.moveTo(v,y),c=d,p=f),S+=2;S<a;S+=2)d=(v=s[S])+.5|0,f=(y=s[S+1])+.5|0,S!=a-2&&d===c&&f===p||(t.lineTo(v,y),c=d,p=f);++x;break;case Br.SET_FILL_STYLE:E=O,this.alignFill_=O[2],w&&(this.fill_(t),w=0,T&&(t.stroke(),T=0)),t.fillStyle=O[1],++x;break;case Br.SET_STROKE_STYLE:I=O,T&&(t.stroke(),T=0),this.setStrokeStyle_(t,O),++x;break;case Br.STROKE:P?T++:t.stroke(),++x;break;default:++x}}w&&this.fill_(t),T&&t.stroke()},e.prototype.replay=function(t,e,n,i,o){this.viewRotation_=n,this.replay_(t,e,i,this.instructions,o,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,n,i,o,r){return this.viewRotation_=n,this.replay_(t,e,i,this.hitDetectionInstructions,!0,o,r)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,i,o=e.length,r=-1;for(t=0;t<o;++t)(i=(n=e[t])[0])==Br.END_GEOMETRY?r=t:i==Br.BEGIN_GEOMETRY&&(n[2]=t,_e(this.hitDetectionInstructions,r,t),r=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var i=t.getColor();n.fillStyle=lr(i||No)}else n.fillStyle=void 0;if(e){var o=e.getColor();n.strokeStyle=lr(o||jo);var r=e.getLineCap();n.lineCap=void 0!==r?r:"round";var l=e.getLineDash();n.lineDash=l?l.slice():Go;var s=e.getLineDashOffset();n.lineDashOffset=s||0;var a=e.getLineJoin();n.lineJoin=void 0!==a?a:"round";var u=e.getWidth();n.lineWidth=void 0!==u?u:1;var h=e.getMiterLimit();n.miterLimit=void 0!==h?h:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t,e){var n=t.fillStyle,i=[Br.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[Br.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t,n)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,i=t.lineCap,o=t.lineDash,r=t.lineDashOffset,l=t.lineJoin,s=t.lineWidth,a=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||o!=t.currentLineDash&&!ve(t.currentLineDash,o)||t.currentLineDashOffset!=r||t.currentLineJoin!=l||t.currentLineWidth!=s||t.currentMiterLimit!=a)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=o,t.currentLineDashOffset=r,t.currentLineJoin=l,t.currentLineWidth=s,t.currentMiterLimit=a)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[Br.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){return this.bufferedMaxExtent_||(this.bufferedMaxExtent_=Ze(this.maxExtent),this.maxLineWidth>0&&Ue(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_)),this.bufferedMaxExtent_},e}(ar),Yr=function(t){function e(e,n,i,o,r,l){t.call(this,e,n,i,o,r,l),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.drawCoordinates_=function(t,e,n,i){return this.appendFlatCoordinates(t,e,n,i,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([Br.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Br.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([Br.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Br.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),i=t.getSize(),o=t.getHitDetectionImage(1),r=t.getImage(1),l=t.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroup_=e,this.hitDetectionImage_=o,this.image_=r,this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=i[0]},e}(qr),Xr=function(t){function e(e,n,i,o,r,l){t.call(this,e,n,i,o,r,l)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,n,i){var o=this.coordinates.length,r=this.appendFlatCoordinates(t,e,n,i,!1,!1),l=[Br.MOVE_TO_LINE_TO,o,r];return this.instructions.push(l),this.hitDetectionInstructions.push(l),n},e.prototype.drawLineString=function(t,e){var n=this.state;if(void 0!==n.strokeStyle&&void 0!==n.lineWidth){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Br.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],Dr);var i=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(i,0,i.length,o),this.hitDetectionInstructions.push(Fr),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state;if(void 0!==n.strokeStyle&&void 0!==n.lineWidth){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Br.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],Dr);for(var i=t.getEnds(),o=t.getFlatCoordinates(),r=t.getStride(),l=0,s=0,a=i.length;s<a;++s)l=this.drawFlatCoordinates_(o,l,i[s],r);this.hitDetectionInstructions.push(Fr),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Fr),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Fr),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Dr)},e}(qr),Kr=function(t){function e(e,n,i,o,r,l){t.call(this,e,n,i,o,r,l)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,n,i){var o=this.state,r=void 0!==o.fillStyle,l=null!=o.strokeStyle,s=n.length;this.instructions.push(Dr),this.hitDetectionInstructions.push(Dr);for(var a=0;a<s;++a){var u=n[a],h=this.coordinates.length,c=this.appendFlatCoordinates(t,e,u,i,!0,!l),p=[Br.MOVE_TO_LINE_TO,h,c];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push(Ar),this.hitDetectionInstructions.push(Ar)),e=u}return r&&(this.instructions.push(Lr),this.hitDetectionInstructions.push(Lr)),l&&(this.instructions.push(Fr),this.hitDetectionInstructions.push(Fr)),e},e.prototype.drawCircle=function(t,e){var n=this.state;if(void 0!==n.fillStyle||void 0!==n.strokeStyle){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([Br.SET_FILL_STYLE,nr(No)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Br.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var i=t.getFlatCoordinates(),o=t.getStride(),r=this.coordinates.length;this.appendFlatCoordinates(i,0,i.length,o,!1,!1);var l=[Br.CIRCLE,r];this.instructions.push(Dr,l),this.hitDetectionInstructions.push(Dr,l),this.hitDetectionInstructions.push(Lr),void 0!==n.fillStyle&&this.instructions.push(Lr),void 0!==n.strokeStyle&&(this.instructions.push(Fr),this.hitDetectionInstructions.push(Fr)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var n=this.state;if(void 0!==n.fillStyle||void 0!==n.strokeStyle){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([Br.SET_FILL_STYLE,nr(No)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Br.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var i=t.getEnds(),o=t.getOrientedFlatCoordinates(),r=t.getStride();this.drawFlatCoordinatess_(o,0,i,r),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state;if(void 0!==n.fillStyle||void 0!==n.strokeStyle){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([Br.SET_FILL_STYLE,nr(No)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Br.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var i=t.getEndss(),o=t.getOrientedFlatCoordinates(),r=t.getStride(),l=0,s=0,a=i.length;s<a;++s)l=this.drawFlatCoordinatess_(o,l,i[s],r);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,n=0,i=e.length;n<i;++n)e[n]=wi(e[n],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(qr);function Wr(t,e,n,i,o){var r,l,s,a,u,h,c,p,d,f=n,g=n,_=0,m=0,v=n;for(r=n;r<i;r+=o){var y=e[r],b=e[r+1];void 0!==a&&(p=y-a,d=b-u,s=Math.sqrt(p*p+d*d),void 0!==h&&(m+=l,Math.acos((h*p+c*d)/(l*s))>t&&(m>_&&(_=m,f=v,g=r),m=0,v=r-o)),l=s,h=p,c=d),a=y,u=b}return(m+=s)>_?[v,r]:[f,g]}var Hr={Circle:Kr,Default:qr,Image:Yr,LineString:Xr,Polygon:Kr,Text:function(t){function e(e,n,i,o,r,l){t.call(this,e,n,i,o,r,l),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},Yo.prune()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.drawText=function(t,e){var n=this.textState_;if(""!==this.text_&&n&&(this.textFillState_||this.textStrokeState_)){var i,o,r=this.coordinates.length,l=t.getType(),s=null,a=2,u=2;if("line"===n.placement){if(!xn(this.getBufferedMaxExtent(),t.getExtent()))return;var h;if(s=t.getFlatCoordinates(),u=t.getStride(),"LineString"==l)h=[s.length];else if("MultiLineString"==l)h=t.getEnds();else if("Polygon"==l)h=t.getEnds().slice(0,1);else if("MultiPolygon"==l){var c=t.getEndss();for(h=[],i=0,o=c.length;i<o;++i)h.push(c[i][0])}this.beginGeometry(t,e);for(var p,d=n.textAlign,f=0,g=0,_=h.length;g<_;++g){if(null==d){var m=Wr(n.maxAngle,s,f,h[g],u);f=m[0],p=m[1]}else p=h[g];for(i=f;i<p;i+=u)this.coordinates.push(s[i],s[i+1]);f=h[g],this.drawChars_(r,a=this.coordinates.length,this.declutterGroup_),r=a}this.endGeometry(t,e)}else{var v=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),y=v.width/this.pixelRatio;switch(l){case"Point":case"MultiPoint":a=(s=t.getFlatCoordinates()).length;break;case"LineString":s=t.getFlatMidpoint();break;case"Circle":s=t.getCenter();break;case"MultiLineString":a=(s=t.getFlatMidpoints()).length;break;case"Polygon":if(s=t.getFlatInteriorPoint(),!n.overflow&&s[2]/this.resolution<y)return;u=3;break;case"MultiPolygon":var b=t.getFlatInteriorPoints();for(s=[],i=0,o=b.length;i<o;i+=3)(n.overflow||b[i+2]/this.resolution>=y)&&s.push(b[i],b[i+1]);if(0==(a=s.length))return}a=this.appendFlatCoordinates(s,0,a,u,!1,!1),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(v,r,a),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,n,i){var o,r=i+e+t+n+this.pixelRatio;if(!Yo.containsKey(r)){var l=i?this.strokeStates[i]||this.textStrokeState_:null,s=n?this.fillStates[n]||this.textFillState_:null,a=this.textStates[e]||this.textState_,u=a.scale*this.pixelRatio,h=Nr[a.textAlign||"center"],c=i&&l.lineWidth?l.lineWidth:0,p=t.split("\n"),d=p.length,f=[],g=function(t,e,n){for(var i=e.length,o=0,r=0;r<i;++r){var l=Vo(t,e[r]);o=Math.max(o,l),n.push(l)}return o}(a.font,p,f),_=Zo(a.font),m=_*d,v=ji(Math.ceil((g+c)*u),Math.ceil((m+c)*u));Yo.set(r,o=v.canvas),1!=u&&v.scale(u,u),v.font=a.font,i&&(v.strokeStyle=l.strokeStyle,v.lineWidth=c,v.lineCap=l.lineCap,v.lineJoin=l.lineJoin,v.miterLimit=l.miterLimit,Lt&&l.lineDash.length&&(v.setLineDash(l.lineDash),v.lineDashOffset=l.lineDashOffset)),n&&(v.fillStyle=s.fillStyle),v.textBaseline="middle",v.textAlign="center";var y,b=.5-h,x=h*o.width/u+b*c;if(i)for(y=0;y<d;++y)v.strokeText(p[y],x+b*f[y],.5*(c+_)+y*_);if(n)for(y=0;y<d;++y)v.fillText(p[y],x+b*f[y],.5*(c+_)+y*_)}return Yo.get(r)},e.prototype.drawTextImage_=function(t,e,n){var i=this.textState_,o=this.textStrokeState_,r=this.pixelRatio,l=Nr[i.textAlign||"center"],s=Nr[i.textBaseline],a=o&&o.lineWidth?o.lineWidth:0,u=l*t.width/r+2*(.5-l)*a,h=s*t.height/r+2*(.5-s)*a;this.instructions.push([Br.DRAW_IMAGE,e,n,t,(u-this.textOffsetX_)*r,(h-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,i.padding==qo?qo:i.padding.map((function(t){return t*r})),!!i.backgroundFill,!!i.backgroundStroke]),this.hitDetectionInstructions.push([Br.DRAW_IMAGE,e,n,t,(u-this.textOffsetX_)*r,(h-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/r,t.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])},e.prototype.drawChars_=function(t,e,n){var i=this.textStrokeState_,o=this.textState_,r=this.textFillState_,l=this.strokeKey_;i&&(l in this.strokeStates||(this.strokeStates[l]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}));var s=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:o.font,textAlign:o.textAlign||"center",scale:o.scale});var a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}));var u=this.pixelRatio,h=Nr[o.textBaseline],c=this.textOffsetY_*u,p=this.text_,d=o.font,f=o.scale,g=i?i.lineWidth*f/2:0,_=this.widths_[d];_||(this.widths_[d]=_={}),this.instructions.push([Br.DRAW_CHARS,t,e,h,n,o.overflow,a,o.maxAngle,function(t){var e=_[t];return e||(e=_[t]=Vo(d,t)),e*f*u},c,l,g*u,p,s,1]),this.hitDetectionInstructions.push([Br.DRAW_CHARS,t,e,h,n,o.overflow,a,o.maxAngle,function(t){var e=_[t];return e||(e=_[t]=Vo(d,t)),e*f},c,l,g,p,s,1/u])},e.prototype.setTextStyle=function(t,e){var n,i,o;if(t){this.declutterGroup_=e;var r=t.getFill();r?((i=this.textFillState_)||(i=this.textFillState_={}),i.fillStyle=lr(r.getColor()||No)):i=this.textFillState_=null;var l=t.getStroke();if(l){(o=this.textStrokeState_)||(o=this.textStrokeState_={});var s=l.getLineDash(),a=l.getLineDashOffset(),u=l.getWidth(),h=l.getMiterLimit();o.lineCap=l.getLineCap()||"round",o.lineDash=s?s.slice():Go,o.lineDashOffset=void 0===a?0:a,o.lineJoin=l.getLineJoin()||"round",o.lineWidth=void 0===u?1:u,o.miterLimit=void 0===h?10:h,o.strokeStyle=lr(l.getColor()||jo)}else o=this.textStrokeState_=null;n=this.textState_;var c=t.getFont()||"10px sans-serif";Ho(c);var p=t.getScale();n.overflow=t.getOverflow(),n.font=c,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||"middle",n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||qo,n.scale=void 0===p?1:p;var d=t.getOffsetX(),f=t.getOffsetY(),g=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===_?0:_,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Z(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+Z(i.fillStyle):""}else this.text_=""},e}(qr)},Ur=function(t){function e(e,n,i,o,r,l,s){t.call(this),this.declutterTree_=l,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=n,this.overlaps_=r,this.pixelRatio_=o,this.resolution_=i,this.renderBuffer_=s,this.replaysByZIndex_={},this.hitDetectionContext_=ji(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),e},e.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var n=this.replaysByZIndex_[e],i=0,o=t.length;i<o;++i)if(t[i]in n)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var n in e)e[n].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,l){var s,a=2*(i=Math.round(i))+1,u=pi(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):h.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(sn(s=[1/0,1/0,-1/0,-1/0],t),Ue(s,e*(this.renderBuffer_+i),s));var c,p,d=function(t){if(void 0!==Zr[t])return Zr[t];for(var e=2*t+1,n=new Array(e),i=0;i<e;i++)n[i]=new Array(e);for(var o=t,r=0,l=0;o>=r;)Vr(n,t+o,t+r),Vr(n,t+r,t+o),Vr(n,t-r,t+o),Vr(n,t-o,t+r),Vr(n,t-o,t-r),Vr(n,t-r,t-o),Vr(n,t+r,t-o),Vr(n,t+o,t-r),2*((l+=1+2*++r)-o)+1>0&&(l+=1-2*(o-=1));return Zr[t]=n,n}(i);function f(t){for(var e=h.getImageData(0,0,a,a).data,n=0;n<a;n++)for(var i=0;i<a;i++)if(d[n][i]&&e[4*(i*a+n)+3]>0){var o=void 0;return(!c||"Image"!=p&&"Text"!=p||-1!==c.indexOf(t))&&(o=r(t)),o||void h.clearRect(0,0,a,a)}}this.declutterTree_&&(c=this.declutterTree_.all().map((function(t){return t.value})));var g,_,m,v,y,b=Object.keys(this.replaysByZIndex_).map(Number);for(b.sort(fe),g=b.length-1;g>=0;--g){var x=b[g].toString();for(m=this.replaysByZIndex_[x],_=zr.length-1;_>=0;--_)if(void 0!==(v=m[p=zr[_]]))if(!l||"Image"!=p&&"Text"!=p){if(y=v.replayHitDetection(h,u,n,o,f,s))return y}else{var C=l[x];C?C.push(v,u.slice(0)):l[x]=[v,u.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,n=e[0],i=e[1],o=e[2],r=e[3],l=[n,i,n,r,o,r,o,i];return Sn(l,0,8,2,t,l),l},e.prototype.getReplay=function(t,e){var n=void 0!==t?t.toString():"0",i=this.replaysByZIndex_[n];void 0===i&&(this.replaysByZIndex_[n]=i={});var o=i[e];return void 0===o&&(o=new(0,Hr[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),i[e]=o),o},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return tt(this.replaysByZIndex_)},e.prototype.replay=function(t,e,n,i,o,r,l){var s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(fe),t.save(),this.clip(t,e);var a,u,h,c,p,d,f=r||zr;for(a=0,u=s.length;a<u;++a){var g=s[a].toString();for(p=this.replaysByZIndex_[g],h=0,c=f.length;h<c;++h){var _=f[h];if(void 0!==(d=p[_]))if(!l||"Image"!=_&&"Text"!=_)d.replay(t,e,n,i,o);else{var m=l[g];m?m.push(d,e.slice(0)):l[g]=[d,e.slice(0)]}}}t.restore()},e}(kr),Zr={0:[[!0]]};function Vr(t,e,n){var i,o=Math.floor(t.length/2);if(e>=o)for(i=o;i<e;i++)t[i][n]=!0;else if(e<o)for(i=e+1;i<o;i++)t[i][n]=!0}var Jr=Ur,Qr={Point:function(t,e,n,i){var o=n.getImage();if(o){if(2!=o.getImageState())return;var r=t.getReplay(n.getZIndex(),"Image");r.setImageStyle(o,t.addDeclutter(!1)),r.drawPoint(e,i)}var l=n.getText();if(l){var s=t.getReplay(n.getZIndex(),"Text");s.setTextStyle(l,t.addDeclutter(!!o)),s.drawText(e,i)}},LineString:function(t,e,n,i){var o=n.getStroke();if(o){var r=t.getReplay(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawLineString(e,i)}var l=n.getText();if(l){var s=t.getReplay(n.getZIndex(),"Text");s.setTextStyle(l,t.addDeclutter(!1)),s.drawText(e,i)}},Polygon:function(t,e,n,i){var o=n.getFill(),r=n.getStroke();if(o||r){var l=t.getReplay(n.getZIndex(),"Polygon");l.setFillStrokeStyle(o,r),l.drawPolygon(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),"Text");a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,i)}},MultiPoint:function(t,e,n,i){var o=n.getImage();if(o){if(2!=o.getImageState())return;var r=t.getReplay(n.getZIndex(),"Image");r.setImageStyle(o,t.addDeclutter(!1)),r.drawMultiPoint(e,i)}var l=n.getText();if(l){var s=t.getReplay(n.getZIndex(),"Text");s.setTextStyle(l,t.addDeclutter(!!o)),s.drawText(e,i)}},MultiLineString:function(t,e,n,i){var o=n.getStroke();if(o){var r=t.getReplay(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawMultiLineString(e,i)}var l=n.getText();if(l){var s=t.getReplay(n.getZIndex(),"Text");s.setTextStyle(l,t.addDeclutter(!1)),s.drawText(e,i)}},MultiPolygon:function(t,e,n,i){var o=n.getFill(),r=n.getStroke();if(r||o){var l=t.getReplay(n.getZIndex(),"Polygon");l.setFillStrokeStyle(o,r),l.drawMultiPolygon(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),"Text");a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,i)}},GeometryCollection:function(t,e,n,i){var o,r,l=e.getGeometriesArray();for(o=0,r=l.length;o<r;++o)(0,Qr[l[o].getType()])(t,l[o],n,i)},Circle:function(t,e,n,i){var o=n.getFill(),r=n.getStroke();if(o||r){var l=t.getReplay(n.getZIndex(),"Circle");l.setFillStrokeStyle(o,r),l.drawCircle(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),"Text");a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,i)}}};function $r(t,e){return parseInt(Z(t),10)-parseInt(Z(e),10)}function tl(t,e){var n=el(t,e);return n*n}function el(t,e){return.5*t/e}function nl(t,e,n,i,o,r){var l=!1,s=n.getImage();if(s){var a=s.getImageState();2==a||3==a?s.unlistenImageChange(o,r):(0==a&&s.load(),a=s.getImageState(),s.listenImageChange(o,r),l=!0)}return function(t,e,n,i){var o=n.getGeometryFunction()(e);if(o){var r=o.getSimplifiedGeometry(i);n.getRenderer()?function t(e,n,i,o){if("GeometryCollection"!=n.getType())e.getReplay(i.getZIndex(),"Default").drawCustom(n,o,i.getRenderer());else for(var r=n.getGeometries(),l=0,s=r.length;l<s;++l)t(e,r[l],i,o)}(t,r,n,e):(0,Qr[r.getType()])(t,r,n,e)}}(t,e,n,i),l}var il=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?Ir()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=ji(),rt(Yo,"clear",this.handleFontsChanged_,this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.disposeInternal=function(){st(Yo,"clear",this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,n){var i=e.extent,o=e.pixelRatio,r=n.managed?e.skippedFeatureUids:{},l=e.viewState,s=l.projection,a=l.rotation,u=s.getExtent(),h=this.getLayer().getSource(),c=this.getTransform(e,0),p=n.extent,d=void 0!==p;d&&this.clip(t,e,p);var f=this.replayGroup_;if(f&&!f.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var g,_=this.getLayer(),m=0,v=0,y=1!==n.opacity,b=_.hasListener("render");if(y||b){var x=t.canvas.width,C=t.canvas.height;if(a){var S=Math.round(Math.sqrt(x*x+C*C));m=(S-x)/2,v=(S-C)/2,x=C=S}this.context.canvas.width=x,this.context.canvas.height=C,g=this.context}else g=t;var w=g.globalAlpha;y||(g.globalAlpha=n.opacity),g!=t&&g.translate(m,v);var T=e.viewHints,E=!(T[0]||T[1]),I=e.size[0]*o,R=e.size[1]*o;if(Jo(g,-a,I/2,R/2),f.replay(g,c,a,r,E),h.getWrapX()&&s.canWrapX()&&!Qe(u,i)){for(var k=i[0],M=bn(u),P=0;k<u[0];)--P,c=this.getTransform(e,M*P),f.replay(g,c,a,r,E),k+=M;for(P=0,k=i[2];k>u[2];)++P,c=this.getTransform(e,M*P),f.replay(g,c,a,r,E),k-=M}if(Jo(g,a,I/2,R/2),b&&this.dispatchRenderEvent(g,e,c),g!=t){if(y){var O=t.globalAlpha;t.globalAlpha=n.opacity,t.drawImage(g.canvas,-m,-v),t.globalAlpha=O}else t.drawImage(g.canvas,-m,-v);g.translate(-m,-v)}y||(g.globalAlpha=w)}d&&t.restore()},e.prototype.composeFrame=function(t,e,n){var i=this.getTransform(t,0);this.preCompose(n,t,i),this.compose(n,t,e),this.postCompose(n,t,e,i)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){if(this.replayGroup_){var r=e.viewState.resolution,l=e.viewState.rotation,s=this.getLayer(),a={};return this.replayGroup_.forEachFeatureAtCoordinate(t,r,l,n,{},(function(t){var e=Z(t);if(!(e in a))return a[e]=!0,i.call(o,t,s)}),null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var n=this.getLayer(),i=n.getSource(),o=t.viewHints[0],r=t.viewHints[1],l=n.getUpdateWhileAnimating(),s=n.getUpdateWhileInteracting();if(!this.dirty_&&!l&&o||!s&&r)return!0;var a=t.extent,u=t.viewState,h=u.projection,c=u.resolution,p=t.pixelRatio,d=n.getRevision(),f=n.getRenderBuffer(),g=n.getRenderOrder();void 0===g&&(g=$r);var _=Ue(a,f*c),m=u.projection.getExtent();if(i.getWrapX()&&u.projection.canWrapX()&&!Qe(m,t.extent)){var v=bn(m),y=Math.max(bn(_)/2,v);_[0]=m[0]-y,_[2]=m[2]+y}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==g&&Qe(this.renderedExtent_,_))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var b=new Jr(el(c,p),_,c,p,i.getOverlaps(),this.declutterTree_,n.getRenderBuffer());i.loadFeatures(_,c,h);var x=(function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,c)),e){var o=this.renderFeature(t,c,p,e,b);this.dirty_=this.dirty_||o}}).bind(this);if(g){var C=[];i.forEachFeatureInExtent(_,(function(t){C.push(t)})),C.sort(g);for(var S=0,w=C.length;S<w;++S)x(C[S])}else i.forEachFeatureInExtent(_,x);return b.finish(),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=g,this.renderedExtent_=_,this.replayGroup_=b,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,i,o){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var l=0,s=i.length;l<s;++l)r=nl(o,t,i[l],tl(e,n),this.handleStyleImageChange_,this)||r;else r=nl(o,t,i,tl(e,n),this.handleStyleImageChange_,this);return r},e}(mr);il.handles=function(t){return"VECTOR"===t.getType()},il.create=function(t,e){return new il(e)};var ol=il,rl={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"]},ll={image:["Default"],hybrid:["Image","Text","Default"],vector:zr},sl=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?Ir()(9,void 0):null,this.dirty_=!1,this.tmpTransform_=[1,0,0,1,0,0];var n=e.getRenderMode();this.zDirection="vector"===n?1:0,"vector"!==n&&(this.context=ji()),rt(Yo,"clear",this.handleFontsChanged_,this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.disposeInternal=function(){st(Yo,"clear",this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,n,i,o,r){var l=t.prototype.getTile.call(this,e,n,i,o,r);return 2===l.getState()&&(this.createReplayGroup_(l,o,r),this.context&&this.renderTileImage_(l,o,r)),l},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,n){var i=this.getLayer().getRevision();return this.renderedLayerRevision_!=i&&(this.renderedTiles.length=0),this.renderedLayerRevision_=i,t.prototype.prepareFrame.call(this,e,n)},e.prototype.createReplayGroup_=function(t,e,n){var i=this,o=this.getLayer(),r=o.getRevision(),l=o.getRenderOrder()||null,s=t.getReplayState(o);if(s.dirty||s.renderedRevision!=r||s.renderedRenderOrder!=l){for(var a=o.getSource(),u=a.getTileGrid(),h=a.getTileGridForProjection(n).getResolution(t.tileCoord[0]),c=t.extent,p=function(r,p){var d=t.getTile(t.tileKeys[r]);if(2==d.getState()){var f=u.getTileCoordExtent(d.tileCoord),g=mn(c,f),_=rn(f,g)?null:Ue(g,o.getRenderBuffer()*h,i.tmpExtent),m=d.getProjection(),v=!1;Qn(n,m)||(v=!0,d.setProjection(n)),s.dirty=!1;var y=new Jr(0,g,h,e,a.getOverlaps(),i.declutterTree_,o.getRenderBuffer()),b=tl(h,e),x=function(t){var e,n=t.getStyleFunction()||o.getStyleFunction();if(n&&(e=n(t,h)),e){var i=this.renderFeature(t,b,e,y);this.dirty_=this.dirty_||i,s.dirty=s.dirty||i}},C=d.getFeatures();l&&l!==s.renderedRenderOrder&&C.sort(l);for(var S=0,w=C.length;S<w;++S){var T=C[S];v&&(m.getUnits()==In.TILE_PIXELS&&(m.setWorldExtent(f),m.setExtent(d.getExtent())),T.getGeometry().transform(m,n)),_&&!xn(_,T.getGeometry().getExtent())||x.call(i,T)}y.finish(),d.setReplayGroup(o,t.tileCoord.toString(),y)}},d=0,f=t.tileKeys.length;d<f;++d)p(d);s.renderedRevision=r,s.renderedRenderOrder=l}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o){var r=e.viewState.resolution,l=e.viewState.rotation;n=null==n?0:n;var s,a,u,h,c=this.getLayer(),p={},d=this.renderedTiles;for(u=0,h=d.length;u<h;++u){var f=d[u];if(Je(s=Ue(f.extent,n*r,s),t))for(var g=0,_=f.tileKeys.length;g<_;++g){var m=f.getTile(f.tileKeys[g]);if(2==m.getState()){var v=m.getReplayGroup(c,f.tileCoord.toString());a=a||v.forEachFeatureAtCoordinate(t,r,l,n,{},(function(t){var e=Z(t);if(!(e in p))return p[e]=!0,i.call(o,t,c)}),null)}}}return a},e.prototype.getReplayTransform_=function(t,e){var n=this.getLayer().getSource().getTileGrid(),i=t.tileCoord,o=n.getResolution(i[0]),r=e.viewState,l=e.pixelRatio,s=r.resolution/l,a=n.getTileCoordExtent(i,this.tmpExtent),u=r.center,h=vn(a),c=e.size,p=Math.round(l*c[0]/2),d=Math.round(l*c[1]/2);return pi(this.tmpTransform_,p,d,o/s,o/s,r.rotation,(h[0]-u[0])/o,(u[1]-h[1])/o)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,n,i){var o=this.getLayer(),r=o.getRenderMode();if("image"!=r){var l,s,a=o.getDeclutter()?{}:null,u=o.getSource(),h=ll[r],c=n.pixelRatio,p=n.viewState.rotation,d=n.size;p&&Jo(e,-p,l=Math.round(c*d[0]/2),s=Math.round(c*d[1]/2)),a&&this.declutterTree_.clear();for(var f=n.viewHints,g=!(f[0]||f[1]),_=this.renderedTiles,m=u.getTileGridForProjection(n.viewState.projection),v=[],y=[],b=_.length-1;b>=0;--b){var x=_[b];if(5!=x.getState())for(var C=x.tileCoord,S=m.getTileCoordExtent(C,this.tmpExtent)[0]-x.extent[0],w=void 0,T=0,E=x.tileKeys.length;T<E;++T){var I=x.getTile(x.tileKeys[T]);if(2==I.getState()){var R=I.getReplayGroup(o,C.toString());if(R&&R.hasReplays(h)){w||(w=this.getTransform(n,S));var k=I.tileCoord[0],M=R.getClipCoords(w);e.save(),e.globalAlpha=i.opacity;for(var P=0,O=v.length;P<O;++P){var L=v[P];k<y[P]&&(e.beginPath(),e.moveTo(M[0],M[1]),e.lineTo(M[2],M[3]),e.lineTo(M[4],M[5]),e.lineTo(M[6],M[7]),e.moveTo(L[6],L[7]),e.lineTo(L[4],L[5]),e.lineTo(L[2],L[3]),e.lineTo(L[0],L[1]),e.clip())}R.replay(e,w,p,{},g,h,a),e.restore(),v.push(M),y.push(k)}}}}a&&function(t,e,n,i){for(var o=Object.keys(t).map(Number).sort(fe),r={},l=0,s=o.length;l<s;++l)for(var a=t[o[l].toString()],u=0,h=a.length;u<h;){var c=a[u++],p=a[u++];c.replay(e,p,n,r,i)}}(a,e,p,g),p&&Jo(e,p,l,s)}t.prototype.postCompose.call(this,e,n,i)},e.prototype.renderFeature=function(t,e,n,i){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var r=0,l=n.length;r<l;++r)o=nl(i,t,n[r],e,this.handleStyleImageChange_,this)||o;else o=nl(i,t,n,e,this.handleStyleImageChange_,this);return o},e.prototype.renderTileImage_=function(t,e,n){var i=this.getLayer(),o=t.getReplayState(i),r=i.getRevision(),l=rl[i.getRenderMode()];if(l&&o.renderedTileRevision!==r){o.renderedTileRevision=r;var s=t.wrappedTileCoord,a=s[0],u=i.getSource(),h=u.getTileGridForProjection(n),c=h.getResolution(a),p=t.getContext(i),d=u.getTilePixelSize(a,e,n);p.canvas.width=d[0],p.canvas.height=d[1];for(var f=h.getTileCoordExtent(s,this.tmpExtent),g=0,_=t.tileKeys.length;g<_;++g){var m=t.getTile(t.tileKeys[g]);if(2==m.getState()){var v=e/c,y=ri(this.tmpTransform_);hi(y,v,-v),ci(y,-f[0],-f[3]),m.getReplayGroup(i,t.tileCoord.toString()).replay(p,y,0,{},!0,l)}}}},e}(Tr);sl.handles=function(t){return"VECTOR_TILE"===t.getType()},sl.create=function(t,e){return new sl(e)};var al=sl,ul=function(t){function e(e){(e=J({},e)).controls||(e.controls=function(t){var e={},n=new wt;return(void 0===e.zoom||e.zoom)&&n.push(new no(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new eo(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new $i(e.attributionOptions)),n}()),e.interactions||(e.interactions=function(t){var e={},n=new wt,i=new oo(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new wo),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new co({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new So({condition:e.onFocusOnly?fo:void 0,kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new Fo),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new Do({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Mo),n.push(new Oo({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new Lo({condition:e.onFocusOnly?fo:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Ro({duration:e.zoomDuration})),n}()),t.call(this,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createRenderer=function(){var t=new _r(this);return t.registerLayerRenderers([br,Tr,ol,al]),t},e}(Hi);function hl(t,e){return[[-1/0,-1/0,1/0,1/0]]}function cl(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var pl=function(t){function e(e){t.call(this),this.projection_=Hn(e.projection),this.attributions_=cl(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return H()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=cl(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Ct),dl=function(t){this.rbush_=Ir()(t,void 0),this.items_={}};dl.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Z(e)]=n},dl.prototype.load=function(t,e){for(var n=new Array(e.length),i=0,o=e.length;i<o;i++){var r=t[i],l=e[i],s={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:l};n[i]=s,this.items_[Z(l)]=s}this.rbush_.load(n)},dl.prototype.remove=function(t){var e=Z(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},dl.prototype.update=function(t,e){var n=this.items_[Z(e)];rn([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},dl.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},dl.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map((function(t){return t.value}))},dl.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},dl.prototype.forEachInExtent=function(t,e,n){return this.forEach_(this.getInExtent(t),e,n)},dl.prototype.forEach_=function(t,e,n){for(var i,o=0,r=t.length;o<r;o++)if(i=e.call(n,t[o]))return i;return i},dl.prototype.isEmpty=function(){return tt(this.items_)},dl.prototype.clear=function(){this.rbush_.clear(),this.items_={}},dl.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return nn(e.minX,e.minY,e.maxX,e.maxY,t)},dl.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]};var fl=dl,gl=function(t){function e(e,n){t.call(this,e),this.feature=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_t),_l=function(t){function e(e){var n=e||{};t.call(this,{attributions:n.attributions,projection:void 0,state:"ready",wrapX:void 0===n.wrapX||n.wrapX}),this.loader_=dt,this.format_=n.format,this.overlaps_=null==n.overlaps||n.overlaps,this.url_=n.url,void 0!==n.loader?this.loader_=n.loader:void 0!==this.url_&&(Ie(this.format_,7),this.loader_=function(t,e,n,i){return function(o,r,l){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(o,r,l):t,!0),"arraybuffer"==e.getType()&&(s.responseType="arraybuffer"),s.onload=(function(t){if(!s.status||s.status>=200&&s.status<300){var o,r=e.getType();"json"==r||"text"==r?o=s.responseText:"xml"==r?(o=s.responseXML)||(o=(new DOMParser).parseFromString(s.responseText,"application/xml")):"arraybuffer"==r&&(o=s.response),o?n.call(this,e.readFeatures(o,{featureProjection:l}),e.readProjection(o),e.getLastExtent()):i.call(this)}else i.call(this)}).bind(this),s.onerror=(function(){i.call(this)}).bind(this),s.send()}}(this.url_,this.format_,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),dt)),this.strategy_=void 0!==n.strategy?n.strategy:hl;var i,o,r=void 0===n.useSpatialIndex||n.useSpatialIndex;this.featuresRtree_=r?new fl:null,this.loadedExtentsRtree_=new fl,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(i=n.features).getArray()),r||void 0!==i||(i=new wt(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==i&&this.bindFeaturesCollection_(i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Z(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new gl("addfeature",t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[rt(e,"change",this.handleFeatureChange_,this),rt(e,"propertychange",this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var n=!0,i=e.getId();return void 0!==i?i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e:(Ie(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],i=[],o=0,r=t.length;o<r;o++){var l=t[o],s=Z(l);this.addToIndex_(s,l)&&n.push(l)}for(var a=0,u=n.length;a<u;a++){var h=n[a],c=Z(h);this.setupChangeEvents_(c,h);var p=h.getGeometry();if(p){var d=p.getExtent();e.push(d),i.push(h)}else this.nullGeometryFeatures_[c]=h}this.featuresRtree_&&this.featuresRtree_.load(e,i);for(var f=0,g=n.length;f<g;f++)this.dispatchEvent(new gl("addfeature",n[f]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;rt(this,"addfeature",(function(n){e||(e=!0,t.push(n.feature),e=!1)})),rt(this,"removefeature",(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),rt(t,"add",(function(t){e||(e=!0,this.addFeature(t.element),e=!1)}),this),rt(t,"remove",(function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}),this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(at);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var i=new gl("clear");this.dispatchEvent(i),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var i=e(n);if(i)return i}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),tt(this.nullGeometryFeatures_)||me(t,$(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],i=t[1],o=null,r=[NaN,NaN],l=1/0,s=[-1/0,-1/0,1/0,1/0],a=e||ct;return this.featuresRtree_.forEachInExtent(s,(function(t){if(a(t)){var e=t.getGeometry(),u=l;if((l=e.closestPointXY(n,i,r,l))<u){o=t;var h=Math.sqrt(l);s[0]=n-h,s[1]=i-h,s[2]=n+h,s[3]=i+h}}})),o},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,n=Z(e),i=e.getGeometry();if(i){var o=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var r=e.getId();if(void 0!==r){var l=r.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[l]=e):this.idIndex_[l]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[l]=e)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[n]=e);this.changed(),this.dispatchEvent(new gl("changefeature",e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Z(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&tt(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,n){var i=this,o=this.loadedExtentsRtree_,r=this.strategy_(t,e);this.loading=!1;for(var l=function(t,l){var s=r[t];o.forEachInExtent(s,(function(t){return Qe(t.extent,s)}))||(i.loader_.call(i,s,e,n),o.insert(s,{extent:s.slice()}),i.loading=i.loader_!==dt)},s=0,a=r.length;s<a;++s)l(s)},e.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,(function(n){if(rn(n.extent,t))return e=n,!0})),e&&n.remove(e)},e.prototype.removeFeature=function(t){var e=Z(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Z(t);this.featureChangeKeys_[e].forEach(at),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new gl("removefeature",t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(pl),ml=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};ml.prototype.clone=function(){return new ml({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},ml.prototype.getOpacity=function(){return this.opacity_},ml.prototype.getRotateWithView=function(){return this.rotateWithView_},ml.prototype.getRotation=function(){return this.rotation_},ml.prototype.getScale=function(){return this.scale_},ml.prototype.getSnapToPixel=function(){return!1},ml.prototype.getAnchor=function(){return H()},ml.prototype.getImage=function(t){return H()},ml.prototype.getHitDetectionImage=function(t){return H()},ml.prototype.getImageState=function(){return H()},ml.prototype.getImageSize=function(){return H()},ml.prototype.getHitDetectionImageSize=function(){return H()},ml.prototype.getOrigin=function(){return H()},ml.prototype.getSize=function(){return H()},ml.prototype.setOpacity=function(t){this.opacity_=t},ml.prototype.setRotateWithView=function(t){this.rotateWithView_=t},ml.prototype.setRotation=function(t){this.rotation_=t},ml.prototype.setScale=function(t){this.scale_=t},ml.prototype.setSnapToPixel=function(t){},ml.prototype.listenImageChange=function(t,e){return H()},ml.prototype.load=function(){H()},ml.prototype.unlistenImageChange=function(t,e){H()};var vl=ml,yl=function(t){function e(e){var n=e||{};t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,atlasManager:n.atlasManager})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(function(t){function e(e){t.call(this,{opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return 2},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,n,i="",o="",r=0,l=null,s=0,a=0;this.stroke_&&(null===(n=this.stroke_.getColor())&&(n=jo),n=lr(n),void 0===(a=this.stroke_.getWidth())&&(a=1),l=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),Lt||(l=null,s=0),void 0===(o=this.stroke_.getLineJoin())&&(o="round"),void 0===(i=this.stroke_.getLineCap())&&(i="round"),void 0===(r=this.stroke_.getMiterLimit())&&(r=10));var u=2*(this.radius_+a)+1,h={strokeStyle:n,strokeWidth:a,size:u,lineCap:i,lineDash:l,lineDashOffset:s,lineJoin:o,miterLimit:r};if(void 0===t){var c=ji(u,u);this.canvas_=c.canvas,e=u=this.canvas_.width,this.draw_(h,c,0,0),this.createHitDetectionCanvas_(h)}else{u=Math.round(u);var p,d=!this.fill_;d&&(p=this.drawHitDetectionCanvas_.bind(this,h));var f=this.getChecksum(),g=t.add(f,u,u,this.draw_.bind(this,h),p);this.canvas_=g.image,this.origin_=[g.offsetX,g.offsetY],e=g.image.width,d?(this.hitDetectionCanvas_=g.hitImage,this.hitDetectionImageSize_=[g.hitImage.width,g.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[u/2,u/2],this.size_=[u,u],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,n,i){var o,r,l;e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var a=void 0!==this.radius2_?this.radius2_:this.radius_;for(a!==this.radius_&&(s*=2),o=0;o<=s;o++)r=2*o*Math.PI/s-Math.PI/2+this.angle_,e.lineTo(t.size/2+(l=o%2==0?this.radius_:a)*Math.cos(r),t.size/2+l*Math.sin(r))}if(this.fill_){var u=this.fill_.getColor();null===u&&(u=No),e.fillStyle=lr(u),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=ji(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,n,i){e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();var o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var r,l,s,a=void 0!==this.radius2_?this.radius2_:this.radius_;for(a!==this.radius_&&(o*=2),r=0;r<=o;r++)s=2*r*Math.PI/o-Math.PI/2+this.angle_,e.lineTo(t.size/2+(l=r%2==0?this.radius_:a)*Math.cos(s),t.size/2+l*Math.sin(s))}e.fillStyle=nr(No),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var n="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[n,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(vl)),bl=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};bl.prototype.clone=function(){var t=this.getColor();return new bl({color:Array.isArray(t)?t.slice():t||void 0})},bl.prototype.getColor=function(){return this.color_},bl.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},bl.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;this.checksum_=t?Array.isArray(t)||"string"==typeof t?"f"+nr(t):Z(this.color_):"f-"}return this.checksum_};var xl=bl,Cl=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};Cl.prototype.clone=function(){var t=this.getColor();return new Cl({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},Cl.prototype.getColor=function(){return this.color_},Cl.prototype.getLineCap=function(){return this.lineCap_},Cl.prototype.getLineDash=function(){return this.lineDash_},Cl.prototype.getLineDashOffset=function(){return this.lineDashOffset_},Cl.prototype.getLineJoin=function(){return this.lineJoin_},Cl.prototype.getMiterLimit=function(){return this.miterLimit_},Cl.prototype.getWidth=function(){return this.width_},Cl.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Cl.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},Cl.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},Cl.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},Cl.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},Cl.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},Cl.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},Cl.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.checksum_+=this.color_?"string"==typeof this.color_?this.color_:Z(this.color_):"-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var Sl=Cl,wl=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Il,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};wl.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new wl({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},wl.prototype.getRenderer=function(){return this.renderer_},wl.prototype.setRenderer=function(t){this.renderer_=t},wl.prototype.getGeometry=function(){return this.geometry_},wl.prototype.getGeometryFunction=function(){return this.geometryFunction_},wl.prototype.getFill=function(){return this.fill_},wl.prototype.setFill=function(t){this.fill_=t},wl.prototype.getImage=function(){return this.image_},wl.prototype.setImage=function(t){this.image_=t},wl.prototype.getStroke=function(){return this.stroke_},wl.prototype.setStroke=function(t){this.stroke_=t},wl.prototype.getText=function(){return this.text_},wl.prototype.setText=function(t){this.text_=t},wl.prototype.getZIndex=function(){return this.zIndex_},wl.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Il,this.geometry_=t},wl.prototype.setZIndex=function(t){this.zIndex_=t};var Tl=null;function El(t,e){if(!Tl){var n=new xl({color:"rgba(255,255,255,0.4)"}),i=new Sl({color:"#3399CC",width:1.25});Tl=[new wl({image:new yl({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return Tl}function Il(t){return t.getGeometry()}var Rl=wl,kl=function(t){function e(e){var n=e||{},i=J({},n);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,t.call(this,i),this.declutter_=void 0!==n.declutter&&n.declutter,this.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(n.style),this.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,this.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,this.renderMode_=n.renderMode||"vector",this.type="VECTOR"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get("renderOrder")},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set("renderOrder",t)},e.prototype.setStyle=function(t){var e,n,i;this.style_=void 0!==t?t:El,this.styleFunction_=null===t?void 0:("function"==typeof(e=this.style_)?n=e:(Array.isArray(e)?i=e:(Ie("function"==typeof e.getZIndex,41),i=[e]),n=function(){return i}),n),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(Ji),Ml=function(t){function e(e){t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,rt(this,xt(this.geometryName_),this.handleGeometryChanged_,this),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(at(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=rt(t,"change",this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){var e,n;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?n=e:(Ie("function"==typeof e.getZIndex,41),n=[e]),function(){return n}):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){st(this,xt(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,rt(this,xt(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(Ct),Pl=function(t){function e(e,n,i){t.call(this);var o=i||{};this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=void 0===o.transition?250:o.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.changed=function(){this.dispatchEvent("change")},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else this.transitionStarts_[t]=n=e;var i=e-n+1e3/60;return i>=this.transition_?1:Ye(i/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(mt);function Ol(){var t=ji(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Ll=function(t){function e(e,n,i,o,r,l){t.call(this,e,n,l),this.crossOrigin_=o,this.src_=i,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.tileLoadFunction_=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.disposeInternal=function(){1==this.state&&(this.unlistenImage_(),this.image_=Ol()),this.interimTile&&this.interimTile.dispose(),this.state=5,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=Ol(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;this.state=t.naturalWidth&&t.naturalHeight?2:4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.imageListenerKeys_=[lt(this.image_,"error",this.handleImageError_,this),lt(this.image_,"load",this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(at),this.imageListenerKeys_=null},e}(Pl);function Fl(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function Dl(t,e,n){return t+"/"+e+"/"+n}function Al(t){return Dl(t[0],t[1],t[2])}var Bl=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),n=e.tileCoord[0].toString();if(n in t&&t[n].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=(e=this.peekFirstKey(),e.split("/").map(Number))[0];this.forEach((function(e){e.tileCoord[0]!==t&&(this.remove(Al(e.tileCoord)),e.dispose())}),this)}var e},e}(zo);function zl(t,e,n,i){var o=n-t,r=i-e,l=Math.sqrt(o*o+r*r);return[Math.round(n+o/l),Math.round(i+r/l)]}var Nl=function(t,e,n,i,o){this.sourceProj_=t,this.targetProj_=e;var r={},l=ti(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return r[e]||(r[e]=l(t)),r[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&bn(i)==bn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?bn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?bn(this.targetProj_.getExtent()):null;var s=vn(n),a=yn(n),u=pn(n),h=cn(n),c=this.transformInv_(s),p=this.transformInv_(a),d=this.transformInv_(u),f=this.transformInv_(h);if(this.addQuad_(s,a,u,h,c,p,d,f,10),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach((function(t,e,n){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach((function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}).bind(this))}r={}};Nl.prototype.addTriangle_=function(t,e,n,i,o,r){this.triangles_.push({source:[i,o,r],target:[t,e,n]})},Nl.prototype.addQuad_=function(t,e,n,i,o,r,l,s,a){var u=He([o,r,l,s]),h=this.sourceWorldWidth_?bn(u)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&h>.5&&h<1,d=!1;if(a>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=bn(He([t,e,n,i]))/this.targetWorldWidth_>.25||d),!p&&this.sourceProj_.isGlobal()&&h&&(d=h>.25||d)),d||!this.maxSourceExtent_||xn(u,this.maxSourceExtent_)){if(!(d||isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(a>0))return;d=!0}if(a>0){if(!d){var f,g=this.transformInv_([(t[0]+n[0])/2,(t[1]+n[1])/2]);f=p?(De(o[0],c)+De(l[0],c))/2-De(g[0],c):(o[0]+l[0])/2-g[0];var _=(o[1]+l[1])/2-g[1];d=f*f+_*_>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var m=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(m),y=[(i[0]+t[0])/2,(i[1]+t[1])/2],b=this.transformInv_(y);this.addQuad_(t,e,m,y,o,r,v,b,a-1),this.addQuad_(y,m,n,i,b,v,l,s,a-1)}else{var x=[(t[0]+e[0])/2,(t[1]+e[1])/2],C=this.transformInv_(x),S=[(n[0]+i[0])/2,(n[1]+i[1])/2],w=this.transformInv_(S);this.addQuad_(t,x,S,i,o,C,w,s,a-1),this.addQuad_(x,e,n,S,C,r,l,w,a-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,i,o,l,s),this.addTriangle_(t,e,n,o,r,l)}},Nl.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,i){var o=e.source;sn(t,o[0]),sn(t,o[1]),sn(t,o[2])})),t},Nl.prototype.getTriangles=function(){return this.triangles_};var Gl=Nl,jl=function(t){function e(e,n,i,o,r,l,s,a,u,h,c){t.call(this,r,0),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=o,this.wrappedTileCoord_=l||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var p=o.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent(),f=this.sourceTileGrid_.getExtent(),g=d?mn(p,d):p;if(0!==hn(g)){var _=e.getExtent();_&&(f=f?mn(f,_):_);var m=o.getResolution(this.wrappedTileCoord_[0]),v=function(t,e,n,i){var o=ei(n,e,t),r=Un(e,i,n),l=e.getMetersPerUnit();void 0!==l&&(r*=l);var s=t.getMetersPerUnit();void 0!==s&&(r/=s);var a=t.getExtent();if(!a||Je(a,o)){var u=Un(t,r,o)/r;isFinite(u)&&u>0&&(r/=u)}return r}(e,i,dn(g),m);if(!isFinite(v)||v<=0)this.state=4;else if(this.triangulation_=new Gl(e,i,g,f,v*(void 0!==h?h:.5)),0!==this.triangulation_.getTriangles().length){this.sourceZ_=n.getZForResolution(v);var y=this.triangulation_.calculateSourceExtent();if(f&&(e.canWrapX()?(y[1]=Me(y[1],f[1],f[3]),y[3]=Me(y[3],f[1],f[3])):y=mn(y,f)),hn(y)){for(var b=n.getTileRangeForExtentAndZ(y,this.sourceZ_),x=b.minX;x<=b.maxX;x++)for(var C=b.minY;C<=b.maxY;C++){var S=u(this.sourceZ_,x,C,s);S&&this.sourceTiles_.push(S)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}else this.state=4}else this.state=4}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.disposeInternal=function(){1==this.state&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach((function(e,n,i){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}).bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],o="number"==typeof n?n:n[1],r=this.targetTileGrid_.getResolution(e),l=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,n,i,o,r,l,s,a,u,h){var c=ji(Math.round(n*t),Math.round(n*e));if(0===a.length)return c.canvas;c.scale(n,n);var p=[1/0,1/0,-1/0,-1/0];a.forEach((function(t,e,n){ln(p,t.extent)}));var d=bn(p),f=_n(p),g=ji(Math.round(n*d/i),Math.round(n*f/i)),_=n/i;a.forEach((function(t,e,n){var i=t.extent[0]-p[0],o=-(t.extent[3]-p[3]),r=bn(t.extent),l=_n(t.extent);g.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,i*_,o*_,r*_,l*_)}));var m=vn(l);return s.getTriangles().forEach((function(t,e,o){var l=t.source,s=t.target,a=l[0][0],u=l[0][1],h=l[1][0],d=l[1][1],f=l[2][0],_=l[2][1],v=(s[0][0]-m[0])/r,y=-(s[0][1]-m[1])/r,b=(s[1][0]-m[0])/r,x=-(s[1][1]-m[1])/r,C=(s[2][0]-m[0])/r,S=-(s[2][1]-m[1])/r,w=a,T=u;a=0,u=0;var E=function(t){for(var e=t.length,n=0;n<e;n++){for(var i=n,o=Math.abs(t[n][n]),r=n+1;r<e;r++){var l=Math.abs(t[r][n]);l>o&&(o=l,i=r)}if(0===o)return null;var s=t[i];t[i]=t[n],t[n]=s;for(var a=n+1;a<e;a++)for(var u=-t[a][n]/t[n][n],h=n;h<e+1;h++)n==h?t[a][h]=0:t[a][h]+=u*t[n][h]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*c[p]}return c}([[h-=w,d-=T,0,0,b-v],[f-=w,_-=T,0,0,C-v],[0,0,h,d,x-y],[0,0,f,_,S-y]]);if(E){c.save(),c.beginPath();var I=(v+b+C)/3,R=(y+x+S)/3,k=zl(I,R,v,y),M=zl(I,R,b,x),P=zl(I,R,C,S);c.moveTo(M[0],M[1]),c.lineTo(k[0],k[1]),c.lineTo(P[0],P[1]),c.clip(),c.transform(E[0],E[2],E[1],E[3],v,y),c.translate(p[0]-w,p[3]-T),c.scale(i/n,-i/n),c.drawImage(g.canvas,0,0),c.restore()}})),h&&(c.save(),c.strokeStyle="black",c.lineWidth=1,s.getTriangles().forEach((function(t,e,n){var i=t.target,o=(i[0][0]-m[0])/r,l=-(i[0][1]-m[1])/r,s=(i[1][0]-m[0])/r,a=-(i[1][1]-m[1])/r,u=(i[2][0]-m[0])/r,h=-(i[2][1]-m[1])/r;c.beginPath(),c.moveTo(s,a),c.lineTo(o,l),c.lineTo(u,h),c.closePath(),c.stroke()})),c.restore()),c.canvas}(i,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),r,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(e,n,i){var o=e.getState();if(0==o||1==o){t++;var r=rt(e,"change",(function(n){var i=e.getState();2!=i&&3!=i&&4!=i||(at(r),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)}}).bind(this)),this.sourceTiles_.forEach((function(t,e,n){0==t.getState()&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(at),this.sourcesListenerKeys_=null},e}(Pl);function ql(t,e){var n=/\{z\}/g,i=/\{x\}/g,o=/\{y\}/g,r=/\{-y\}/g;return function(l,s,a){return l?t.replace(n,l[0].toString()).replace(i,l[1].toString()).replace(o,(function(){return(-l[2]-1).toString()})).replace(r,(function(){var t=e.getFullTileRange(l[0]);return Ie(t,55),(t.getHeight()+l[2]).toString()})):void 0}}function Yl(t,e,n){}var Xl=[0,0,0],Kl=function(t){var e,n,i;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Ie((n=function(t,e){return e-t}||fe,(e=this.resolutions_).every((function(t,i){if(0===i)return!0;var o=n(e[i-1],t);return!(o>0||0===o)}))),17),!t.origins)for(var o=0,r=this.resolutions_.length-1;o<r;++o)if(i){if(this.resolutions_[o]/this.resolutions_[o+1]!==i){i=void 0;break}}else i=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Ie(this.origins_.length==this.resolutions_.length,20));var l=t.extent;void 0===l||this.origin_||this.origins_||(this.origin_=vn(l)),Ie(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Ie(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Ie(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==l?l:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new Sr(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):l&&this.calculateTileRanges_(l)};Kl.prototype.forEachTileCoord=function(t,e,n){for(var i=this.getTileRangeForExtentAndZ(t,e),o=i.minX,r=i.maxX;o<=r;++o)for(var l=i.minY,s=i.maxY;l<=s;++l)n([e,o,l])},Kl.prototype.forEachTileCoordParentTileRange=function(t,e,n,i,o){var r,l,s,a=null,u=t[0]-1;for(2===this.zoomFactor_?(l=t[1],s=t[2]):a=this.getTileCoordExtent(t,o);u>=this.minZoom;){if(r=2===this.zoomFactor_?Cr(l=Math.floor(l/2),l,s=Math.floor(s/2),s,i):this.getTileRangeForExtentAndZ(a,u,i),e.call(n,u,r))return!0;--u}return!1},Kl.prototype.getExtent=function(){return this.extent_},Kl.prototype.getMaxZoom=function(){return this.maxZoom},Kl.prototype.getMinZoom=function(){return this.minZoom},Kl.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},Kl.prototype.getResolution=function(t){return this.resolutions_[t]},Kl.prototype.getResolutions=function(){return this.resolutions_},Kl.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],o=2*t[2];return Cr(i,i+1,o,o+1,e)}var r=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},Kl.prototype.getTileRangeExtent=function(t,e,n){var i=this.getOrigin(t),o=this.getResolution(t),r=Wi(this.getTileSize(t),this.tmpSize_);return nn(i[0]+e.minX*r[0]*o,i[1]+e.minY*r[1]*o,i[0]+(e.maxX+1)*r[0]*o,i[1]+(e.maxY+1)*r[1]*o,n)},Kl.prototype.getTileRangeForExtentAndZ=function(t,e,n){var i=Xl;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i);var o=i[1],r=i[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,i),Cr(o,i[1],r,i[2],n)},Kl.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Wi(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]+(t[2]+.5)*i[1]*n]},Kl.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=Wi(this.getTileSize(t[0]),this.tmpSize_),r=n[0]+t[1]*o[0]*i,l=n[1]+t[2]*o[1]*i;return nn(r,l,r+o[0]*i,l+o[1]*i,e)},Kl.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},Kl.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,o){var r=this.getZForResolution(n),l=n/this.getResolution(r),s=this.getOrigin(r),a=Wi(this.getTileSize(r),this.tmpSize_),u=i?0:.5,h=Math.floor((t-s[0])/n+(i?.5:0)),c=Math.floor((e-s[1])/n+u),p=l*h/a[0],d=l*c/a[1];return i?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),Fl(r,p,d,o)},Kl.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,o){var r=this.getOrigin(n),l=this.getResolution(n),s=Wi(this.getTileSize(n),this.tmpSize_),a=i?0:.5,u=Math.floor((t-r[0])/l+(i?.5:0)),h=Math.floor((e-r[1])/l+a),c=u/s[0],p=h/s[1];return i?(c=Math.ceil(c)-1,p=Math.ceil(p)-1):(c=Math.floor(c),p=Math.floor(p)),Fl(n,c,p,o)},Kl.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},Kl.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},Kl.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},Kl.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},Kl.prototype.getZForResolution=function(t,e){return Me(ge(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},Kl.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n};var Wl=Kl;function Hl(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return r=Ul(o=Zl(t),void 0,void 0),new Wl({extent:o,origin:fn(o,"top-left"),resolutions:r,tileSize:void 0});var o,r}(t),t.setDefaultTileGrid(e)),e}function Ul(t,e,n){for(var i=void 0!==e?e:42,o=_n(t),r=bn(t),l=Wi(void 0!==n?n:256),s=Math.max(r/l[0],o/l[1]),a=i+1,u=new Array(a),h=0;h<a;++h)u[h]=s/Math.pow(2,h);return u}function Zl(t){var e=(t=Hn(t)).getExtent();if(!e){var n=180*En[In.DEGREES]/t.getMetersPerUnit();e=nn(-n,-n,n,n)}return e}var Vl=function(t){function e(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new Bl(e.cacheSize),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,i){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var r,l,s,a=!0,u=n.minX;u<=n.maxX;++u)for(var h=n.minY;h<=n.maxY;++h)l=Dl(e,u,h),s=!1,o.containsKey(l)&&(s=2===(r=o.get(l)).getState())&&(s=!1!==i(r)),s||(a=!1);return a},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,i,o){return H()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Hl(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Qn(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var i,o,r,l=this.getTileGridForProjection(n),s=this.getTilePixelRatio(e),a=Wi(l.getTileSize(t),this.tmpSize);return 1==s?a:(void 0===(r=this.tmpSize)&&(r=[0,0]),r[0]=(i=a)[0]*(o=s)+.5|0,r[1]=i[1]*o+.5|0,r)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var i=e[0],o=t.getTileCoordCenter(e),r=Zl(n);if(Je(r,o))return e;var l=bn(r),s=Math.ceil((r[0]-o[0])/l);return o[0]+=l*s,t.getTileCoordForCoordAndZ(o,i)}(i,t,n)),function(t,e){var n=t[0],i=t[1],o=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var r,l=e.getExtent();return!(r=l?e.getTileRangeForExtentAndZ(l,n):e.getFullTileRange(n))||r.containsXY(i,o)}(t,i)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e.prototype.useTile=function(t,e,n,i){},e}(pl),Jl=function(t){function e(e,n){t.call(this,e),this.tile=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_t);function Ql(t,e){t.getImage().src=e}var $l=function(t){function e(e){var n=e||{},i=void 0!==n.projection?n.projection:"EPSG:3857",o=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||Hn("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Ul(n,e.maxZoom,e.tileSize)};return new Wl(i)}({extent:Zl(i),maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:n.opaque,projection:i,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ql,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:Ll,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var i in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[i];o.expireCache(o==n?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Qn(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Qn(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Qn(e,t)){var n=Z(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Hl(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Qn(e,t))return this.tileCache;var n=Z(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Bl(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,i,o,r){var l=[t,e,n],s=this.getTileCoordForTileUrlFunction(l,o),a=s?this.tileUrlFunction(s,i,o):void 0,u=new this.tileClass(l,void 0!==a?0:4,void 0!==a?a:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,rt(u,"change",this.handleTileChange,this),u},e.prototype.getTile=function(t,e,n,i,o){var r=this.getProjection();if(r&&o&&!Qn(r,o)){var l,s=this.getTileCacheForProjection(o),a=[t,e,n],u=Al(a);s.containsKey(u)&&(l=s.get(u));var h=this.getKey();if(l&&l.key==h)return l;var c=this.getTileGridForProjection(r),p=this.getTileGridForProjection(o),d=this.getTileCoordForTileUrlFunction(a,o),f=new jl(r,c,o,p,a,d,this.getTilePixelRatio(i),this.getGutter(),(function(t,e,n,i){return this.getTileInternal(t,e,n,i,r)}).bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return f.key=h,l?(f.interimTile=l,f.refreshInterimChain(),s.replace(u,f)):s.set(u,f),f}return this.getTileInternal(t,e,n,i,r||o)},e.prototype.getTileInternal=function(t,e,n,i,o){var r=null,l=Dl(t,e,n),s=this.getKey();if(this.tileCache.containsKey(l)){if((r=this.tileCache.get(l)).key!=s){var a=r;(r=this.createTile_(t,e,n,i,o,s)).interimTile=0==a.getState()?a.interimTile:a,r.refreshInterimChain(),this.tileCache.replace(l,r)}}else r=this.createTile_(t,e,n,i,o,s),this.tileCache.set(l,r);return r},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=Hn(t);if(n){var i=Z(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=e)}},e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.generateTileUrlFunction_=!e.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):Yl,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,i=Z(n),o=n.getState();1==o?(this.tileLoadingKeys_[i]=!0,e="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=3==o?"tileloaderror":2==o||5==o?"tileloadend":void 0),null!=e&&this.dispatchEvent(new Jl(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var i,o=n[1].charCodeAt(0),r=n[2].charCodeAt(0);for(i=o;i<=r;++i)e.push(t.replace(n[0],String.fromCharCode(i)));return e}if(n=n=/\{(\d+)-(\d+)\}/.exec(t)){for(var l=parseInt(n[2],10),s=parseInt(n[1],10);s<=l;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=ql(t[o],e);return function(t){return 1===t.length?t[0]:function(e,n,i){if(e){var o=De(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[o](e,n,i)}}}(i)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,n){var i=Dl(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)},e}(Vl))),ts=function(t){function e(e){var n=e||{},i=J({},n);delete i.preload,delete i.useInterimTilesOnError,t.call(this,i),this.setPreload(void 0!==n.preload?n.preload:0),this.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),this.type="TILE"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getPreload=function(){return this.get("preload")},e.prototype.setPreload=function(t){this.set("preload",t)},e.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},e.prototype.setUseInterimTilesOnError=function(t){this.set("useInterimTilesOnError",t)},e}(Ji),es=function(t){function e(e,n,i,o,r,l){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==o&&(this.image_.crossOrigin=o),this.canvas_=l?document.createElement("canvas"):null,this.color_=l,this.imageListenerKeys_=null,this.imageState_=r,this.size_=i,this.src_=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){this.tainted_=!1;var t=ji(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(e){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},e.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],n=this.size_[1],i=ji(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(0==this.imageState_){this.imageState_=1,this.imageListenerKeys_=[lt(this.image_,"error",this.handleImageError_,this),lt(this.image_,"load",this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),n=e.data,i=this.color_[0]/255,o=this.color_[1]/255,r=this.color_[2]/255,l=0,s=n.length;l<s;l+=4)n[l]*=i,n[l+1]*=o,n[l+2]*=r;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(at),this.imageListenerKeys_=null},e}(mt),ns=function(t){function e(e){var n=e||{};t.call(this,{opacity:void 0!==n.opacity?n.opacity:1,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView}),this.anchor_=void 0!==n.anchor?n.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:"fraction",this.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var i=void 0!==n.img?n.img:null,o=void 0!==n.imgSize?n.imgSize:null,r=n.src;Ie(!(void 0!==r&&i),4),Ie(!i||i&&o,5),void 0!==r&&0!==r.length||!i||(r=i.src||Z(i)),Ie(void 0!==r&&r.length>0,6);var l,s=void 0!==n.src?0:2;this.color_=void 0!==n.color?(l=n.color,Array.isArray(l)?l:ir(l)):null,this.iconImage_=function(t,e,n,i,o,r){var l=pr.get(e,i,r);return l||(l=new es(t,e,n,i,o,r),pr.set(e,i,r,l)),l}(i,r,o,this.crossOrigin_,s,this.color_),this.offset_=void 0!==n.offset?n.offset:[0,0],this.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==n.size?n.size:null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return rt(this.iconImage_,"change",t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){st(this.iconImage_,"change",t,e)},e}(vl),is=n("lM7A"),os=function(){function t(t){this.service=t,this.markers=[],this.googleMapsUrl="https://maps.google.com/maps/vt?pb=!1m5!1m4!1i{z}!2i{x}!3i{y}!4i256!2m3!1e0!2sm!3i375060738!3m9!2spl!3sUS!5e18!12m1!1e47!12m3!1e37!2m1!1ssmartmaps!4e0",this.OSM_URL="https://tile.osm.org/{z}/{x}/{y}.png"}return t.prototype.ngOnInit=function(){var t=this;"OSM"===this.mapProvider?this.url=this.OSM_URL:"GMAPS"===this.mapProvider&&(this.url=this.googleMapsUrl),this.service.coordinatesList.subscribe((function(e){t.centers=e})),this.service.currentCoordinates.subscribe((function(e){t.lonLat=e,t.map?t.changeCenter():t.createMap()}))},t.prototype.createMap=function(){for(var t in ni(),this.centers)this.marker=new Ml({geometry:new Ii(Jn([this.centers[t].longitude,this.centers[t].latitude]))}),this.markers.push(this.marker);this.vectorSource=new _l({features:this.markers}),this.markerStyle=new Rl({image:new ns({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:.75,src:"assets/marker.png"})}),this.vectorLayer=new kl({source:this.vectorSource,style:this.markerStyle}),this.xyzSource=new $l({url:this.url}),this.tileLayer=new ts({source:this.xyzSource}),this.view=new Gi({center:Jn(this.lonLat),zoom:14}),this.map=new ul({target:"map",layers:[this.tileLayer,this.vectorLayer],view:this.view})},t.prototype.changeCenter=function(){var t=this.map.getView();t.setCenter(Jn([this.lonLat[0],this.lonLat[1]])),t.setZoom(14)},t}(),rs=i.pb({encapsulation:0,styles:[[".map[_ngcontent-%COMP%]{width:100%;margin-top:9%}"]],data:{}});function ls(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,0,"div",[["class","map"],["id","map"]],null,null,null,null,null))],null,null)}var ss=n("mrSG"),as=n("z+Au"),us=n("OTlV"),hs=n("r47Z"),cs=n("QTcH"),ps=n("jtrZ"),ds=n("dkQB"),fs=n("J5I9"),gs=n("o3x0"),_s=function(t){function e(e){return t.call(this,e)||this}return Object(ss.c)(e,t),e.prototype.canDeactivate=function(){return!this.canDeactivateFlag},e.ngInjectableDef=i.U({factory:function(){return new e(i.Y(gs.e))},token:e,providedIn:"root"}),e}(fs.a),ms=n("ZYCi"),vs=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function l(t){try{a(i.next(t))}catch(e){r(e)}}function s(t){try{a(i.throw(t))}catch(e){r(e)}}function a(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(l,s)}a((i=i.apply(t,e||[])).next())}))},ys=function(t,e){var n,i,o,r,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,i=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){l=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){l.label=r[1];break}if(6===r[0]&&l.label<o[1]){l.label=o[1],o=r;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(r);break}o[2]&&l.ops.pop(),l.trys.pop();continue}r=e.call(t,l)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},bs=function(t){function e(e,n,i,o,r,l,s,a){var u=t.call(this,e)||this;return u.dialog=e,u.service=n,u.dataService=i,u.router=o,u.route=r,u.translate=l,u.configService=s,u.activatedRoute=a,u.REGISTRATION_CENTRES=[],u.searchClick=!0,u.isWorkingDaysAvailable=!1,u.canDeactivateFlag=!0,u.locationTypes=[],u.identityData=[],u.allLocationTypes=[],u.locationType=null,u.searchText=null,u.showTable=!1,u.selectedCentre=null,u.showMap=!1,u.showMessage=!1,u.enableNextButton=!1,u.bookingDataList=[],u.nearbyClicked=!1,u.step=0,u.textDir=localStorage.getItem("dir"),u.showDescription=!1,u.mapProvider="OSM",u.searchTextFlag=!1,u.displayMessage="Showing nearby registration centers",u.users=[],u.subscriptions=[],u.userPreferredLangCode=localStorage.getItem("userPrefLanguage"),u.preRegId=[],u.recommendedCenterLocCode=1,u.locationNames=[],u.locationCodes=[],u.totalItems=0,u.defaultPageSize=10,u.pageSize=u.defaultPageSize,u.pageIndex=0,u.pageSizeOptions=[5,10,15,20],u.translate.use(u.userPreferredLangCode),u}return Object(ss.c)(e,t),e.prototype.ngOnInit=function(){return vs(this,void 0,void 0,(function(){var t,e=this;return ys(this,(function(n){switch(n.label){case 0:return this.router.url.includes("multiappointment")?this.preRegId=JSON.parse(localStorage.getItem("multiappointment")).slice():this.activatedRoute.params.subscribe((function(t){e.preRegId=[t.appId]})),this.getErrorLabels(),[4,this.getUserInfo(this.preRegId)];case 1:return n.sent(),this.REGISTRATION_CENTRES=[],this.selectedCentre=null,this.recommendedCenterLocCode=Number(this.configService.getConfigByKey(ds.f.preregistration_recommended_centers_locCode)),console.log("recommendedCenterLocCode: "+this.recommendedCenterLocCode),[4,this.getIdentityJsonFormat()];case 2:return n.sent(),t=this.dataService.getLocationTypeData().subscribe((function(t){e.allLocationTypes=t[ds.E].locationHierarchyLevels,console.log(e.allLocationTypes),e.locationTypes=e.allLocationTypes.filter((function(t){return t.hierarchyLevel<=e.recommendedCenterLocCode})),e.locationTypes.sort((function(t,e){return t.hierarchyLevel-e.hierarchylevel})),e.getRecommendedCenters()})),this.subscriptions.push(t),[2]}}))}))},e.prototype.getUserInfo=function(t){var e=this;return new Promise((function(n){return vs(e,void 0,void 0,(function(){var e,i=this;return ys(this,(function(o){switch(o.label){case 0:e=0,o.label=1;case 1:return e<t.length?[4,this.getUserDetails(t[e]).then((function(t){return i.users.push(t)}))]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return n(!0),[2]}}))}))}))},e.prototype.getUserDetails=function(t){var e=this;return new Promise((function(n){e.dataService.getUser(t.toString()).subscribe((function(e){n(new hs.a(t.toString(),e[ds.E],void 0,[]))}))}))},e.prototype.getErrorLabels=function(){var t=this;this.dataService.getI18NLanguageFiles(localStorage.getItem("userPrefLanguage")).subscribe((function(e){t.errorlabels=e.error,t.apiErrorCodes=e[ds.a]}))},e.prototype.getIdentityJsonFormat=function(){return vs(this,void 0,void 0,(function(){var t=this;return ys(this,(function(e){return[2,new Promise((function(e,n){t.dataService.getIdentityJson().subscribe((function(n){return vs(t,void 0,void 0,(function(){return ys(this,(function(t){return this.identityData=n[ds.E].jsonSpec.identity.identity,e(!0),[2]}))}))}),(function(e){t.showErrorMessage(e)}))}))]}))}))},e.prototype.getRecommendedCenters=function(){return vs(this,void 0,void 0,(function(){var t,e=this;return ys(this,(function(n){switch(n.label){case 0:return this.totalItems=0,this.nearbyClicked=!1,t=null,this.identityData.forEach((function(n){!0===n.inputRequired&&null!==n.controlType&&"fileupload"!==n.controlType&&n.locationHierarchyLevel&&e.recommendedCenterLocCode==n.locationHierarchyLevel&&(t=n.id)})),t?[3,1]:(this.showErrorMessage(null,this.errorlabels.error),[3,3]);case 1:return console.log("uiFieldName: "+t),this.users.forEach((function(n){"object"==typeof n.request.demographicDetails.identity[t]?e.locationCodes.push(n.request.demographicDetails.identity[t][0].value):"string"==typeof n.request.demographicDetails.identity[t]&&e.locationCodes.push(n.request.demographicDetails.identity[t])})),[4,this.getLocationNamesByCodes()];case 2:n.sent(),this.getRecommendedCentersApiCall(),n.label=3;case 3:return[2]}}))}))},e.prototype.getLocationNamesByCodes=function(){var t=this;return new Promise((function(e){t.locationCodes.forEach((function(n,i){return vs(t,void 0,void 0,(function(){return ys(this,(function(t){switch(t.label){case 0:return[4,this.getLocationNames(n)];case 1:return t.sent(),i===this.locationCodes.length-1&&e(!0),[2]}}))}))}))}))},e.prototype.getRecommendedCentersApiCall=function(){var t=this;this.REGISTRATION_CENTRES=[];var e=this.dataService.recommendedCenters(this.userPreferredLangCode,this.recommendedCenterLocCode,this.locationNames).subscribe((function(e){e[ds.E]&&t.displayResults(e.response)}),(function(e){t.showErrorMessage(e,t.errorlabels.regCenterNotavailabe)}));this.subscriptions.push(e)},e.prototype.getLocationNames=function(t){var e=this;return new Promise((function(n){e.dataService.getLocationInfoForLocCode(t,e.userPreferredLangCode).subscribe((function(t){t[ds.E]&&(e.locationNames.push(t[ds.E].name),n(!0))}),(function(t){e.showErrorMessage(t,e.errorlabels.regCenterNotavailabe)}))}))},e.prototype.setSearchClick=function(t){this.searchClick=t,this.nearbyClicked=!1},e.prototype.onSubmit=function(){this.searchTextFlag=!0,this.displayMessage=0!==this.searchText.length||null!==this.searchText?"Searching results for "+this.searchText+" ....":""},e.prototype.setStep=function(t){this.step=t},e.prototype.nextStep=function(){this.step++,this.showDescription=!0},e.prototype.prevStep=function(){this.step--},e.prototype.resetPagination=function(){this.totalItems=0,this.pageSize=this.defaultPageSize,this.pageIndex=0,this.getRecommendedCenters()},e.prototype.showResults=function(t){var e=this;if(this.REGISTRATION_CENTRES=[],null!==this.locationType&&null!==this.searchText){this.showMap=!1,t&&(this.pageSize=t.pageSize,this.pageIndex=t.pageIndex);var n=this.dataService.getRegistrationCentersByNamePageWise(this.locationType.hierarchyLevel,this.searchText,this.pageIndex,this.pageSize).subscribe((function(t){t[ds.E]?(e.totalItems=t[ds.E].totalItems,e.displayResults(t[ds.E]),e.showMessage=!1):(e.totalItems=0,e.showMessage=!0,e.selectedCentre=null)}),(function(t){e.showMessage=!0,e.totalItems=0,e.selectedCentre=null}));this.subscriptions.push(n)}else this.showMessage=!0,this.totalItems=0,this.selectedCentre=null},e.prototype.onChangeLocationType=function(){this.showMessage=!1,this.totalItems=0,this.searchText="",this.selectedCentre=null},e.prototype.plotOnMap=function(){this.showMap=!0,this.service.changeCoordinates([Number(this.selectedCentre.longitude),Number(this.selectedCentre.latitude)])},e.prototype.selectedRow=function(t){this.selectedCentre=t,this.enableNextButton=!0,0!==Object.keys(this.selectedCentre).length&&this.plotOnMap()},e.prototype.getLocation=function(){var t=this;this.REGISTRATION_CENTRES=[],this.nearbyClicked=!0,navigator.geolocation&&(this.showMap=!1,navigator.geolocation.getCurrentPosition((function(e){console.log(e.coords);var n=t.dataService.getNearbyRegistrationCenters(e.coords).subscribe((function(e){0!==e[ds.E].registrationCenters.length?t.displayResults(e[ds.E]):(t.showMessage=!0,t.selectedCentre=null)}),(function(e){t.showMessage=!0,t.selectedCentre=null}));t.subscriptions.push(n)})))},e.prototype.changeTimeFormat=function(t){var e,n=t.split(":");return Number(n[0])<12&&Number(n[0])>0?(e=n[0],e+=":"+n[1]+" am"):0===Number(n[0])?(e=Number(n[0])+12,e+=":"+n[1]+" am"):12===Number(n[0])?(e=n[0],e+=":"+n[1]+" pm"):(e=Number(n[0])-12,e+=":"+n[1]+" pm"),e},e.prototype.showTime=function(t,e){var n=this.changeTimeFormat(t),i=this.changeTimeFormat(e),o=n+" - "+i;return"rtl"==this.textDir&&(o=i+" - "+n),o},e.prototype.dispatchCenterCoordinatesList=function(){var t=[];this.REGISTRATION_CENTRES.forEach((function(e){var n={id:e.id,latitude:Number(e.latitude),longitude:Number(e.longitude)};t.push(n)})),this.service.listOfCenters(t)},e.prototype.routeNext=function(){this.canDeactivateFlag=!1,this.router.navigate(["../pick-time"],{relativeTo:this.route,queryParams:{regCenter:this.selectedCentre.id}})},e.prototype.routeDashboard=function(){this.canDeactivateFlag=!1,this.router.navigate([this.userPreferredLangCode+"/dashboard"])},e.prototype.routeBack=function(){var t;this.router.url.includes("multiappointment")||"true"===localStorage.getItem("modifyMultipleAppointment")?this.routeDashboard():(t=cs.a.getURL(this.router.url,"summary",3),this.canDeactivateFlag=!1,this.router.navigateByUrl(t+"/"+this.preRegId[0]+"/preview"))},e.prototype.displayResults=function(t){return vs(this,void 0,void 0,(function(){return ys(this,(function(e){switch(e.label){case 0:return t.registrationCenters?this.REGISTRATION_CENTRES=t.registrationCenters:t.data&&(this.REGISTRATION_CENTRES=t.data),[4,this.getWorkingDays()];case 1:return e.sent(),this.showTable=!0,this.REGISTRATION_CENTRES&&(this.selectedRow(this.REGISTRATION_CENTRES[0]),this.dispatchCenterCoordinatesList()),[2]}}))}))},e.prototype.getWorkingDays=function(){var t=this;return new Promise((function(e){t.REGISTRATION_CENTRES.forEach((function(n){t.dataService.getWorkingDays(n.id,t.userPreferredLangCode).subscribe((function(i){n.workingDays="",i[ds.E]&&i[ds.E].workingdays&&i[ds.E].workingdays.forEach((function(t){""!=n.workingDays&&(n.workingDays+=", "),n.workingDays=n.workingDays+t.name})),t.isWorkingDaysAvailable=!0,e(!0)}),(function(e){t.showErrorMessage(e)}))}))}))},e.prototype.showErrorMessage=function(t,e){var n=this,i={case:"ERROR",title:this.errorlabels.errorLabel,message:e||cs.a.createErrorMessage(t,this.errorlabels,this.apiErrorCodes,this.configService),yesButtonText:this.errorlabels.button_ok};this.openDialog(i,"400px").afterClosed().subscribe((function(){i.message===n.errorlabels.regCenterNotavailabe&&(n.canDeactivateFlag=!1,n.router.url.includes("multiappointment")||"true"===localStorage.getItem("modifyMultipleAppointment")?n.routeDashboard():(localStorage.setItem(ds.x,"true"),n.router.navigate([n.userPreferredLangCode+"/pre-registration/demographic/"+n.preRegId[0]])))}))},e.prototype.openDialog=function(t,e){return this.dialog.open(as.a,{width:e,data:t})},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))},e.ngInjectableDef=i.U({factory:function(){return new e(i.Y(gs.e),i.Y(is.a),i.Y(us.a),i.Y(ms.m),i.Y(ms.a),i.Y(v.j),i.Y(ps.a),i.Y(ms.a))},token:e,providedIn:"root"}),e}(_s),xs=i.pb({encapsulation:0,styles:[[".spinner[_ngcontent-%COMP%]{flex-direction:column;align-items:center;margin-top:18vw;display:flex}mat-card[_ngcontent-%COMP%]{border-radius:10px!important}.center__title-card-text[_ngcontent-%COMP%]{font-size:15px;font-weight:600}.inline-flex[_ngcontent-%COMP%]{display:inline-flex}.center_selection-wrapper[_ngcontent-%COMP%]{margin:5px 2vw}.center-selection__title-card[_ngcontent-%COMP%]{color:#ff4081;padding:0;display:flex;align-items:center;white-space:nowrap;border-radius:2px!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}section[_ngcontent-%COMP%]{display:flex}.centers-wrapper[_ngcontent-%COMP%]{margin-left:25px;margin-right:2vw;width:55%}.centers-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;font-size:.65rem}.center-card[_ngcontent-%COMP%]{margin:1.5% 0;display:flex}.center-card-selected[_ngcontent-%COMP%]{border:1px solid #fd518c}input[type=radio][_ngcontent-%COMP%]{transform:scale(1.5);height:2rem;margin-right:1.2rem}.map[_ngcontent-%COMP%]{width:40%;display:flex}.container[_ngcontent-%COMP%]{display:flex;margin-bottom:60px}.center-selection__button-container[_ngcontent-%COMP%]{width:100%;position:fixed;bottom:0;left:0;padding:2px 2vw;display:flex;z-index:22}.center_selection-intial-recommendation-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:7px}.center_selection-center_recommendation-display[_ngcontent-%COMP%]{color:#30badd;opacity:100%;font-family:Roboto,sans-serif;white-space:nowrap;cursor:pointer;display:inline-flex;font-size:12px}.center_selection-nearby-btn[_ngcontent-%COMP%]{color:#6e6e6e;font-family:Roboto,sans-serif;opacity:100%;margin-left:30px;margin-right:5px;padding:0;transform:translateY(-.4rem);font-size:11px}.name-delete-button[_ngcontent-%COMP%]{font-size:11px;color:#6e6e6e;padding-top:12px;cursor:pointer;transform:translateY(-.4rem)}.center_selection-center-available-text[_ngcontent-%COMP%]{color:#6e6e6e;opacity:100%;font-family:Roboto,sans-serif;font-size:10px}.search-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:1rem;transform:translateY(-.01rem)}.search-btn[_ngcontent-%COMP%]{width:35px;height:35px;background-color:#f4f4f4;border:1px solid #fd518c;border-radius:0;opacity:100%;line-height:30px;text-transform:uppercase}.center_selection-form-container[_ngcontent-%COMP%]{-webkit-animation:1.3s ease-out anim;animation:1.3s ease-out anim}@-webkit-keyframes anim{from{opacity:0}to{opacity:1}}@keyframes anim{from{opacity:0}to{opacity:1}}.search-cancel-btn[_ngcontent-%COMP%]{width:35px;height:40px;background-color:#fd518c;border-radius:0;opacity:100%;text-transform:uppercase}.search-input[_ngcontent-%COMP%]{padding:10px;outline:0;color:#707070;font-family:Roboto,sans-serif;opacity:100%;background-color:#fff;border:none;width:85%}.select-input[_ngcontent-%COMP%]{outline:0;font-family:Roboto,sans-serif;color:#000;opacity:100%;padding:10px;background-color:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;font-size:14px}.mat-option[_ngcontent-%COMP%]:hover{background-color:#d8f7ff;opacity:100%}.select-card[_ngcontent-%COMP%]{padding:0;box-shadow:4px #000;border-radius:0;height:40px;width:50%;margin-top:10px}.search-text[_ngcontent-%COMP%]{display:flex;font-family:Roboto,sans-serif;font-size:14px;color:#707070;width:100%;margin-top:10px;margin-left:25px}.search-card[_ngcontent-%COMP%]{width:50%;height:40px;padding:0;box-shadow:4px #000;border-radius:0;margin-top:10px;display:inline-flex}.search-form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}@media (max-width:500px){.user-back-btn[_ngcontent-%COMP%], .user-book_later-btn[_ngcontent-%COMP%], .user-continue-btn[_ngcontent-%COMP%]{font-size:10px;padding:0 2px;margin-right:20px}.container[_ngcontent-%COMP%]{display:flex;padding:0 1rem 0 2rem}.centers-wrapper[_ngcontent-%COMP%]{width:90%}.center_selection-center_recommendation-display[_ngcontent-%COMP%]{white-space:normal}}"]],data:{}});function Cs(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"div",[["class","spinner"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,1,"mat-spinner",[["class","mat-spinner mat-progress-spinner"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,c.b,c.a)),i.qb(2,49152,null,0,p.d,[i.k,d.a,[2,f.d],[2,g.a],p.a],null,null)],null,(function(t,e){t(e,1,0,i.Bb(e,2)._noopAnimations,i.Bb(e,2).diameter,i.Bb(e,2).diameter)}))}function Ss(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,2,"mat-icon",[["class","name-delete-button mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var i=!0,o=t.component;return"click"===e&&(o.resetPagination(),i=!1!==o.setSearchClick(!0)&&i),i}),_.b,_.a)),i.qb(2,9158656,null,0,m.b,[i.k,m.d,[8,null],[2,m.a]],null,null),(t()(),i.Hb(-1,0,["close"]))],(function(t,e){t(e,2,0)}),(function(t,e){t(e,1,0,i.Bb(e,2).inline,"primary"!==i.Bb(e,2).color&&"accent"!==i.Bb(e,2).color&&"warn"!==i.Bb(e,2).color)}))}function ws(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,26,"div",[["class","center_selection-center_recommendation-display"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,13,"span",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getRecommendedCenters()&&i),i}),null,null)),(t()(),i.rb(2,0,null,null,2,"b",[],null,null,null,null,null)),(t()(),i.Hb(3,null,["",""])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.Hb(-1,null,["\xa0\xa0 "])),(t()(),i.rb(6,16777216,null,null,4,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var o=!0;return"longpress"===e&&(o=!1!==i.Bb(t,8).show()&&o),"keydown"===e&&(o=!1!==i.Bb(t,8)._handleKeydown(n)&&o),"touchend"===e&&(o=!1!==i.Bb(t,8)._handleTouchend()&&o),o}),_.b,_.a)),i.qb(7,9158656,null,0,m.b,[i.k,m.d,[8,null],[2,m.a]],{inline:[0,"inline"]},null),i.qb(8,147456,null,0,y.d,[b.c,i.k,x.b,i.Q,i.A,d.a,C.c,C.h,y.b,[2,S.c],[2,y.a],[2,w.g]],{message:[0,"message"]},null),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.Hb(-1,0,["help_outline"])),(t()(),i.rb(11,0,null,null,3,"div",[["class","center_selection-center-available-text"]],null,null,null,null,null)),(t()(),i.Hb(12,null,[" ( "," "," "," ) "])),i.Cb(131072,v.i,[v.j,i.h]),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(15,0,null,null,8,"button",[["class","center_selection-nearby-btn"],["mat-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getLocation()&&i),i}),T.b,T.a)),i.qb(16,180224,null,0,E.b,[i.k,d.a,C.h,[2,g.a]],null,null),(t()(),i.Hb(17,0,[" "," \xa0\xa0 "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(19,16777216,null,0,4,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var o=!0;return"longpress"===e&&(o=!1!==i.Bb(t,21).show()&&o),"keydown"===e&&(o=!1!==i.Bb(t,21)._handleKeydown(n)&&o),"touchend"===e&&(o=!1!==i.Bb(t,21)._handleTouchend()&&o),o}),_.b,_.a)),i.qb(20,9158656,null,0,m.b,[i.k,m.d,[8,null],[2,m.a]],{inline:[0,"inline"]},null),i.qb(21,147456,null,0,y.d,[b.c,i.k,x.b,i.Q,i.A,d.a,C.c,C.h,y.b,[2,S.c],[2,y.a],[2,w.g]],{message:[0,"message"]},null),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.Hb(-1,0,["help_outline"])),(t()(),i.ib(16777216,null,null,1,null,Ss)),i.qb(25,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(26,0,null,null,0,"br",[],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,7,0,!0),t(e,8,0,i.tb(1,"",i.Ib(e,8,0,i.Bb(e,9).transform("helpText.recommended_centers")),"")),t(e,20,0,!0),t(e,21,0,i.tb(1,"",i.Ib(e,21,0,i.Bb(e,22).transform("helpText.nearBy")),"")),t(e,25,0,n.nearbyClicked)}),(function(t,e){var n=e.component;t(e,3,0,i.Ib(e,3,0,i.Bb(e,4).transform("centerSelection.display_recommended"))),t(e,6,0,i.Bb(e,7).inline,"primary"!==i.Bb(e,7).color&&"accent"!==i.Bb(e,7).color&&"warn"!==i.Bb(e,7).color),t(e,12,0,i.Ib(e,12,0,i.Bb(e,13).transform("centerSelection.text_found")),n.REGISTRATION_CENTRES.length,i.Ib(e,12,2,i.Bb(e,14).transform("centerSelection.text_centers"))),t(e,15,0,i.Bb(e,16).disabled||null,"NoopAnimations"===i.Bb(e,16)._animationMode),t(e,17,0,i.Ib(e,17,0,i.Bb(e,18).transform("centerSelection.action_nearBy"))),t(e,19,0,i.Bb(e,20).inline,"primary"!==i.Bb(e,20).color&&"accent"!==i.Bb(e,20).color&&"warn"!==i.Bb(e,20).color)}))}function Ts(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,8,"div",[["class","center_selection-intial-recommendation-container"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,ws)),i.qb(2,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(3,0,null,null,0,"span",[["class","spacer"]],null,null,null,null,null)),(t()(),i.rb(4,16777216,null,null,4,"button",[["class","search-btn"],["mat-icon-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var o=!0,r=t.component;return"longpress"===e&&(o=!1!==i.Bb(t,6).show()&&o),"keydown"===e&&(o=!1!==i.Bb(t,6)._handleKeydown(n)&&o),"touchend"===e&&(o=!1!==i.Bb(t,6)._handleTouchend()&&o),"click"===e&&(o=!1!==r.setSearchClick(!1)&&o),o}),T.b,T.a)),i.qb(5,180224,null,0,E.b,[i.k,d.a,C.h,[2,g.a]],null,null),i.qb(6,147456,null,0,y.d,[b.c,i.k,x.b,i.Q,i.A,d.a,C.c,C.h,y.b,[2,S.c],[2,y.a],[2,w.g]],{message:[0,"message"]},null),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(8,0,null,0,0,"img",[["alt","Search"],["src","assets\\search.png"]],null,null,null,null,null))],(function(t,e){t(e,2,0,e.component.REGISTRATION_CENTRES),t(e,6,0,i.tb(1,"",i.Ib(e,6,0,i.Bb(e,7).transform("helpText.magnifying_glass")),""))}),(function(t,e){t(e,4,0,i.Bb(e,5).disabled||null,"NoopAnimations"===i.Bb(e,5)._animationMode)}))}function Es(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"],["style","color:black;"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(t,e,n){var o=!0;return"click"===e&&(o=!1!==i.Bb(t,1)._selectViaInteraction()&&o),"keydown"===e&&(o=!1!==i.Bb(t,1)._handleKeydown(n)&&o),o}),I.c,I.a)),i.qb(1,8568832,[[1,4]],0,R.r,[i.k,i.h,[2,R.l],[2,R.q]],{value:[0,"value"]},null),(t()(),i.Hb(2,0,[" "," "]))],(function(t,e){t(e,1,0,e.context.$implicit)}),(function(t,e){t(e,0,0,i.Bb(e,1)._getTabIndex(),i.Bb(e,1).selected,i.Bb(e,1).multiple,i.Bb(e,1).active,i.Bb(e,1).id,i.Bb(e,1)._getAriaSelected(),i.Bb(e,1).disabled.toString(),i.Bb(e,1).disabled),t(e,2,0,e.context.$implicit.hierarchyLevelName)}))}function Is(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,6,"input",[["class","search-input"],["mat-input",""],["name","search"],["type","search"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var o=!0,r=t.component;return"input"===e&&(o=!1!==i.Bb(t,1)._handleInput(n.target.value)&&o),"blur"===e&&(o=!1!==i.Bb(t,1).onTouched()&&o),"compositionstart"===e&&(o=!1!==i.Bb(t,1)._compositionStart()&&o),"compositionend"===e&&(o=!1!==i.Bb(t,1)._compositionEnd(n.target.value)&&o),"ngModelChange"===e&&(o=!1!==(r.searchText=n)&&o),o}),null,null)),i.qb(1,16384,null,0,k.d,[i.F,i.k,[2,k.a]],null,null),i.Eb(1024,null,k.l,(function(t){return[t]}),[k.d]),i.qb(3,671744,null,0,k.q,[[2,k.c],[8,null],[8,null],[6,k.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i.Eb(2048,null,k.m,null,[k.q]),i.qb(5,16384,null,0,k.n,[[4,k.m]],null,null),i.Cb(131072,v.i,[v.j,i.h])],(function(t,e){t(e,3,0,"search",e.component.searchText)}),(function(t,e){var n=e.component;t(e,0,0,i.tb(2,"",i.Ib(e,0,0,i.Bb(e,6).transform("centerSelection.text_enter"))," ",n.locationType.hierarchyLevelName,""),i.Bb(e,5).ngClassUntouched,i.Bb(e,5).ngClassTouched,i.Bb(e,5).ngClassPristine,i.Bb(e,5).ngClassDirty,i.Bb(e,5).ngClassValid,i.Bb(e,5).ngClassInvalid,i.Bb(e,5).ngClassPending)}))}function Rs(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,6,"input",[["class","search-input"],["mat-input",""],["name","search"],["type","search"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var o=!0,r=t.component;return"input"===e&&(o=!1!==i.Bb(t,1)._handleInput(n.target.value)&&o),"blur"===e&&(o=!1!==i.Bb(t,1).onTouched()&&o),"compositionstart"===e&&(o=!1!==i.Bb(t,1)._compositionStart()&&o),"compositionend"===e&&(o=!1!==i.Bb(t,1)._compositionEnd(n.target.value)&&o),"ngModelChange"===e&&(o=!1!==(r.searchText=n)&&o),o}),null,null)),i.qb(1,16384,null,0,k.d,[i.F,i.k,[2,k.a]],null,null),i.Eb(1024,null,k.l,(function(t){return[t]}),[k.d]),i.qb(3,671744,null,0,k.q,[[2,k.c],[8,null],[8,null],[6,k.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i.Eb(2048,null,k.m,null,[k.q]),i.qb(5,16384,null,0,k.n,[[4,k.m]],null,null),i.Cb(131072,v.i,[v.j,i.h])],(function(t,e){t(e,3,0,"search",e.component.searchText)}),(function(t,e){t(e,0,0,i.tb(1,"",i.Ib(e,0,0,i.Bb(e,6).transform("centerSelection.text_search")),""),i.Bb(e,5).ngClassUntouched,i.Bb(e,5).ngClassTouched,i.Bb(e,5).ngClassPristine,i.Bb(e,5).ngClassDirty,i.Bb(e,5).ngClassValid,i.Bb(e,5).ngClassInvalid,i.Bb(e,5).ngClassPending)}))}function ks(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"span",[["class","search-text"]],null,null,null,null,null)),(t()(),i.Hb(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.displayMessage)}))}function Ms(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,34,"div",[["class","center_selection-form-container"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,33,"form",[["class","search-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var o=!0;return"submit"===e&&(o=!1!==i.Bb(t,3).onSubmit(n)&&o),"reset"===e&&(o=!1!==i.Bb(t,3).onReset()&&o),o}),null,null)),i.qb(2,16384,null,0,k.w,[],null,null),i.qb(3,4210688,null,0,k.p,[[8,null],[8,null]],null,null),i.Eb(2048,null,k.c,null,[k.p]),i.qb(5,16384,null,0,k.o,[[4,k.c]],null,null),(t()(),i.rb(6,0,null,null,14,"mat-card",[["class","select-card mat-card"],["style","border-radius: 0 !important;"]],null,null,null,M.d,M.a)),i.qb(7,49152,null,0,P.a,[],null,null),(t()(),i.rb(8,0,null,0,12,"mat-select",[["class","select-input mat-select"],["disableOptionCentering",""],["name","select"],["role","listbox"],["style","font-size: 11.5px;"],["value","locationType"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"selectionChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(t,e,n){var o=!0,r=t.component;return"keydown"===e&&(o=!1!==i.Bb(t,13)._handleKeydown(n)&&o),"focus"===e&&(o=!1!==i.Bb(t,13)._onFocus()&&o),"blur"===e&&(o=!1!==i.Bb(t,13)._onBlur()&&o),"ngModelChange"===e&&(o=!1!==(r.locationType=n)&&o),"selectionChange"===e&&(o=!1!==r.onChangeLocationType()&&o),o}),O.b,O.a)),i.Eb(6144,null,R.l,null,[L.c]),i.Eb(6144,null,F.d,null,[L.c]),i.qb(11,671744,null,0,k.q,[[2,k.c],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i.Eb(2048,null,k.m,null,[k.q]),i.qb(13,2080768,null,3,L.c,[x.e,i.h,i.A,R.d,i.k,[2,S.c],[2,k.p],[2,k.i],[2,F.c],[6,k.m],[8,null],L.a,C.l],{placeholder:[0,"placeholder"],disableOptionCentering:[1,"disableOptionCentering"],value:[2,"value"]},{selectionChange:"selectionChange"}),i.Fb(603979776,1,{options:1}),i.Fb(603979776,2,{optionGroups:1}),i.Fb(335544320,3,{customTrigger:0}),i.Cb(131072,v.i,[v.j,i.h]),i.qb(18,16384,null,0,k.n,[[4,k.m]],null,null),(t()(),i.ib(16777216,null,1,1,null,Es)),i.qb(20,278528,null,0,f.k,[i.Q,i.N,i.t],{ngForOf:[0,"ngForOf"]},null),(t()(),i.rb(21,0,null,null,13,"mat-card",[["class","search-card mat-card"]],null,null,null,M.d,M.a)),i.qb(22,49152,null,0,P.a,[],null,null),(t()(),i.ib(16777216,null,0,1,null,Is)),i.qb(24,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,0,1,null,Rs)),i.qb(26,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(27,16777216,null,0,4,"button",[["mat-icon-button",""],["type","submit"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var o=!0,r=t.component;return"longpress"===e&&(o=!1!==i.Bb(t,29).show()&&o),"keydown"===e&&(o=!1!==i.Bb(t,29)._handleKeydown(n)&&o),"touchend"===e&&(o=!1!==i.Bb(t,29)._handleTouchend()&&o),"click"===e&&(o=!1!==r.showResults()&&o),o}),T.b,T.a)),i.qb(28,180224,null,0,E.b,[i.k,d.a,C.h,[2,g.a]],null,null),i.qb(29,147456,null,0,y.d,[b.c,i.k,x.b,i.Q,i.A,d.a,C.c,C.h,y.b,[2,S.c],[2,y.a],[2,w.g]],{message:[0,"message"]},null),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(31,0,null,0,0,"img",[["alt","Search"],["src","assets\\search_grey.png"]],null,null,null,null,null)),(t()(),i.rb(32,0,null,0,2,"button",[["class","search-cancel-btn"],["mat-icon-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,o=t.component;return"click"===e&&(o.setSearchClick(!0),i=!1!==o.resetPagination()&&i),i}),T.b,T.a)),i.qb(33,180224,null,0,E.b,[i.k,d.a,C.h,[2,g.a]],null,null),(t()(),i.rb(34,0,null,0,0,"img",[["alt","Close"],["src","assets\\close.png"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,ks)),i.qb(36,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(0,null,null,0))],(function(t,e){var n=e.component;t(e,11,0,"select",n.locationType),t(e,13,0,i.tb(1,"",i.Ib(e,13,0,i.Bb(e,17).transform("centerSelection.text_select")),""),"","locationType"),t(e,20,0,n.locationTypes),t(e,24,0,null!==n.locationType),t(e,26,0,null===n.locationType),t(e,29,0,i.tb(1,"",i.Ib(e,29,0,i.Bb(e,30).transform("helpText.magnifying_glass")),"")),t(e,36,0,n.searchTextFlag)}),(function(t,e){t(e,1,0,i.Bb(e,5).ngClassUntouched,i.Bb(e,5).ngClassTouched,i.Bb(e,5).ngClassPristine,i.Bb(e,5).ngClassDirty,i.Bb(e,5).ngClassValid,i.Bb(e,5).ngClassInvalid,i.Bb(e,5).ngClassPending),t(e,8,1,[i.Bb(e,13).id,i.Bb(e,13).tabIndex,i.Bb(e,13)._getAriaLabel(),i.Bb(e,13)._getAriaLabelledby(),i.Bb(e,13).required.toString(),i.Bb(e,13).disabled.toString(),i.Bb(e,13).errorState,i.Bb(e,13).panelOpen?i.Bb(e,13)._optionIds:null,i.Bb(e,13).multiple,i.Bb(e,13)._ariaDescribedby||null,i.Bb(e,13)._getAriaActiveDescendant(),i.Bb(e,13).disabled,i.Bb(e,13).errorState,i.Bb(e,13).required,i.Bb(e,13).empty,i.Bb(e,18).ngClassUntouched,i.Bb(e,18).ngClassTouched,i.Bb(e,18).ngClassPristine,i.Bb(e,18).ngClassDirty,i.Bb(e,18).ngClassValid,i.Bb(e,18).ngClassInvalid,i.Bb(e,18).ngClassPending]),t(e,27,0,i.Bb(e,28).disabled||null,"NoopAnimations"===i.Bb(e,28)._animationMode),t(e,32,0,i.Bb(e,33).disabled||null,"NoopAnimations"===i.Bb(e,33)._animationMode)}))}function Ps(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,3,"span",[["class","center_selection-center-available-text"],["style","margin-left:24px;"]],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "," "," "])),i.Cb(131072,v.i,[v.j,i.h]),i.Cb(131072,v.i,[v.j,i.h])],null,(function(t,e){var n=e.component;t(e,1,0,i.Ib(e,1,0,i.Bb(e,2).transform("centerSelection.text_found")),n.REGISTRATION_CENTRES.length>n.totalItems?n.REGISTRATION_CENTRES.length:n.totalItems,i.Ib(e,1,2,i.Bb(e,3).transform("centerSelection.text_centers")))}))}function Os(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"span",[["class","center_selection-center-available-text"],["style","margin-left:24px;"]],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h])],null,(function(t,e){t(e,1,0,i.Ib(e,1,0,i.Bb(e,2).transform("centerSelection.noResult_found")))}))}function Ls(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,", "+e.parent.context.$implicit.addressLine1)}))}function Fs(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,", "+e.parent.context.$implicit.addressLine2)}))}function Ds(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,", "+e.parent.context.$implicit.addressLine3)}))}function As(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.contactPerson)}))}function Bs(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,", "+e.parent.context.$implicit.contactPhone)}))}function zs(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Hb(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.contactPhone)}))}function Ns(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,6,"span",[],null,null,null,null,null)),(t()(),i.Hb(1,null,[" ",": "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(3,0,null,null,3,"span",[["dir","ltr"]],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(5,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.Hb(6,null,[" "," "]))],(function(t,e){t(e,5,0,"ltr")}),(function(t,e){var n=e.component;t(e,1,0,i.Ib(e,1,0,i.Bb(e,2).transform("centerSelection.lunch_hours"))),t(e,3,0,i.Bb(e,5)._rawDir);var o=n.showTime(e.parent.context.$implicit.lunchStartTime.substring(0,5),e.parent.context.$implicit.lunchEndTime.substring(0,5));t(e,6,0,o)}))}function Gs(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,58,"li",[],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,57,"mat-card",[["class","mat-card"]],null,null,null,M.d,M.a)),i.qb(2,278528,null,0,f.j,[i.t,i.u,i.k,i.F],{ngClass:[0,"ngClass"]},null),i.qb(3,49152,null,0,P.a,[],null,null),(t()(),i.rb(4,0,null,0,6,"input",[["name","center"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(t,e,n){var o=!0,r=t.component;return"input"===e&&(o=!1!==i.Bb(t,5)._handleInput(n.target.value)&&o),"blur"===e&&(o=!1!==i.Bb(t,5).onTouched()&&o),"compositionstart"===e&&(o=!1!==i.Bb(t,5)._compositionStart()&&o),"compositionend"===e&&(o=!1!==i.Bb(t,5)._compositionEnd(n.target.value)&&o),"change"===e&&(o=!1!==i.Bb(t,6).onChange()&&o),"blur"===e&&(o=!1!==i.Bb(t,6).onTouched()&&o),"ngModelChange"===e&&(o=!1!==(r.selectedCentre=n)&&o),"click"===e&&(o=!1!==r.selectedRow(t.context.$implicit)&&o),o}),null,null)),i.qb(5,16384,null,0,k.d,[i.F,i.k,[2,k.a]],null,null),i.qb(6,212992,null,0,k.r,[i.F,i.k,k.x,i.r],{name:[0,"name"],value:[1,"value"]},null),i.Eb(1024,null,k.l,(function(t,e){return[t,e]}),[k.d,k.r]),i.qb(8,671744,null,0,k.q,[[8,null],[8,null],[8,null],[6,k.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i.Eb(2048,null,k.m,null,[k.q]),i.qb(10,16384,null,0,k.n,[[4,k.m]],null,null),(t()(),i.rb(11,0,null,0,23,"div",[],null,null,null,null,null)),(t()(),i.rb(12,0,null,null,13,"div",[["class","inline-flex"]],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(14,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.rb(15,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.rb(16,0,null,null,0,"img",[["alt","Address"],["src","assets\\address.png"]],null,null,null,null,null)),(t()(),i.rb(17,0,null,null,8,"div",[],null,null,null,null,null)),(t()(),i.rb(18,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i.Hb(19,null,["",""])),(t()(),i.ib(16777216,null,null,1,null,Ls)),i.qb(21,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Fs)),i.qb(23,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Ds)),i.qb(25,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(26,0,null,null,8,"div",[],null,null,null,null,null)),(t()(),i.rb(27,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.rb(28,0,null,null,0,"img",[["alt","Contact Number"],["src","assets\\contact number.png"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,As)),i.qb(30,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Bs)),i.qb(32,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,zs)),i.qb(34,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(35,0,null,0,0,"span",[["class","spacer"]],null,null,null,null,null)),(t()(),i.rb(36,0,null,0,22,"div",[],null,null,null,null,null)),(t()(),i.rb(37,0,null,null,15,"div",[],null,null,null,null,null)),(t()(),i.rb(38,0,null,null,14,"span",[],null,null,null,null,null)),(t()(),i.rb(39,0,null,null,8,"div",[],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(41,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.Hb(42,null,[" "," : "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(44,0,null,null,3,"span",[["dir","ltr"]],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(46,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.Hb(47,null,[" "," "])),(t()(),i.rb(48,0,null,null,4,"div",[],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(50,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.ib(16777216,null,null,1,null,Ns)),i.qb(52,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(53,0,null,null,5,"div",[],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(55,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.rb(56,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i.Hb(57,null,["",": ",""])),i.Cb(131072,v.i,[v.j,i.h])],(function(t,e){var n=e.component;t(e,2,0,n.selectedCentre===e.context.$implicit?"center-card center-card-selected":"center-card"),t(e,6,0,"center",e.context.$implicit),t(e,8,0,"center",n.selectedCentre),t(e,14,0,n.textDir),t(e,21,0,null!=e.context.$implicit.addressLine1&&""!=e.context.$implicit.addressLine1),t(e,23,0,null!=e.context.$implicit.addressLine2&&""!=e.context.$implicit.addressLine2),t(e,25,0,null!=e.context.$implicit.addressLine3&&""!=e.context.$implicit.addressLine3),t(e,30,0,""!==e.context.$implicit.contactPerson),t(e,32,0,""!==e.context.$implicit.contactPerson&&""!==e.context.$implicit.contactPhone),t(e,34,0,""==e.context.$implicit.contactPerson&&""!==e.context.$implicit.contactPhone),t(e,41,0,n.textDir),t(e,46,0,"ltr"),t(e,50,0,n.textDir),t(e,52,0,null!==e.context.$implicit.lunchStartTime&&null!==e.context.$implicit.lunchEndTime&&e.context.$implicit.lunchStartTime!==e.context.$implicit.lunchEndTime),t(e,55,0,n.textDir)}),(function(t,e){var n=e.component;t(e,4,0,i.Bb(e,10).ngClassUntouched,i.Bb(e,10).ngClassTouched,i.Bb(e,10).ngClassPristine,i.Bb(e,10).ngClassDirty,i.Bb(e,10).ngClassValid,i.Bb(e,10).ngClassInvalid,i.Bb(e,10).ngClassPending),t(e,12,0,i.Bb(e,14)._rawDir),t(e,19,0,e.context.$implicit.name),t(e,39,0,i.Bb(e,41)._rawDir),t(e,42,0,i.Ib(e,42,0,i.Bb(e,43).transform("centerSelection.text_timing"))),t(e,44,0,i.Bb(e,46)._rawDir);var o=n.showTime(e.context.$implicit.centerStartTime.substring(0,5),e.context.$implicit.centerEndTime.substring(0,5));t(e,47,0,o),t(e,48,0,i.Bb(e,50)._rawDir),t(e,53,0,i.Bb(e,55)._rawDir),t(e,57,0,i.Ib(e,57,0,i.Bb(e,58).transform("centerSelection.text_open")),e.context.$implicit.workingDays)}))}function js(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,7,"div",[["class","centers-list"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,Ps)),i.qb(2,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Os)),i.qb(4,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(5,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,Gs)),i.qb(7,278528,null,0,f.k,[i.Q,i.N,i.t],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,2,0,!n.showMessage&&!n.searchClick&&0!==n.REGISTRATION_CENTRES.length),t(e,4,0,n.showMessage&&0===n.REGISTRATION_CENTRES.length),t(e,7,0,n.REGISTRATION_CENTRES)}),null)}function qs(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,1,"mat-paginator",[["class","mat-paginator"]],null,[[null,"page"]],(function(t,e,n){var i=!0,o=t.component;return"page"===e&&(i=!1!==o.showResults(o.pageEvent=n)&&i),i}),W,N)),i.qb(2,245760,null,0,D.b,[D.c,i.h],{length:[0,"length"],pageSize:[1,"pageSize"],pageSizeOptions:[2,"pageSizeOptions"]},{page:"page"})],(function(t,e){var n=e.component;t(e,2,0,n.totalItems,n.pageSize,n.pageSizeOptions)}),null)}function Ys(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"div",[["class","map"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,1,"app-map",[["style","width:100%; height:35%;"]],null,null,null,ls,rs)),i.qb(2,114688,null,0,os,[is.a],{mapProvider:[0,"mapProvider"]},null)],(function(t,e){t(e,2,0,e.component.mapProvider)}),null)}function Xs(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,23,"div",[["class","center_selection-wrapper"]],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(2,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.rb(3,0,null,null,6,"mat-card",[["class","center-selection__title-card mat-card"]],null,null,null,M.d,M.a)),i.qb(4,49152,null,0,P.a,[],null,null),(t()(),i.rb(5,0,null,0,4,"mat-card-header",[["class","mat-card-header"]],null,null,null,M.c,M.b)),i.qb(6,49152,null,0,P.e,[],null,null),(t()(),i.rb(7,0,null,2,2,"p",[["class","center__title-card-text"]],null,null,null,null,null)),(t()(),i.Hb(8,null,["",""])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(10,0,null,null,13,"div",[["class","container"]],null,null,null,null,null)),(t()(),i.rb(11,0,null,null,10,"div",[["class","centers-wrapper"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,Ts)),i.qb(13,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i.ib(0,[["elseBlock",2]],null,0,null,Ms)),(t()(),i.ib(16777216,null,null,1,null,js)),i.qb(16,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(17,0,null,null,4,"div",[["dir","ltr"]],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(19,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.ib(16777216,null,null,1,null,qs)),i.qb(21,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Ys)),i.qb(23,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.textDir),t(e,13,0,n.searchClick,i.Bb(e,14)),t(e,16,0,n.REGISTRATION_CENTRES),t(e,19,0,"ltr"),t(e,21,0,0!==n.totalItems),t(e,23,0,n.showMap)}),(function(t,e){t(e,0,0,i.Bb(e,2)._rawDir),t(e,8,0,i.Ib(e,8,0,i.Bb(e,9).transform("centerSelection.title"))),t(e,17,0,i.Bb(e,19)._rawDir)}))}function Ks(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,14,"div",[],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(2,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.rb(3,0,null,null,11,"mat-card",[["class","center-selection__button-container mat-card"]],null,null,null,M.d,M.a)),i.qb(4,49152,null,0,P.a,[],null,null),(t()(),i.rb(5,0,null,0,2,"button",[["class","user__btn user__btn-back"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.routeBack()&&i),i}),null,null)),(t()(),i.Hb(6,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(8,0,null,0,0,"span",[["class","spacer"]],null,null,null,null,null)),(t()(),i.rb(9,0,null,0,2,"button",[["class","user__btn user__btn-action"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.routeDashboard()&&i),i}),null,null)),(t()(),i.Hb(10,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(12,0,null,0,2,"button",[["class","user__btn"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.routeNext()&&i),i}),null,null)),(t()(),i.Hb(13,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h])],(function(t,e){t(e,2,0,e.component.textDir)}),(function(t,e){var n=e.component;t(e,0,0,i.Bb(e,2)._rawDir),t(e,6,0,i.Ib(e,6,0,i.Bb(e,7).transform("centerSelection.action_back"))),t(e,10,0,i.Ib(e,10,0,i.Bb(e,11).transform("centerSelection.action_book_later"))),t(e,12,0,null===n.selectedCentre),t(e,13,0,i.Ib(e,13,0,i.Bb(e,14).transform("centerSelection.action_continue")))}))}function Ws(t){return i.Jb(0,[(t()(),i.ib(16777216,null,null,1,null,Cs)),i.qb(1,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Xs)),i.qb(3,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Ks)),i.qb(5,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,!n.isWorkingDaysAvailable),t(e,3,0,n.isWorkingDaysAvailable),t(e,5,0,n.isWorkingDaysAvailable)}),null)}function Hs(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"app-center-selection",[],null,null,null,Ws,xs)),i.qb(1,245760,null,0,bs,[gs.e,is.a,us.a,ms.m,ms.a,v.j,ps.a,ms.a],null,null)],(function(t,e){t(e,1,0)}),null)}var Us=i.nb("app-center-selection",bs,Hs,{},{},[]),Zs=n("dwco"),Vs=n.n(Zs),Js=function(){return function(t,e,n,i,o){this.preRegistrationId=t,this.registration_center_id=e,this.appointment_date=n,this.time_slot_from=i,this.time_slot_to=o}}(),Qs=n("P2cc"),$s=n("vARd"),ta=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function l(t){try{a(i.next(t))}catch(e){r(e)}}function s(t){try{a(i.throw(t))}catch(e){r(e)}}function a(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(l,s)}a((i=i.apply(t,e||[])).next())}))},ea=function(t,e){var n,i,o,r,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,i=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){l=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){l.label=r[1];break}if(6===r[0]&&l.label<o[1]){l.label=o[1],o=r;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(r);break}o[2]&&l.ops.pop(),l.trys.pop();continue}r=e.call(t,l)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},na=function(t){function e(e,n,i,o,r,l,s,a){var u=t.call(this,n)||this;return u.bookingService=e,u.dialog=n,u.dataService=i,u.router=o,u.translate=r,u.configService=l,u.activatedRoute=s,u._snackBar=a,u.textDir=localStorage.getItem("dir"),u.selectedTile=0,u.showNote=!1,u.limit=[],u.showAddButton=!1,u.names=[],u.deletedNames=[],u.selectedNames=[],u.availabilityData=[],u.disableAddButton=!0,u.activeTab="morning",u.bookingDataList=[],u.temp=[],u.registrationCenterLunchTime=[],u.disableContinueButton=!1,u.spinner=!0,u.canDeactivateFlag=!0,u.userPreferredLangCode=localStorage.getItem("userPrefLanguage"),u.subscriptions=[],u.preRegId=[],u.userInfo=[],u.afternoonSlotAvailable=!1,u.morningSlotAvailable=!1,u.name="",u.applicationStatus="",Vs.a.polyfill(),u.translate.use(u.userPreferredLangCode),u}return Object(ss.c)(e,t),e.prototype.ngOnInit=function(){return ta(this,void 0,void 0,(function(){var t=this;return ea(this,(function(e){switch(e.label){case 0:return this.router.url.includes("multiappointment")?this.preRegId=JSON.parse(localStorage.getItem("multiappointment")).slice():this.activatedRoute.params.subscribe((function(e){t.preRegId=[e.appId]})),this.activatedRoute.queryParams.subscribe((function(e){t.registrationCenter=e.regCenter})),this.name=this.configService.getConfigByKey(ds.f.preregistration_identity_name),this.dataService.getI18NLanguageFiles(this.userPreferredLangCode).subscribe((function(e){t.languagelabels=e.timeSelection.booking,t.errorlabels=e.error,t.apiErrorCodes=e[ds.a],t.DAYS=e.DAYS})),[4,this.getUserInfo(this.preRegId)];case 1:return e.sent(),[4,this.getRegCenterDetails()];case 2:return e.sent(),this.prepareNameList(this.userInfo,this.regCenterInfo),this.days=this.configService.getConfigByKey(ds.f.preregistration_availability_noOfDays),this.temp[0]&&(this.registrationCenterLunchTime=this.temp[0].registrationCenter.lunchEndTime.split(":")),this.getSlotsforCenter(this.registrationCenter),[2]}}))}))},e.prototype.getUserInfo=function(t){var e=this;return new Promise((function(n){return ta(e,void 0,void 0,(function(){var e,i=this;return ea(this,(function(o){switch(o.label){case 0:e=0,o.label=1;case 1:return e<t.length?[4,this.getUserDetails(t[e]).then((function(t){return i.userInfo.push(t)}))]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return n(!0),[2]}}))}))}))},e.prototype.getUserDetails=function(t){var e=this;return new Promise((function(n){e.dataService.getUser(t.toString()).subscribe((function(e){n(new hs.a(t.toString(),e[ds.E],void 0,[]))}),(function(t){e.showErrorMessage(t)}))}))},e.prototype.getRegCenterDetails=function(){var t=this;return new Promise((function(e){t.dataService.getRegistrationCentersById(t.registrationCenter,t.userPreferredLangCode).subscribe((function(n){n[ds.E]&&(console.log(n[ds.E]),t.regCenterInfo=n[ds.E].registrationCenters[0],e(!0))}),(function(e){t.showErrorMessage(e)}))}))},e.prototype.prepareNameList=function(t,e){var n=this;console.log(this.userInfo.length),t.forEach((function(t){console.log(t);var i={preRegId:"",fullName:"",regDto:"",status:"",registrationCenter:"",bookingData:"",postalCode:""},o=t.request.demographicDetails.identity;cs.a.getApplicationLangs(t.request).filter((function(t){return t==n.userPreferredLangCode})).length>0?o[n.name].forEach((function(t){t.language==n.userPreferredLangCode&&(i.fullName=t.value)})):i.fullName=o[n.name][0].value,i.preRegId=t.request.preRegistrationId,i.status=t.request.statusCode,i.postalCode=o.postalCode,i.registrationCenter=e,console.log("user.request.statusCode: "+t.request.statusCode),t.request.statusCode===ds.e.pending&&(n.showNote=!0),n.names.push(i),n.temp.push(i)}))},e.prototype.scrollRight=function(){console.log(this.widgetsContent.nativeElement.scrollWidth),this.widgetsContent.nativeElement.scrollBy({left:this.widgetsContent.nativeElement.scrollLeft+750,behavior:"smooth"}),this.widgetsContent.nativeElement.scrollTo({left:this.widgetsContent.nativeElement.scrollLeft+750,behavior:"smooth"})},e.prototype.scrollLeft=function(){this.widgetsContent.nativeElement.scrollBy({left:this.widgetsContent.nativeElement.scrollLeft-750,behavior:"smooth"}),this.widgetsContent.nativeElement.scrollTo({left:this.widgetsContent.nativeElement.scrollLeft-750,behavior:"smooth"})},e.prototype.dateSelected=function(t){this.selectedTile=t},e.prototype.cardSelected=function(t){this.selectedCard=t,this.canAddApplicant(this.availabilityData[this.selectedTile].timeSlots[this.selectedCard])},e.prototype.itemDelete=function(t){this.deletedNames.push(this.availabilityData[this.selectedTile].timeSlots[this.selectedCard].names[t]),this.availabilityData[this.selectedTile].timeSlots[this.selectedCard].names.splice(t,1),this.selectedNames.splice(t,1),this.canAddApplicant(this.availabilityData[this.selectedTile].timeSlots[this.selectedCard])},e.prototype.addItem=function(t){this.canAddApplicant(this.availabilityData[this.selectedTile].timeSlots[this.selectedCard])&&(this.availabilityData[this.selectedTile].timeSlots[this.selectedCard].names.push(this.deletedNames[t]),this.selectedNames.push({name:this.deletedNames[t].fullName,bookingData:{displayTime:this.availabilityData[this.selectedTile].timeSlots[this.selectedCard].displayTime,tag:this.availabilityData[this.selectedTile].timeSlots[this.selectedCard].tag,tagLabel:this.availabilityData[this.selectedTile].timeSlots[this.selectedCard].tagLabel,date:this.availabilityData[this.selectedTile].displayDate}}),this.deletedNames.splice(t,1))},e.prototype.canAddApplicant=function(t){return t&&t.availability>t.names.length?(this.disableAddButton=!1,!0):(this.disableAddButton=!0,!1)},e.prototype.formatJson=function(t){var e=this;t.forEach((function(t){var n=0,i="",o="";e.translate.get("timeSelection.text_morning").subscribe((function(t){i=t})),e.translate.get("timeSelection.text_afternoon").subscribe((function(t){o=t})),t.timeSlots.forEach((function(r){n+=r.availability,r.names=[];var l=r.fromTime.split(":"),s=r.toTime.split(":");null===e.registrationCenterLunchTime[0]||null!==e.registrationCenterLunchTime[0]&&"00"===e.registrationCenterLunchTime[0].split(":")[0]?(r.tag="morning",r.tagLabel=i,t.showMorning=!0,e.morningSlotAvailable=!0,e.afternoonSlotAvailable=!1):l[0]<e.registrationCenterLunchTime[0]?(r.tag="morning",r.tagLabel=i,t.showMorning=!0,e.morningSlotAvailable=!0):(r.tag="afternoon",r.tagLabel=o,t.showAfternoon=!0,e.afternoonSlotAvailable=!0),r.displayTime=Number(l[0])>12?Number(l[0])-12:l[0],r.displayTime+=":"+l[1]+" - ",r.displayTime+=Number(s[0])>12?Number(s[0])-12:s[0],r.displayTime+=":"+s[1]})),t.TotalAvailable=n,t.inActive=!1;var r=e.configService.getConfigByKey(ds.f.mosip_left_to_right_orientation).split(",");t.displayDate=cs.a.getBookingDateTime(t.date,"",e.userPreferredLangCode,r);var l=new Date(Date.parse(t.date)).getDay();t.displayDay=e.DAYS[l],t.inActive||e.availabilityData.push(t)})),this.enableBucketTabs(),this.deletedNames=this.names.slice()},e.prototype.placeNamesInSlots=function(){var t=this;this.availabilityData[this.selectedTile].timeSlots.forEach((function(e){if(0!==t.names.length)for(;e.names.length<e.availability&&0!==t.names.length;)e.names.push(t.names[0]),t.names.splice(0,1)})),this.enableBucketTabs()},e.prototype.enableBucketTabs=function(){var t=this.availabilityData[this.selectedTile];this.tabSelected(t.showMorning&&t.showAfternoon||t.showMorning?"morning":"afternoon")},e.prototype.getSlotsforCenter=function(t){var e=this,n=this.dataService.getAvailabilityData(t).subscribe((function(t){e.spinner=!1,t[ds.E]&&(t[ds.E].centerDetails.length>0?e.formatJson(t[ds.E].centerDetails):e.showErrorMessage(null,e.errorlabels.centerDetailsNotAvailable))}),(function(t){e.showErrorMessage(null,e.errorlabels.centerDetailsNotAvailable)}));this.subscriptions.push(n)},e.prototype.tabSelected=function(t){var e=this;("morning"===t&&this.availabilityData[this.selectedTile].showMorning||"afternoon"===t&&this.availabilityData[this.selectedTile].showAfternoon)&&(this.activeTab=t,console.log(this.availabilityData[this.selectedTile]),console.log(this.availabilityData[this.selectedTile].timeSlots.filter((function(t){return t.tag===e.activeTab})).length),this.showsNamesContainer=this.availabilityData[this.selectedTile].timeSlots.filter((function(t){return t.tag===e.activeTab})).length>0,console.log(this.showsNamesContainer))},e.prototype.getNames=function(){var t=[];return this.deletedNames.forEach((function(e){t.push(e.fullName)})),t.join(", ")},e.prototype.makeBooking=function(){return ta(this,void 0,void 0,(function(){var t,e=this;return ea(this,(function(n){return this.canDeactivateFlag=!1,this.disableContinueButton=!0,this.bookingDataList=[],this.availabilityData.forEach((function(t){t.timeSlots.forEach((function(n){0!==n.names.length&&n.names.forEach((function(i){var o=new Js(i.preRegId,e.registrationCenter.toString(),t.date,n.fromTime,n.toTime);e.bookingDataList.push(o)}))}))})),0===this.bookingDataList.length?(this.disableContinueButton=!1,this.showErrorMessage(null,this.languagelabels.noSlotsSelectedForApplicant),[2]):(this.router.url.includes("multiappointment")||this.userInfo[0].request.statusCode!==ds.e.pending?this.router.url.includes("multiappointment")?(t=[],this.userInfo.forEach((function(e){e.request.statusCode===ds.e.pending&&t.push(e.request.preRegistrationId)})),0!==t.length?this.dialog.open(as.a,{width:"450px",data:{case:"CONFIRMATION",title:this.languagelabels.applicationLockConfirm.title,message:this.languagelabels.applicationLockConfirm.message,noButtonText:this.languagelabels.applicationLockConfirm.noButtonText,yesButtonText:this.languagelabels.applicationLockConfirm.yesButtonText}}).afterClosed().subscribe((function(t){!0===t?e.bookingOperationRequest():e.disableContinueButton=!1})):this.bookingOperationRequest()):this.bookingOperationRequest():this.dialog.open(as.a,{width:"400px",data:{case:"CONFIRMATION",title:this.languagelabels.applicationLockConfirm.title,message:this.languagelabels.applicationLockConfirm.message,noButtonText:this.languagelabels.applicationLockConfirm.noButtonText,yesButtonText:this.languagelabels.applicationLockConfirm.yesButtonText}}).afterClosed().subscribe((function(t){!0===t?e.bookingOperationRequest():e.disableContinueButton=!1})),[2])}))}))},e.prototype.bookingOperationRequest=function(){var t=this,e=new Qs.a(ds.t.booking,{bookingRequest:this.bookingDataList});if(0!==this.deletedNames.length){var n={case:"CONFIRMATION",message:this.languagelabels.deletedApplicant1[0]+' - "'+this.getNames()+' ". '+this.languagelabels.deletedApplicant1[1]+"?",yesButtonText:this.languagelabels.yesButtonText,noButtonText:this.languagelabels.noButtonText},i=this.dialog.open(as.a,{width:"400px",data:n,disableClose:!0}).afterClosed().subscribe((function(n){n?t.bookingOperation(e):t.disableContinueButton=!1}));this.subscriptions.push(i)}else this.bookingOperation(e)},e.prototype.bookingOperation=function(t){var e=this,n=this.dataService.makeBooking(t).subscribe((function(t){t[ds.E]&&e.dialog.open(as.a,{width:"400px",data:{case:"MESSAGE",title:e.languagelabels.title_success,message:e.languagelabels.msg_success}}).afterClosed().subscribe((function(){e.temp.forEach((function(t){})),e.bookingService.setSendNotification(!0);var t=cs.a.getURL(e.router.url,"summary",3);e.router.url.includes("multiappointment")?e.router.navigateByUrl(t+"/multiappointment/acknowledgement"):e.router.navigateByUrl(t+"/"+e.preRegId[0]+"/acknowledgement")}))}),(function(t){if(cs.a.getErrorCode(t)===ds.o.timeExpired){var n=cs.a.getErrorMessage(t).match(/\d+/g);e.showErrorMessage(t,e.errorlabels.timeExpired_1+n[0]+e.errorlabels.timeExpired_2)}else e.showErrorMessage(t)}));this.subscriptions.push(n)},e.prototype.showErrorMessage=function(t,e){var n=this;this.spinner=!1,this.disableContinueButton=!1;var i="",o={case:"ERROR",title:this.errorlabels.errorLabel,message:e||((i=cs.a.getErrorCode(t))==ds.o.slotNotAvailable?this.errorlabels.slotNotAvailable:cs.a.createErrorMessage(t,this.errorlabels,this.apiErrorCodes,this.configService)),yesButtonText:this.errorlabels.button_ok},r=this.openDialog(o,"400px").afterClosed().subscribe((function(){i===ds.o.slotNotAvailable&&(n.canDeactivateFlag=!1,n.router.url.includes("multiappointment")?n.router.navigateByUrl(n.userPreferredLangCode+"/pre-registration/booking/multiappointment/pick-center"):n.router.navigateByUrl(n.userPreferredLangCode+"/pre-registration/booking/"+n.preRegId[0]+"/pick-center")),n.errorlabels.centerDetailsNotAvailable===o.message&&(n.canDeactivateFlag=!1,n.router.url.includes("multiappointment")?n.router.navigateByUrl(n.userPreferredLangCode+"/pre-registration/booking/multiappointment/pick-center"):n.router.navigateByUrl(n.userPreferredLangCode+"/pre-registration/booking/"+n.preRegId[0]+"/pick-center"))}));this.subscriptions.push(r)},e.prototype.openDialog=function(t,e){return this.dialog.open(as.a,{width:e,data:t})},e.prototype.navigateDashboard=function(){this.canDeactivateFlag=!1,this.router.navigate([this.userPreferredLangCode+"/dashboard"])},e.prototype.navigateBack=function(){this.canDeactivateFlag=!1;var t=cs.a.getURL(this.router.url,"pick-center",1);this.router.navigateByUrl(t)},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))},e.ngInjectableDef=i.U({factory:function(){return new e(i.Y(is.a),i.Y(gs.e),i.Y(us.a),i.Y(ms.m),i.Y(v.j),i.Y(ps.a),i.Y(ms.a),i.Y($s.b))},token:e,providedIn:"root"}),e}(_s),ia=i.pb({encapsulation:0,styles:[[".spinner[_ngcontent-%COMP%]{flex-direction:column;align-items:center;margin-top:18vw;display:flex}.time-selection__title-card[_ngcontent-%COMP%]{color:#ff4081;padding:0;display:flex;align-items:center;white-space:nowrap;border-bottom:1px solid #ff4081;border-radius:0!important;position:relative}.time-selection__note-text[_ngcontent-%COMP%]{color:#ff4081;display:flex;align-items:center;white-space:nowrap;padding:5px;border-radius:0!important;font-size:14px}.disable_add[_ngcontent-%COMP%]{opacity:.6!important;cursor:not-allowed!important}.time-selection__arrow-text[_ngcontent-%COMP%]{margin:auto;cursor:pointer;color:#ff4081}.time-selection__date-card[_ngcontent-%COMP%]{margin:0 2vw;border-radius:0;padding:20px 2rem;position:relative}.time-selection__tile-date[_ngcontent-%COMP%]{margin:10px 0;font-size:1rem;font-weight:600}.time-selection__tile-date-text[_ngcontent-%COMP%]{margin:10px 0;font-size:1rem;font-weight:400}.time-selection__tile-availability-text[_ngcontent-%COMP%]{margin:15px 0;font-size:.8rem;font-weight:400}.time-selection__slots-div[_ngcontent-%COMP%]{display:flex;margin:0 2vw;padding-bottom:80px;position:relative;z-index:1}.time-seelection__slot-groups-div[_ngcontent-%COMP%]{display:flex;margin:20px 2vw 0;padding:0 2rem}.time-seelection__slot-groups-div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 40px 5px 0;font-weight:500;cursor:pointer;text-decoration:none}.time-seelection__slot-groups-div-selected[_ngcontent-%COMP%]{color:#00f!important}.time-selection__time-slots-container[_ngcontent-%COMP%]{border-top:1px solid #ff4081;margin-right:20px;padding:0;border-radius:0}.time-selection__names-container[_ngcontent-%COMP%]{min-width:24.5%;padding:0;position:relative}.time-selection__time-slots-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-width:100%}.time-selection__name-list-header[_ngcontent-%COMP%]{min-height:50px;width:100%;background-color:#3973ac;padding:5px 2rem;word-wrap:break-word;color:#fff}.time-selection__names-header-date-text[_ngcontent-%COMP%]{font-size:.9rem}.time-selection__names-header-time-text[_ngcontent-%COMP%]{font-size:.9rem;margin-top:10px}.time-selection__names-header-day-text[_ngcontent-%COMP%]{font-size:.9rem}.time-selection__name-list[_ngcontent-%COMP%]{padding:0 2rem;list-style:none;width:100%;word-wrap:break-word;word-break:break-all;white-space:pre-wrap}.time-selection__name-list-item[_ngcontent-%COMP%]{padding:15px 0 15px 10px;min-height:50px;width:100%;font-size:.8rem}.selected-name-list-item[_ngcontent-%COMP%]{padding:10px;min-height:30px;border-bottom:1px solid #ff4081;width:100%;font-size:.8rem}.name-delete-button[_ngcontent-%COMP%]{font-size:1rem;cursor:pointer;float:right;text-align:center;transform:translateY(.2rem)}.button-placer[_ngcontent-%COMP%]{margin-left:50%}.button-right[_ngcontent-%COMP%]{float:right}.card[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:110px;width:295px;margin:0;border:1px solid #eee;box-shadow:none;cursor:pointer;border-radius:0}.card-content[_ngcontent-%COMP%]{padding:15px 2rem}.card-time-text[_ngcontent-%COMP%]{font-size:20px;font-weight:100;margin-bottom:2rem}.card-slot-text[_ngcontent-%COMP%]{font-size:11px;font-weight:500;color:#00f}.card-slot-text-span-number[_ngcontent-%COMP%]{font-size:.6rem!important;color:#000}.card-slot-text-selected[_ngcontent-%COMP%]{font-size:11px;font-weight:500;color:#fff}.sizing[_ngcontent-%COMP%]{height:130px;display:inline-block;margin:0 15px;text-align:left;cursor:pointer;background-color:#eee;padding:2px 20px;border:1px solid #eee}.sizing[_ngcontent-%COMP%]:nth-child(1){margin-left:0}.middle[_ngcontent-%COMP%]{float:left;overflow:hidden;width:67.5%;white-space:nowrap;margin:0 15px}.container[_ngcontent-%COMP%]{display:flex;text-align:center}.left-button[_ngcontent-%COMP%]{margin:auto;float:left;cursor:pointer}.right-button[_ngcontent-%COMP%]{margin:auto;float:right;cursor:pointer}.disabled[_ngcontent-%COMP%]{color:#aaa;border:1px solid #aaa;cursor:initial}.selected[_ngcontent-%COMP%]{border:1px solid #ff4081}.selected-card[_ngcontent-%COMP%]{background-color:#ff4081!important;color:#fff!important}.time-selection__button-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;margin-top:1rem;bottom:0;position:fixed;background:#fff;box-shadow:10px 10px 10px 3px grey;z-index:22;padding:0 2vw}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.time-selection__date[_ngcontent-%COMP%]{margin:.35rem 0 10px 5px;text-align:center}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin:0 -20px}.middle[_ngcontent-%COMP%]{margin:0;width:100%;overflow:scroll}div[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;background:0 0}.sizing[_ngcontent-%COMP%]{margin:0 5px}.time-selection__name-list-item[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.time-selection__time-slots-container[_ngcontent-%COMP%]{width:100%}.time-selection__slots-div[_ngcontent-%COMP%]{flex-wrap:wrap}.time-selection__names-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:94%;margin-top:24px}.time-selection__name-list-header[_ngcontent-%COMP%]{min-height:50px;padding:5px;height:70px;width:100%}.user-back-btn[_ngcontent-%COMP%], .user-book_later-btn[_ngcontent-%COMP%], .user-continue-btn[_ngcontent-%COMP%]{font-size:10px;padding:0 2px;margin-right:20px}}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;width:100%}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:100%;flex-wrap:wrap;flex:1}.circleBase[_ngcontent-%COMP%]{border-radius:50%;width:100px;height:100px;background:#d8d8d8;border:1px solid #000;padding:8px}.flexview[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:nowrap;align-content:space-between}@media screen and (min-width:767px) and (max-width:991px){.container[_ngcontent-%COMP%]{margin:0 0 0 15px}.sizing[_ngcontent-%COMP%]{margin:0 10px}.middle[_ngcontent-%COMP%]{margin:0;width:75%}}@media (min-width:1040px){.middle[_ngcontent-%COMP%]{width:85%}}"]],data:{}});function oa(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"div",[["class","spinner"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,1,"mat-spinner",[["class","mat-spinner mat-progress-spinner"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,c.b,c.a)),i.qb(2,49152,null,0,p.d,[i.k,d.a,[2,f.d],[2,g.a],p.a],null,null)],null,(function(t,e){t(e,1,0,i.Bb(e,2)._noopAnimations,i.Bb(e,2).diameter,i.Bb(e,2).diameter)}))}function ra(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"span",[["class","time-selection__note-text"]],null,null,null,null,null)),(t()(),i.Hb(1,null,["",""])),i.Cb(131072,v.i,[v.j,i.h])],null,(function(t,e){t(e,1,0,i.Ib(e,1,0,i.Bb(e,2).transform("timeSelection.note_text")))}))}function la(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,15,"mat-card",[["class","mat-card"],["style","padding: 0; border-radius: 0; margin:0 2vw;"]],[[1,"dir",0]],null,null,M.d,M.a)),i.qb(1,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),i.qb(2,49152,null,0,P.a,[],null,null),i.Eb(2048,null,S.c,null,[S.b]),(t()(),i.rb(4,0,null,0,11,"mat-card-header",[["class","time-selection__title-card mat-card-header"]],null,null,null,M.c,M.b)),i.qb(5,49152,null,0,P.e,[],null,null),(t()(),i.rb(6,0,null,2,7,"p",[["class","time-selection__title-card-text"]],null,null,null,null,null)),(t()(),i.Hb(7,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(9,16777216,null,null,4,"mat-icon",[["class","icon mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var o=!0;return"longpress"===e&&(o=!1!==i.Bb(t,11).show()&&o),"keydown"===e&&(o=!1!==i.Bb(t,11)._handleKeydown(n)&&o),"touchend"===e&&(o=!1!==i.Bb(t,11)._handleTouchend()&&o),o}),_.b,_.a)),i.qb(10,9158656,null,0,m.b,[i.k,m.d,[8,null],[2,m.a]],{inline:[0,"inline"]},null),i.qb(11,147456,null,0,y.d,[b.c,i.k,x.b,i.Q,i.A,d.a,C.c,C.h,y.b,[2,S.c],[2,y.a],[2,w.g]],{message:[0,"message"]},null),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.Hb(-1,0,["help_outline"])),(t()(),i.ib(16777216,null,2,1,null,ra)),i.qb(15,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.textDir),t(e,10,0,!0),t(e,11,0,i.tb(1,"",i.Ib(e,11,0,i.Bb(e,12).transform("helpText.bookAppointment")),"")),t(e,15,0,n.showNote)}),(function(t,e){t(e,0,0,i.Bb(e,1)._rawDir),t(e,7,0,i.Ib(e,7,0,i.Bb(e,8).transform("timeSelection.title_book"))),t(e,9,0,i.Bb(e,10).inline,"primary"!==i.Bb(e,10).color&&"accent"!==i.Bb(e,10).color&&"warn"!==i.Bb(e,10).color)}))}function sa(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,13,"mat-card",[["class","mat-card"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.dateSelected(t.context.index)&&i),i}),M.d,M.a)),i.qb(1,278528,null,0,f.j,[i.t,i.u,i.k,i.F],{ngClass:[0,"ngClass"]},null),i.qb(2,49152,null,0,P.a,[],null,null),(t()(),i.rb(3,0,null,0,10,"mat-card-content",[["class","time-selection__date mat-card-content"]],null,null,null,null,null)),i.qb(4,16384,null,0,P.c,[],null,null),(t()(),i.rb(5,0,null,null,1,"p",[["class","time-selection__tile-date"]],null,null,null,null,null)),(t()(),i.Hb(6,null,["",""])),(t()(),i.rb(7,0,null,null,1,"p",[["class","time-selection__tile-date-text"]],null,null,null,null,null)),(t()(),i.Hb(8,null,[" "," "])),(t()(),i.rb(9,0,null,null,1,"p",[["class","time-selection__tile-availability-text"]],null,null,null,null,null)),(t()(),i.Hb(10,null,[" "," "])),(t()(),i.rb(11,0,null,null,2,"p",[["class","time-selection__tile-availability-text"]],null,null,null,null,null)),(t()(),i.Hb(12,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h])],(function(t,e){t(e,1,0,e.context.$implicit.holiday?"sizing disabled":e.component.selectedTile===e.context.index?"sizing selected":"sizing")}),(function(t,e){t(e,6,0,e.context.$implicit.displayDate),t(e,8,0,e.context.$implicit.displayDay),t(e,10,0,e.context.$implicit.TotalAvailable),t(e,12,0,i.Ib(e,12,0,i.Bb(e,13).transform("timeSelection.text_availability")))}))}function aa(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,21,"mat-card",[["class","time-selection__date-card mat-card"]],null,null,null,M.d,M.a)),i.qb(1,49152,null,0,P.a,[],null,null),(t()(),i.rb(2,0,null,0,19,"div",[],null,null,null,null,null)),(t()(),i.rb(3,0,null,null,18,"div",[["class","container"]],null,null,null,null,null)),(t()(),i.rb(4,0,null,null,3,"div",[["class","time-selection__arrow-text"]],null,null,null,null,null)),(t()(),i.rb(5,0,null,null,2,"p",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.scrollLeft()&&i),i}),null,null)),(t()(),i.Hb(6,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(8,0,null,null,2,"div",[["class","left-button"]],null,null,null,null,null)),(t()(),i.rb(9,0,null,null,1,"a",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.scrollLeft()&&i),i}),null,null)),(t()(),i.rb(10,0,null,null,0,"img",[["alt","Left"],["src","assets/left.png"]],null,null,null,null,null)),(t()(),i.rb(11,0,[[1,0],["widgetsContent",1]],null,3,"div",[["class","middle"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,2,null,sa)),i.qb(13,278528,null,0,f.k,[i.Q,i.N,i.t],{ngForOf:[0,"ngForOf"]},null),i.Cb(0,f.u,[]),(t()(),i.rb(15,0,null,null,2,"div",[["class","right-button"]],null,null,null,null,null)),(t()(),i.rb(16,0,null,null,1,"a",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.scrollRight()&&i),i}),null,null)),(t()(),i.rb(17,0,null,null,0,"img",[["alt","Right"],["src","assets/right.png"]],null,null,null,null,null)),(t()(),i.rb(18,0,null,null,3,"div",[["class","time-selection__arrow-text"]],null,null,null,null,null)),(t()(),i.rb(19,0,null,null,2,"p",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.scrollRight()&&i),i}),null,null)),(t()(),i.Hb(20,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h])],(function(t,e){var n=e.component;t(e,13,0,i.Ib(e,13,0,i.Bb(e,14).transform(n.availabilityData,0,n.days)))}),(function(t,e){t(e,6,0,i.Ib(e,6,0,i.Bb(e,7).transform("timeSelection.text_prev"))),t(e,20,0,i.Ib(e,20,0,i.Bb(e,21).transform("timeSelection.text_next")))}))}function ua(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,3,"a",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.tabSelected("morning")&&i),i}),null,null)),i.qb(1,278528,null,0,f.j,[i.t,i.u,i.k,i.F],{ngClass:[0,"ngClass"]},null),(t()(),i.Hb(2,null,["",""])),i.Cb(131072,v.i,[v.j,i.h])],(function(t,e){t(e,1,0,"morning"===e.component.activeTab?"time-seelection__slot-groups-div-selected":"time-seelection__slot-groups-div a")}),(function(t,e){t(e,2,0,i.Ib(e,2,0,i.Bb(e,3).transform("timeSelection.text_morning")))}))}function ha(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,3,"a",[],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.tabSelected("afternoon")&&i),i}),null,null)),i.qb(1,278528,null,0,f.j,[i.t,i.u,i.k,i.F],{ngClass:[0,"ngClass"]},null),(t()(),i.Hb(2,null,["",""])),i.Cb(131072,v.i,[v.j,i.h])],(function(t,e){t(e,1,0,"afternoon"===e.component.activeTab?"time-seelection__slot-groups-div-selected":"time-seelection__slot-groups-div a")}),(function(t,e){t(e,2,0,i.Ib(e,2,0,i.Bb(e,3).transform("timeSelection.text_afternoon")))}))}function ca(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,4,"div",[["class","time-seelection__slot-groups-div"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,ua)),i.qb(2,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,ha)),i.qb(4,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.morningSlotAvailable),t(e,4,0,n.afternoonSlotAvailable)}),null)}function pa(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"span",[["class","card-slot-text-span-number circleBase"],["style","float: inline-end;"]],null,null,null,null,null)),(t()(),i.Hb(1,null,["",""])),(t()(),i.rb(2,0,null,null,0,"img",[["alt","Slots"],["height","15px"],["src","assets/slots.png"],["width","15px"]],null,null,null,null,null))],null,(function(t,e){t(e,1,0,e.parent.parent.context.$implicit.names.length)}))}function da(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,12,"mat-card",[["class","mat-card"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.cardSelected(t.parent.context.index)&&i),i}),M.d,M.a)),i.qb(1,278528,null,0,f.j,[i.t,i.u,i.k,i.F],{ngClass:[0,"ngClass"]},null),i.qb(2,49152,null,0,P.a,[],null,null),(t()(),i.rb(3,0,null,0,9,"mat-card-content",[["class","mat-card-content"],["style","width: 100%"]],null,null,null,null,null)),i.qb(4,16384,null,0,P.c,[],null,null),(t()(),i.rb(5,0,null,null,1,"p",[["class","card-time-text"]],null,null,null,null,null)),(t()(),i.Hb(6,null,[" "," "])),(t()(),i.rb(7,0,null,null,5,"p",[],null,null,null,null,null)),i.qb(8,278528,null,0,f.j,[i.t,i.u,i.k,i.F],{ngClass:[0,"ngClass"]},null),(t()(),i.Hb(9,null,[" "," "," \xa0\xa0 "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.ib(16777216,null,null,1,null,pa)),i.qb(12,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.selectedCard===e.parent.context.index?"card card-content selected-card":"card card-content"),t(e,8,0,n.selectedCard===e.parent.context.index?"card-slot-text-selected":"card-slot-text"),t(e,12,0,0!==e.parent.context.$implicit.names.length)}),(function(t,e){t(e,6,0,e.parent.context.$implicit.displayTime),t(e,9,0,e.parent.context.$implicit.availability,i.Ib(e,9,1,i.Bb(e,10).transform("timeSelection.text_slots")))}))}function fa(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,da)),i.qb(2,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,2,0,e.context.$implicit.tag===e.component.activeTab)}),null)}function ga(t){return i.Jb(0,[(t()(),i.rb(0,0,[[2,0],["cardsContent",1]],null,2,"div",[["class","middle-card"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,fa)),i.qb(2,278528,null,0,f.k,[i.Q,i.N,i.t],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.availabilityData[n.selectedTile].timeSlots)}),null)}function _a(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"span",[["class","time-selection__names-header-day-text"]],null,null,null,null,null)),(t()(),i.Hb(1,null,["",""])),i.Cb(131072,v.i,[v.j,i.h])],null,(function(t,e){t(e,1,0,i.Ib(e,1,0,i.Bb(e,2).transform("timeSelection.text_morning")))}))}function ma(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,2,"span",[["class","time-selection__names-header-day-text"]],null,null,null,null,null)),(t()(),i.Hb(1,null,["",""])),i.Cb(131072,v.i,[v.j,i.h])],null,(function(t,e){t(e,1,0,i.Ib(e,1,0,i.Bb(e,2).transform("timeSelection.text_afternoon")))}))}function va(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,13,"div",[["class","time-selection__name-list-header"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,1,"span",[["class","time-selection__names-header-date-text"]],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""])),(t()(),i.Hb(-1,null,[", "])),(t()(),i.rb(4,0,null,null,1,"span",[["class","time-selection__names-header-date-text"]],null,null,null,null,null)),(t()(),i.Hb(5,null,["",""])),(t()(),i.rb(6,0,null,null,0,"p",[],null,null,null,null,null)),(t()(),i.rb(7,0,null,null,1,"span",[["class","time-selection__names-header-time-text"]],null,null,null,null,null)),(t()(),i.Hb(8,null,["",""])),(t()(),i.Hb(-1,null,[", "])),(t()(),i.ib(16777216,null,null,1,null,_a)),i.qb(11,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,ma)),i.qb(13,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,11,0,"morning"===n.activeTab),t(e,13,0,"afternoon"===n.activeTab)}),(function(t,e){var n=e.component;t(e,2,0,n.availabilityData[n.selectedTile].displayDate),t(e,5,0,n.availabilityData[n.selectedTile].displayDay),t(e,8,0,n.availabilityData[n.selectedTile].timeSlots[n.selectedCard].displayTime)}))}function ya(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,6,"tr",[["class","time-selection__name-list-item"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""])),(t()(),i.rb(3,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),i.rb(4,0,null,null,2,"mat-icon",[["class","name-delete-button mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.itemDelete(t.context.index)&&i),i}),_.b,_.a)),i.qb(5,9158656,null,0,m.b,[i.k,m.d,[8,null],[2,m.a]],null,null),(t()(),i.Hb(-1,0,["close"]))],(function(t,e){t(e,5,0)}),(function(t,e){t(e,2,0,e.context.$implicit.fullName),t(e,4,0,i.Bb(e,5).inline,"primary"!==i.Bb(e,5).color&&"accent"!==i.Bb(e,5).color&&"warn"!==i.Bb(e,5).color)}))}function ba(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,3,"table",[["class","time-selection__name-list"]],null,null,null,null,null)),(t()(),i.rb(2,0,null,null,2,"tbody",[],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,ya)),i.qb(4,278528,null,0,f.k,[i.Q,i.N,i.t],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,4,0,n.availabilityData[n.selectedTile].timeSlots[n.selectedCard].names)}),null)}function xa(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,7,"tr",[["class","time-selection__name-list-item"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""])),(t()(),i.rb(3,0,null,null,4,"td",[],null,null,null,null,null)),(t()(),i.rb(4,0,null,null,3,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.addItem(t.context.index)&&i),i}),_.b,_.a)),i.qb(5,278528,null,0,f.j,[i.t,i.u,i.k,i.F],{ngClass:[0,"ngClass"]},null),i.qb(6,9158656,null,0,m.b,[i.k,m.d,[8,null],[2,m.a]],null,null),(t()(),i.Hb(-1,0,["add"]))],(function(t,e){t(e,5,0,e.component.disableAddButton?"name-delete-button disable_add":"name-delete-button"),t(e,6,0)}),(function(t,e){t(e,2,0,e.context.$implicit.fullName),t(e,4,0,i.Bb(e,6).inline,"primary"!==i.Bb(e,6).color&&"accent"!==i.Bb(e,6).color&&"warn"!==i.Bb(e,6).color)}))}function Ca(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,9,"div",[],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,3,"div",[["class","time-selection__name-list-header"]],null,null,null,null,null)),(t()(),i.rb(2,0,null,null,0,"p",[],null,null,null,null,null)),(t()(),i.Hb(3,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(5,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),i.rb(6,0,null,null,3,"table",[["class","time-selection__name-list"]],null,null,null,null,null)),(t()(),i.rb(7,0,null,null,2,"tbody",[],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,xa)),i.qb(9,278528,null,0,f.k,[i.Q,i.N,i.t],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,9,0,e.component.deletedNames)}),(function(t,e){t(e,3,0,i.Ib(e,3,0,i.Bb(e,4).transform("timeSelection.text_available")))}))}function Sa(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,5,"div",[["class","selected-name-list-item"]],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""])),(t()(),i.rb(3,0,null,null,0,"p",[],null,null,null,null,null)),(t()(),i.rb(4,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Hb(5,null,["("," "," "," ) "]))],null,(function(t,e){t(e,2,0,e.context.$implicit.name),t(e,5,0,e.context.$implicit.bookingData.date,e.context.$implicit.bookingData.displayTime,e.context.$implicit.bookingData.tagLabel)}))}function wa(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,5,"div",[],null,null,null,null,null)),(t()(),i.rb(1,0,null,null,2,"div",[["class","time-selection__name-list-header"]],null,null,null,null,null)),(t()(),i.Hb(2,null,["",""])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.ib(16777216,null,null,1,null,Sa)),i.qb(5,278528,null,0,f.k,[i.Q,i.N,i.t],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,5,0,e.component.selectedNames)}),(function(t,e){t(e,2,0,i.Ib(e,2,0,i.Bb(e,3).transform("timeSelection.text_selected")))}))}function Ta(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,10,"mat-card",[["class","time-selection__names-container mat-card"]],null,null,null,M.d,M.a)),i.qb(1,49152,null,0,P.a,[],null,null),(t()(),i.rb(2,0,null,0,4,"div",[],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,va)),i.qb(4,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,ba)),i.qb(6,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,0,1,null,Ca)),i.qb(8,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,0,1,null,wa)),i.qb(10,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,4,0,void 0!==n.availabilityData[n.selectedTile]&&void 0!==n.selectedCard),t(e,6,0,void 0!==n.availabilityData[n.selectedTile]&&void 0!==n.selectedCard),t(e,8,0,0!==n.deletedNames.length),t(e,10,0,0!==n.selectedNames.length)}),null)}function Ea(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,14,"div",[],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(2,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.rb(3,0,null,null,11,"mat-card",[["class","time-selection__button-container mat-card"]],null,null,null,M.d,M.a)),i.qb(4,49152,null,0,P.a,[],null,null),(t()(),i.rb(5,0,null,0,2,"button",[["class","user__btn user__btn-back"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.navigateBack()&&i),i}),null,null)),(t()(),i.Hb(6,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(8,0,null,0,0,"span",[["class","spacer"]],null,null,null,null,null)),(t()(),i.rb(9,0,null,0,2,"button",[["class","user__btn user__btn-action"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.navigateDashboard()&&i),i}),null,null)),(t()(),i.Hb(10,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h]),(t()(),i.rb(12,0,null,0,2,"button",[["class","user__btn"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.makeBooking()&&i),i}),null,null)),(t()(),i.Hb(13,null,[" "," "])),i.Cb(131072,v.i,[v.j,i.h])],(function(t,e){t(e,2,0,e.component.textDir)}),(function(t,e){var n=e.component;t(e,0,0,i.Bb(e,2)._rawDir),t(e,6,0,i.Ib(e,6,0,i.Bb(e,7).transform("timeSelection.action_back"))),t(e,10,0,i.Ib(e,10,0,i.Bb(e,11).transform("timeSelection.action_bookLater"))),t(e,12,0,n.disableContinueButton),t(e,13,0,i.Ib(e,13,0,i.Bb(e,14).transform("timeSelection.action_continue")))}))}function Ia(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,16,"div",[],[[1,"dir",0]],null,null,null,null)),i.Eb(6144,null,S.c,null,[S.b]),i.qb(2,1196032,null,0,S.b,[],{dir:[0,"dir"]},null),(t()(),i.ib(16777216,null,null,1,null,aa)),i.qb(4,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,ca)),i.qb(6,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.rb(7,0,null,null,7,"div",[["class","time-selection__slots-div"]],null,null,null,null,null)),(t()(),i.rb(8,0,null,null,4,"mat-card",[["class","time-selection__time-slots-container mat-card"]],null,null,null,M.d,M.a)),i.qb(9,49152,null,0,P.a,[],null,null),(t()(),i.rb(10,0,null,0,2,"div",[["class","container-card"]],null,null,null,null,null)),(t()(),i.ib(16777216,null,null,1,null,ga)),i.qb(12,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Ta)),i.qb(14,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Ea)),i.qb(16,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.textDir),t(e,4,0,0!==n.availabilityData.length),t(e,6,0,0!==n.availabilityData.length),t(e,12,0,void 0!==n.availabilityData[n.selectedTile]),t(e,14,0,n.availabilityData.length>0&&n.showsNamesContainer),t(e,16,0,!n.spinner)}),(function(t,e){t(e,0,0,i.Bb(e,2)._rawDir)}))}function Ra(t){return i.Jb(0,[i.Fb(671088640,1,{widgetsContent:0}),i.Fb(671088640,2,{cardsContent:0}),(t()(),i.ib(16777216,null,null,1,null,oa)),i.qb(3,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,la)),i.qb(5,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null),(t()(),i.ib(16777216,null,null,1,null,Ia)),i.qb(7,16384,null,0,f.l,[i.Q,i.N],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,3,0,n.spinner),t(e,5,0,0!==n.availabilityData.length),t(e,7,0,!n.spinner)}),null)}function ka(t){return i.Jb(0,[(t()(),i.rb(0,0,null,null,1,"app-time-selection",[],null,null,null,Ra,ia)),i.qb(1,245760,null,0,na,[is.a,gs.e,us.a,ms.m,v.j,ps.a,ms.a,$s.b],null,null)],(function(t,e){t(e,1,0)}),null)}var Ma=i.nb("app-time-selection",na,ka,{},{},[]),Pa=n("jQLj"),Oa=n("LPdn"),La=n("t/Na"),Fa=n("u7R8"),Da=n("de3e"),Aa=n("/VYK"),Ba=n("b716"),za=n("LC5p"),Na=n("0/Q6"),Ga=n("9It4"),ja=n("Nsh5"),qa=n("kWGw"),Ya=n("8mMr"),Xa=n("YhbO"),Ka=n("jlZm"),Wa=n("ubVL"),Ha=n("vvyD"),Ua=n("PCNd"),Za=n("DKlq"),Va=function(){return function(){}}();n.d(e,"BookingModuleNgFactory",(function(){return Ja}));var Ja=i.ob(o,[],(function(t){return i.yb([i.zb(512,i.j,i.db,[[8,[r.a,l.a,s.b,s.a,a.a,a.b,u.a,h.a,Us,Ma]],[3,i.j],i.y]),i.zb(4608,f.n,f.m,[i.v,[2,f.A]]),i.zb(4608,k.x,k.x,[]),i.zb(4608,k.e,k.e,[]),i.zb(4608,A.c,A.c,[]),i.zb(4608,b.c,b.c,[b.i,b.e,i.j,b.h,b.f,i.r,i.A,f.d,S.c,[2,f.h]]),i.zb(5120,b.j,b.k,[b.c]),i.zb(5120,gs.c,gs.d,[b.c]),i.zb(135680,gs.e,gs.e,[b.c,i.r,[2,f.h],[2,gs.b],gs.c,[3,gs.e],b.e]),i.zb(4608,R.d,R.d,[]),i.zb(5120,L.a,L.b,[b.c]),i.zb(4608,w.f,R.e,[[2,R.i],[2,R.n]]),i.zb(5120,y.b,y.c,[b.c]),i.zb(4608,Pa.i,Pa.i,[]),i.zb(5120,Pa.a,Pa.b,[b.c]),i.zb(4608,R.c,R.x,[[2,R.h],d.a]),i.zb(5120,D.c,D.a,[[3,D.c]]),i.zb(5120,v.f,Oa.a,[La.c]),i.zb(4608,v.c,v.e,[]),i.zb(4608,v.h,v.d,[]),i.zb(4608,v.b,v.a,[]),i.zb(4608,v.k,v.k,[]),i.zb(4608,v.j,v.j,[v.k,v.f,v.c,v.h,v.b,v.l,v.m]),i.zb(1073742336,f.c,f.c,[]),i.zb(1073742336,k.v,k.v,[]),i.zb(1073742336,k.j,k.j,[]),i.zb(1073742336,k.s,k.s,[]),i.zb(1073742336,S.a,S.a,[]),i.zb(1073742336,R.n,R.n,[[2,R.f],[2,w.g]]),i.zb(1073742336,d.b,d.b,[]),i.zb(1073742336,R.w,R.w,[]),i.zb(1073742336,E.c,E.c,[]),i.zb(1073742336,Fa.e,Fa.e,[]),i.zb(1073742336,P.f,P.f,[]),i.zb(1073742336,A.d,A.d,[]),i.zb(1073742336,Da.c,Da.c,[]),i.zb(1073742336,B.f,B.f,[]),i.zb(1073742336,x.c,x.c,[]),i.zb(1073742336,b.g,b.g,[]),i.zb(1073742336,gs.k,gs.k,[]),i.zb(1073742336,m.c,m.c,[]),i.zb(1073742336,Aa.c,Aa.c,[]),i.zb(1073742336,F.e,F.e,[]),i.zb(1073742336,Ba.c,Ba.c,[]),i.zb(1073742336,R.o,R.o,[]),i.zb(1073742336,R.u,R.u,[]),i.zb(1073742336,za.a,za.a,[]),i.zb(1073742336,Na.c,Na.c,[]),i.zb(1073742336,p.c,p.c,[]),i.zb(1073742336,Ga.c,Ga.c,[]),i.zb(1073742336,R.s,R.s,[]),i.zb(1073742336,L.d,L.d,[]),i.zb(1073742336,ja.h,ja.h,[]),i.zb(1073742336,qa.a,qa.a,[]),i.zb(1073742336,Ya.b,Ya.b,[]),i.zb(1073742336,Xa.c,Xa.c,[]),i.zb(1073742336,Ka.d,Ka.d,[]),i.zb(1073742336,C.a,C.a,[]),i.zb(1073742336,y.e,y.e,[]),i.zb(1073742336,Pa.j,Pa.j,[]),i.zb(1073742336,R.y,R.y,[]),i.zb(1073742336,R.p,R.p,[]),i.zb(1073742336,D.d,D.d,[]),i.zb(1073742336,Wa.b,Wa.b,[]),i.zb(1073742336,$s.e,$s.e,[]),i.zb(1073742336,Ha.a,Ha.a,[]),i.zb(1073742336,v.g,v.g,[]),i.zb(1073742336,Oa.b,Oa.b,[]),i.zb(1073742336,ms.o,ms.o,[[2,ms.u],[2,ms.m]]),i.zb(1073742336,Ua.a,Ua.a,[]),i.zb(1073742336,Va,Va,[]),i.zb(1073742336,o,o,[]),i.zb(256,R.g,R.k,[]),i.zb(256,v.m,void 0,[]),i.zb(256,v.l,void 0,[]),i.zb(1024,ms.k,(function(){return[[{path:"pick-center",component:bs,canDeactivate:[Za.a]},{path:"pick-time",component:na,canDeactivate:[Za.a]}]]}),[])])}))},dwco:function(t,e,n){!function(){"use strict";t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var n,i=t.HTMLElement||t.Element,o={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:i.prototype.scroll||s,scrollIntoView:i.prototype.scrollIntoView},r=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,l=(n=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==a(arguments[0])?d.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):o.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(a(arguments[0])?o.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):d.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},i.prototype.scroll=i.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==a(arguments[0])){var t=arguments[0].left,e=arguments[0].top;d.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},i.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==a(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},i.prototype.scrollIntoView=function(){if(!0!==a(arguments[0])){var n=p(this),i=n.getBoundingClientRect(),r=this.getBoundingClientRect();n!==e.body?(d.call(this,n,n.scrollLeft+r.left-i.left,n.scrollTop+r.top-i.top),"fixed"!==t.getComputedStyle(n).position&&t.scrollBy({left:i.left,top:i.top,behavior:"smooth"})):t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else o.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function s(t,e){this.scrollLeft=t,this.scrollTop=e}function a(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function u(t,e){return"Y"===e?t.clientHeight+l<t.scrollHeight:"X"===e?t.clientWidth+l<t.scrollWidth:void 0}function h(e,n){var i=t.getComputedStyle(e,null)["overflow"+n];return"auto"===i||"scroll"===i}function c(t){var e=u(t,"Y")&&h(t,"Y"),n=u(t,"X")&&h(t,"X");return e||n}function p(t){for(;t!==e.body&&!1===c(t);)t=t.parentNode||t.host;return t}function d(n,i,l){var a,u,h,c,p=r();n===e.body?(a=t,u=t.scrollX||t.pageXOffset,h=t.scrollY||t.pageYOffset,c=o.scroll):(a=n,u=n.scrollLeft,h=n.scrollTop,c=s),function e(n){var i,o,l,s=(r()-n.startTime)/468;s=s>1?1:s,i=.5*(1-Math.cos(Math.PI*s)),n.method.call(n.scrollable,o=n.startX+(n.x-n.startX)*i,l=n.startY+(n.y-n.startY)*i),o===n.x&&l===n.y||t.requestAnimationFrame(e.bind(t,n))}({scrollable:a,method:c,startTime:p,startX:u,startY:h,x:i,y:l})}}}}()}}]);